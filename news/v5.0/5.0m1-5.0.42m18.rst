========================================================
5.0m1-5.0.42m18
========================================================

.. include:: ../../substitutions.txt
|CCBYSA|_ Frank Bennett <https://twitter.com/fgbjr>_

------

Merge changes from upstream

:commit:
    `14e067d <https://github.com/Juris-M/zotero/commit/14e067d60d645e4a41579f51bb7c12dc66769b30>`_
:author:
    Frank Bennett
:date:
    2018-03-31 09:40 (JST)


------

Update translators

:commit:
    `e97f938 <https://github.com/Juris-M/zotero/commit/e97f9388d6261b9400b0458fbf4646ff7f1a3b56>`_
:author:
    Frank Bennett
:date:
    2018-03-31 09:32 (JST)


------

Avoid error on first use of widget

:commit:
    `ca64692 <https://github.com/Juris-M/zotero/commit/ca64692bcd17581644e1aec17761a5c53d34edee>`_
:author:
    Frank Bennett
:date:
    2018-03-30 18:58 (JST)


------

Reopen targeted collection on window open if closed at save time (macOS)

:commit:
    `37e850c <https://github.com/Juris-M/zotero/commit/37e850c67ba6893c3575f2dd6a3266a68f03acf9>`_
:author:
    Dan Stillman
:date:
    2018-03-30 14:55 (JST)


------

Fix attachment save failure on macOS with window closed

:commit:
    `5a08d22 <https://github.com/Juris-M/zotero/commit/5a08d22dbf03452468b499b2ffbb9e7d48ef2765>`_
:author:
    Dan Stillman
:date:
    2018-03-30 14:47 (JST)

Use hiddenDOMWindow if no other window


------

Update citeproc-js to 1.1.199

:commit:
    `fe5af63 <https://github.com/Juris-M/zotero/commit/fe5af6327775c7406726262836359034c736080a>`_
:author:
    Dan Stillman
:date:
    2018-03-30 07:27 (JST)


------

Fix weird test failure after c5cd38b4a5

:commit:
    `52c1249 <https://github.com/Juris-M/zotero/commit/52c12495231435e6a477d82cfe0c1f8aa2e79433>`_
:author:
    Dan Stillman
:date:
    2018-03-29 21:27 (JST)

The change in c5cd38b4a5 seems like it shouldn't have had any effect,
but creating an empty Set before yielding somehow avoided a race
condition with the subsequent updateSession call.


------

Additional comments and cleanup for target selector handler

:commit:
    `c5cd38b <https://github.com/Juris-M/zotero/commit/c5cd38b4a573dc7c343f246b6869d6b851cac999>`_
:author:
    Dan Stillman
:date:
    2018-03-29 20:27 (JST)


------

Skip items in save session that no longer exist

:commit:
    `9b9773d <https://github.com/Juris-M/zotero/commit/9b9773db165184359f04e3a882170328761e4b78>`_
:author:
    Dan Stillman
:date:
    2018-03-29 20:40 (JST)

Ideally I guess the entry would be removed from the save popup in the
connector and a second button click would do a fresh save rather than
reopening the popup, but for now just avoid an error.

Addresses zotero/zotero-connectors#220


------

Don't select items in trash on target selector change

:commit:
    `a4aabd9 <https://github.com/Juris-M/zotero/commit/a4aabd9f3e9caafe588706d19a9fcae925f9abdd>`_
:author:
    Dan Stillman
:date:
    2018-03-29 20:24 (JST)

Items in the trash will still be updated properly (since they can still
exist in collections and have tags), but the collection selected in the
target selector should remain selected in the client.

Addresses zotero/zotero-connectors#220


------

Update parent item from target selector if item was made a child item

:commit:
    `00d85fb <https://github.com/Juris-M/zotero/commit/00d85fb6da943f6559d080979aa57a09a8fc3c8d>`_
:author:
    Dan Stillman
:date:
    2018-03-29 20:16 (JST)

This is necessary for automatic PDF recognition.

Addresses zotero/zotero-connectors#220


------

Return proper text for 409 errors from HTTP server

:commit:
    `0f6b712 <https://github.com/Juris-M/zotero/commit/0f6b7129634f33ce942aef456f0f6add5a0dc1ee>`_
:author:
    Dan Stillman
:date:
    2018-03-29 20:11 (JST)


------

Add Zotero.Item.prototype.parentItem getter

:commit:
    `46eb84e <https://github.com/Juris-M/zotero/commit/46eb84e859e4972b2177d91fb395097378af144d>`_
:author:
    Dan Stillman
:date:
    2018-03-29 20:11 (JST)


------

Reimplement extraction, bind all items in document to shared library

:commit:
    `abdc92e <https://github.com/Juris-M/zotero/commit/abdc92e3df526c0d82b91a815be61c4fb53679b0>`_
:author:
    Frank Bennett
:date:
    2018-03-29 10:05 (JST)


------

Support target selector sessions for /connector/import

:commit:
    `38330e4 <https://github.com/Juris-M/zotero/commit/38330e4c137ec5b1573ef38d46e31db661315020>`_
:author:
    Dan Stillman
:date:
    2018-03-28 21:45 (JST)


------

Add a test case for copied citations (for 9c7271c6)

:commit:
    `bff7cee <https://github.com/Juris-M/zotero/commit/bff7cee374497389689753e3a92a1467f2953bfc>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-28 20:55 (JST)


------

Fix citations copied from other documents causing citeproc errors

:commit:
    `9c7271c <https://github.com/Juris-M/zotero/commit/9c7271c60659a44ef8ded83fc1e8eb46d5659300>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-28 20:40 (JST)

Might slow down the initial interaction with a document in
automatic updates mode.


------

Fix non-HiDPI tag swatches when item type image is low-res

:commit:
    `9ae582e <https://github.com/Juris-M/zotero/commit/9ae582e34558fc43507c55de9490a54b3e82bb9a>`_
:author:
    Dan Stillman
:date:
    2018-03-28 14:24 (JST)


------

Restore Zotero.Cite.getAbbreviation, needed by Better BibTeX

:commit:
    `54deeb7 <https://github.com/Juris-M/zotero/commit/54deeb739e930ecd6eef6453605d23ba21320bab>`_
:author:
    Frank Bennett
:date:
    2018-03-28 06:46 (JST)


------

Update version

:commit:
    `292a033 <https://github.com/Juris-M/zotero/commit/292a033c1aef91938a1bf48d54681bc4e261fc63>`_
:author:
    Dan Stillman
:date:
    2018-03-28 01:11 (JST)


------

Fix potential upgrade error from c96363746b

:commit:
    `3c5bc44 <https://github.com/Juris-M/zotero/commit/3c5bc44ddf5c1dd11a5141b463779d507c411c28>`_
:author:
    Dan Stillman
:date:
    2018-03-27 23:42 (JST)

If a related item was defined using both an old userID and the current
one, the schema upgrade step could fail.


------

Update locales from Transifex

:commit:
    `3db9155 <https://github.com/Juris-M/zotero/commit/3db915516ac6d87d1e613093e50e587f674f9de1>`_
:author:
    Dan Stillman
:date:
    2018-03-27 23:34 (JST)


------

Force empty storage filenames to '_'

:commit:
    `24b9612 <https://github.com/Juris-M/zotero/commit/24b9612a563c0cfc2353374ba63d3e2f1b067943>`_
:author:
    Dan Stillman
:date:
    2018-03-27 23:17 (JST)

Hopefully fixes https://forums.zotero.org/discussion/71039/sync-error-empty-path-for-item


------

Update version

:commit:
    `a9e047c <https://github.com/Juris-M/zotero/commit/a9e047cc9e8e9e1d05417822b5a0c1cda76ba026>`_
:author:
    Dan Stillman
:date:
    2018-03-27 23:18 (JST)


------

Restore 34455197149ce15ea24156804e8412fcf2b7b9f5

:commit:
    `9035554 <https://github.com/Juris-M/zotero/commit/9035554481649441a88536e9e4c583f54b905413>`_
:author:
    Frank Bennett
:date:
    2018-03-27 19:48 (JST)


------

Upstream fixes for integration

:commit:
    `cf82f0b <https://github.com/Juris-M/zotero/commit/cf82f0bcc608adeb6975f15d45e7161a0a11d53d>`_
:author:
    Frank Bennett
:date:
    2018-03-27 19:44 (JST)


------

Update version

:commit:
    `6052f4c <https://github.com/Juris-M/zotero/commit/6052f4c2117bad8bb66cb5b70e22164089d31b80>`_
:author:
    Dan Stillman
:date:
    2018-03-27 18:56 (JST)


------

Ensure citation fields are properly initialized (regression 3445519)

:commit:
    `4e977f9 <https://github.com/Juris-M/zotero/commit/4e977f91ccef4235790151cc9defcfc7eec7cf33>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-27 18:43 (JST)


------

Bump version to m17

:commit:
    `cc0748f <https://github.com/Juris-M/zotero/commit/cc0748f6d827b69799b0110ec561a8abaa58e8fd>`_
:author:
    Frank Bennett
:date:
    2018-03-27 18:36 (JST)


------

Revert 34455197149ce15ea24156804e8412fcf2b7b9f5

:commit:
    `dd0ed5f <https://github.com/Juris-M/zotero/commit/dd0ed5f3f699fc0f3d91fcbaed90890025844f70>`_
:author:
    Frank Bennett
:date:
    2018-03-27 18:27 (JST)


------

Update translators

:commit:
    `b600885 <https://github.com/Juris-M/zotero/commit/b600885d11a2cfe3ea25093552ef1cb7fdde1685>`_
:author:
    Dan Stillman
:date:
    2018-03-27 16:10 (JST)


------

Adjust tests to reflect author-to-director CSL-M video mapping

:commit:
    `254637b <https://github.com/Juris-M/zotero/commit/254637b7ff6a26280bcda7cb1af9368346a7f14b>`_
:author:
    Frank Bennett
:date:
    2018-03-27 07:06 (JST)


------

Merge branch 'master' of https://github.com/zotero/zotero into jurism-5.0-dev

:commit:
    `79d1cc7 <https://github.com/Juris-M/zotero/commit/79d1cc735c5871f3107ce21c275afe989e4301e7>`_
:author:
    Frank Bennett
:date:
    2018-03-27 06:40 (JST)


------

Bump version to m15

:commit:
    `62a3187 <https://github.com/Juris-M/zotero/commit/62a31871094f9a28d4fab17cbd0714391fe13523>`_
:author:
    Frank Bennett
:date:
    2018-03-27 06:36 (JST)


------

Update translators and repotime

:commit:
    `35ea73f <https://github.com/Juris-M/zotero/commit/35ea73feeadcabc93d7ad104c53a2a44c120061d>`_
:author:
    Frank Bennett
:date:
    2018-03-27 06:36 (JST)


------

Fix display bug in multilingual fields

:commit:
    `bdb69f0 <https://github.com/Juris-M/zotero/commit/bdb69f0e394919fc5e1860810b1115ba47bbfecd>`_
:author:
    Frank Bennett
:date:
    2018-03-27 06:32 (JST)


------

Fix citationByIndex[i].sortedItem errors during citation insertion

:commit:
    `3445519 <https://github.com/Juris-M/zotero/commit/34455197149ce15ea24156804e8412fcf2b7b9f5>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-26 21:31 (JST)

Caused by inproper handling of copy-pasted citations in documents


------

Update COPYING

:commit:
    `e746da4 <https://github.com/Juris-M/zotero/commit/e746da4faba46533f35db7cbe04c91c757134a44>`_
:author:
    Sean Takats
:date:
    2018-03-26 18:27 (JST)


------

Fix upgrade error in c96363746b if no related items

:commit:
    `32aebd3 <https://github.com/Juris-M/zotero/commit/32aebd388b5506009bd764c1756438beb48e4337>`_
:author:
    Dan Stillman
:date:
    2018-03-26 17:48 (JST)


------

Fix related-item relations pointing to a previous user account

:commit:
    `c963637 <https://github.com/Juris-M/zotero/commit/c96363746bfc482173a3376138d11fdd188926c5>`_
:author:
    Dan Stillman
:date:
    2018-03-26 15:09 (JST)

If somebody switched accounts in a previous version, it was apparently
possible for related items to end up pointing at an item URI with the
old userID, which could cause a 403 on sync.

https://forums.zotero.org/discussion/70989/report-id-477331252

(5.0 deletes data when switching accounts to avoid exactly this sort of
bug.)


------

Use HiDPI icons in related-items box

:commit:
    `43692ee <https://github.com/Juris-M/zotero/commit/43692ee5648c2e62497c7ac9951c2ccda095c5be>`_
:author:
    Dan Stillman
:date:
    2018-03-26 15:08 (JST)


------

Return pdfMaxPages to search preferences (#1475)

:commit:
    `39ed221 <https://github.com/Juris-M/zotero/commit/39ed2217cdc1b5bb471b8acc23998c95261cae8b>`_
:author:
    Martynas Bagdonas
:date:
    2018-03-26 15:12 (JST)


------

Simplify installation instruction in README.md

:commit:
    `fdc8225 <https://github.com/Juris-M/zotero/commit/fdc82250861fe12196235096b1f6d26263005284>`_
:author:
    Frank Bennett
:date:
    2018-03-26 12:09 (JST)


------

Add function to delay syncs, and connector server endpoint to trigger it

:commit:
    `2effad4 <https://github.com/Juris-M/zotero/commit/2effad4f6a9db1f86758ba77eaef1fa04be3e904>`_
:author:
    Dan Stillman
:date:
    2018-03-25 17:56 (JST)

This will allow the connector to delay syncs while the target selector
window is open, and it can probably be used for imports and other
things.


------

Force author to director in CSL JSON export of videoRecording

:commit:
    `7b580bd <https://github.com/Juris-M/zotero/commit/7b580bd37ee4bdc7efd42e23ab4d5f462094b283>`_
:author:
    Frank Bennett
:date:
    2018-03-25 08:17 (JST)


------

Fix regression in item type switch

:commit:
    `d75f7ea <https://github.com/Juris-M/zotero/commit/d75f7eae23f3326b2acbaabb3a9caa07287b3528>`_
:author:
    Frank Bennett
:date:
    2018-03-24 23:05 (JST)


------

Update repotime

:commit:
    `e703356 <https://github.com/Juris-M/zotero/commit/e703356ceae7dcd7af78ef0740372a1c96c58fd7>`_
:author:
    Frank Bennett
:date:
    2018-03-24 21:10 (JST)


------

Update translators

:commit:
    `05a7ba4 <https://github.com/Juris-M/zotero/commit/05a7ba43b2712ddf6632a2c1302127260174f56d>`_
:author:
    Frank Bennett
:date:
    2018-03-24 21:09 (JST)


------

Update jurisdiction data object

:commit:
    `ae36e7d <https://github.com/Juris-M/zotero/commit/ae36e7d65ff4d779d3ec8434e1f6a684e6f1c90e>`_
:author:
    Frank Bennett
:date:
    2018-03-24 20:26 (JST)


------

Bump version to 5.0.39m14

:commit:
    `97593a8 <https://github.com/Juris-M/zotero/commit/97593a80f4270bb9f7550792a931931ec61575e9>`_
:author:
    Frank Bennett
:date:
    2018-03-24 16:08 (JST)


------

Update citeproc-js to 1.1.198

:commit:
    `f7f1962 <https://github.com/Juris-M/zotero/commit/f7f19620ac5f4e891203c49f0c42e81787a38108>`_
:author:
    Frank Bennett
:date:
    2018-03-24 14:15 (JST)


------

Fix object key

:commit:
    `1997e07 <https://github.com/Juris-M/zotero/commit/1997e0703addbbeedb3558a3cd6ef3aaaf659f3a>`_
:author:
    Frank Bennett
:date:
    2018-03-24 13:00 (JST)


------

Update translators

:commit:
    `41ff8f1 <https://github.com/Juris-M/zotero/commit/41ff8f1494168f2d22400729862e4660d1f8f21e>`_
:author:
    Frank Bennett
:date:
    2018-03-24 12:51 (JST)


------

Set up for app extras

:commit:
    `5845102 <https://github.com/Juris-M/zotero/commit/58451029b962143aa2515257d20fb2a2811ad1cc>`_
:author:
    Frank Bennett
:date:
    2018-03-24 12:42 (JST)


------

Remove value from config

:commit:
    `ea38bb2 <https://github.com/Juris-M/zotero/commit/ea38bb272a80196eda6147c94bd31f564dc17581>`_
:author:
    Frank Bennett
:date:
    2018-03-24 12:41 (JST)


------

Add missing test data to repo

:commit:
    `6bb8bb0 <https://github.com/Juris-M/zotero/commit/6bb8bb03f1780a9129cfa8fd6a0456abf33f8111>`_
:author:
    Frank Bennett
:date:
    2018-03-23 09:09 (JST)


------

Massage date parser a little, small revisions to itemFromCSLJSON and itemToCSLJSON

:commit:
    `483f138 <https://github.com/Juris-M/zotero/commit/483f138fc61f23c7382abb30faf4025e5f5152c3>`_
:author:
    Frank Bennett
:date:
    2018-03-23 08:17 (JST)


------

Align citeProcJSExport.js dates with form used in Zotero tests

:commit:
    `082bf98 <https://github.com/Juris-M/zotero/commit/082bf98fa264c3686a7931bb3c9f39d164a56e67>`_
:author:
    Frank Bennett
:date:
    2018-03-23 08:16 (JST)


------

Fix item URLs not unproxifying when saving from the connector

:commit:
    `b9837c6 <https://github.com/Juris-M/zotero/commit/b9837c690d8ad6adf2828e06e8685994b18bfa3f>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-22 22:36 (JST)

Regression from zotero/zotero-connectors#b7a0872


------

Fix citeproc.js, busted by merge oversight

:commit:
    `1fff63b <https://github.com/Juris-M/zotero/commit/1fff63b6776133aef39a59d172d4b4a86467f225>`_
:author:
    Frank Bennett
:date:
    2018-03-22 19:46 (JST)


------

Update locales from upstream

:commit:
    `3246d6a <https://github.com/Juris-M/zotero/commit/3246d6a13651d5be6222f9d681883c52f60577dd>`_
:author:
    Frank Bennett
:date:
    2018-03-22 19:43 (JST)


------

Update translators

:commit:
    `5e12ecf <https://github.com/Juris-M/zotero/commit/5e12ecfded1f6aeee4969b430c0d2c0840662c09>`_
:author:
    Frank Bennett
:date:
    2018-03-22 19:39 (JST)


------

Set to JM repotime.txt

:commit:
    `17d4c97 <https://github.com/Juris-M/zotero/commit/17d4c977d90e059a78fd3bc94457f0b2fefdb042>`_
:author:
    Frank Bennett
:date:
    2018-03-22 19:39 (JST)


------

Merge changes from upstream

:commit:
    `52346c9 <https://github.com/Juris-M/zotero/commit/52346c95181cfa4bee0e67e12b52c44b67402afd>`_
:author:
    Frank Bennett
:date:
    2018-03-22 19:39 (JST)


------

Fixes for bugs in tabbing, click-label-to-blur, and court/jurisdiction field updates

:commit:
    `42c7e00 <https://github.com/Juris-M/zotero/commit/42c7e0073c2157e646b42b017c616334da1b3388>`_
:author:
    Frank Bennett
:date:
    2018-03-22 18:01 (JST)


------

Create automatic (not manual) tags when retrieving PDF metadata by ISBN

:commit:
    `67b34b1 <https://github.com/Juris-M/zotero/commit/67b34b14824ca18a3e39543f723b85382d332ccc>`_
:author:
    Dan Stillman
:date:
    2018-03-22 04:58 (JST)

https://forums.zotero.org/discussion/71003/metadata-problem


------

Update version

:commit:
    `a673956 <https://github.com/Juris-M/zotero/commit/a67395678730d402f40e37441916aa6d1daf4a08>`_
:author:
    Dan Stillman
:date:
    2018-03-22 02:35 (JST)


------

Update locales from Transifex

:commit:
    `447659c <https://github.com/Juris-M/zotero/commit/447659cdabab8a073d3eb0fcf17c84671ddafbe0>`_
:author:
    Dan Stillman
:date:
    2018-03-22 01:13 (JST)


------

Bump version

:commit:
    `08e9bd7 <https://github.com/Juris-M/zotero/commit/08e9bd74a357f093ad1ea09602706bacfb4b5257>`_
:author:
    Frank Bennett
:date:
    2018-03-21 11:16 (JST)


------

Allow vertical bar to remain when normalizing abbrev keys

:commit:
    `928be2a <https://github.com/Juris-M/zotero/commit/928be2aaab5ee6d76c1550a74afcf45b65fa5199>`_
:author:
    Frank Bennett
:date:
    2018-03-21 11:16 (JST)


------

Update citeproc-js to 1.1.197

:commit:
    `00d4a5d <https://github.com/Juris-M/zotero/commit/00d4a5db59b8bfea985bd593ce1134b3a1697134>`_
:author:
    Frank Bennett
:date:
    2018-03-21 07:46 (JST)


------

Merge new English strings

:commit:
    `8782eaf <https://github.com/Juris-M/zotero/commit/8782eaf507eaf76e2f6da756b06e6b2b8dae8b4f>`_
:author:
    Dan Stillman
:date:
    2018-03-21 07:41 (JST)


------

Update translators

:commit:
    `c71f657 <https://github.com/Juris-M/zotero/commit/c71f657b08538a34bebd62d3f427ae8584051c3f>`_
:author:
    Dan Stillman
:date:
    2018-03-20 16:48 (JST)


------

Update locales from Transifex

:commit:
    `dabd7c1 <https://github.com/Juris-M/zotero/commit/dabd7c1055a16172c7488fd3a84a3281b5919cc5>`_
:author:
    Dan Stillman
:date:
    2018-03-20 16:46 (JST)


------

Changes to fix jurisdiction bugs

:commit:
    `5533427 <https://github.com/Juris-M/zotero/commit/55334272f6008afc6ee94c089878c4d54921bcfa>`_
:author:
    Frank Bennett
:date:
    2018-03-20 21:04 (JST)


------

Shows original and modified citation in warning prompt. Closes #1468

:commit:
    `3e39cb3 <https://github.com/Juris-M/zotero/commit/3e39cb33d9726ee52f606737b8f4dc4a6db3cd70>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-20 18:47 (JST)


------

Use 1.25dppx for HiDPI icon threshold

:commit:
    `d44cc05 <https://github.com/Juris-M/zotero/commit/d44cc05c3d1476af76cc4f07f5347142a07f7f2a>`_
:author:
    Dan Stillman
:date:
    2018-03-20 05:46 (JST)

On some laptops, scaling settings might cause the DPI to drop between
96 (1x) and 144 (1.5x), and downscaled icons are probably better than
upscaled ones.


------

Fix corrupt citation prompt going into recursive loop

:commit:
    `a12b997 <https://github.com/Juris-M/zotero/commit/a12b997b8a4021c90cf60e164dd394fcbb992706>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-19 18:36 (JST)


------

Fix alert not displaying after failed style install

:commit:
    `8d3e893 <https://github.com/Juris-M/zotero/commit/8d3e893aecc5523bf98c0c233049d449a1ec7fb5>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-19 17:52 (JST)


------

Replace p tag with two line breaks in ZU.cleanTags (#1465)

:commit:
    `0bb2bdc <https://github.com/Juris-M/zotero/commit/0bb2bdcbe3e076dbefcec80cd7dee65d396f5073>`_
:author:
    Philipp Zumstein
:date:
    2018-03-19 15:35 (JST)


------

Register suppressedJurisdictions list in an async statement before processor is invoked

:commit:
    `c8c2236 <https://github.com/Juris-M/zotero/commit/c8c2236f698ea706abca3a6a3558c10ecb1d9174>`_
:author:
    Frank Bennett
:date:
    2018-03-18 18:27 (JST)


------

Fix edited citation prompt not displaying (regression 25d8898)

:commit:
    `a659c6c <https://github.com/Juris-M/zotero/commit/a659c6c6ff04eef211774c26cc2ec03bab6cf43d>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-18 04:47 (JST)


------

Fix [(j-1)].sorteditems.slice(...)[0] is undefined integration error

:commit:
    `749faab <https://github.com/Juris-M/zotero/commit/749faabb468bc89db2bb138074a0f385bd8069e1>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-18 04:39 (JST)

Caused by empty citations being present in the document (i.e. without
any cited items and placeholder text like {Citation}).


------

Use language field returned from recognizer-server

:commit:
    `7b8f2e1 <https://github.com/Juris-M/zotero/commit/7b8f2e1dfe3c166d01015a35485c07dd7ec93557>`_
:author:
    Martynas Bagdonas
:date:
    2018-03-17 02:40 (JST)


------

Bump version to 5.0.37m11

:commit:
    `51428e7 <https://github.com/Juris-M/zotero/commit/51428e7156f80880166434f792a4185bad5e04c7>`_
:author:
    Frank Bennett
:date:
    2018-03-16 15:27 (JST)


------

Update translators

:commit:
    `d063ed8 <https://github.com/Juris-M/zotero/commit/d063ed88bf38185c12250ed09681422767e4057d>`_
:author:
    Frank Bennett
:date:
    2018-03-16 15:26 (JST)


------

Update citeproc-js to 1.1.193

:commit:
    `cf12f1e <https://github.com/Juris-M/zotero/commit/cf12f1e9ccc3f56a91446e38e8dd0fef856c5a43>`_
:author:
    Dan Stillman
:date:
    2018-03-16 02:13 (JST)


------

Update locales from Transifex and merge new English strings

:commit:
    `da08d7f <https://github.com/Juris-M/zotero/commit/da08d7f078cf0b5efc5d6b07c382283ea2470988>`_
:author:
    Dan Stillman
:date:
    2018-03-15 16:23 (JST)


------

"Choose File Handler" -> "Choose Application" for PDF viewer

:commit:
    `06e17fd <https://github.com/Juris-M/zotero/commit/06e17fd76d23355d4247746a899a18057806ac58>`_
:author:
    Dan Stillman
:date:
    2018-03-15 16:12 (JST)

(And potentially others in the future)


------

Update locales from Transifex and merge new English strings

:commit:
    `d145cff <https://github.com/Juris-M/zotero/commit/d145cff000e22662cfbeceda3e024a05289c322b>`_
:author:
    Dan Stillman
:date:
    2018-03-15 02:23 (JST)


------

Ensure delayed citation prompt strings are localizable

:commit:
    `e3648df <https://github.com/Juris-M/zotero/commit/e3648dfda00371e4f83615772be73f7d754b4ae5>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-15 02:08 (JST)


------

Ensure that document refresh doesn't perform needless text writes

:commit:
    `25d8898 <https://github.com/Juris-M/zotero/commit/25d8898ab0421bb765b6a7e8ca961d5653ed8847>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-14 22:27 (JST)


------

Clarify location of refresh button in delayed citation copy

:commit:
    `92346c8 <https://github.com/Juris-M/zotero/commit/92346c8fb99b57fd3ee9fab500ac38097bba1940>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-14 20:21 (JST)


------

Increase citation delay prompt timeout to 15 seconds

:commit:
    `6f6e18b <https://github.com/Juris-M/zotero/commit/6f6e18b4069b19297225121fc4e9c49d6965cb76>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-14 16:22 (JST)

By prompting after 3 seconds we catch a lot of people who click through
the prompt without bothering to read or figure out what it does and then
come to the forums report the citing "bugs". An increased timeout will
catch less people and those who are caught are possibly more likely to
figure out how delayed citing updates work since they would greatly
benefit from it.


------

Restore Report Errors item

:commit:
    `3f2861a <https://github.com/Juris-M/zotero/commit/3f2861a9cb396c98cbcbd2182a7b665c32e0cdc8>`_
:author:
    Frank Bennett
:date:
    2018-03-13 05:51 (JST)


------

Fix integration delayed citations popup timer. Closes #1461

:commit:
    `6c5aa06 <https://github.com/Juris-M/zotero/commit/6c5aa06d6b10ae891ebccc097c8a2b05331f2006>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-12 21:52 (JST)


------

Fix bug in Court field

:commit:
    `afbdcce <https://github.com/Juris-M/zotero/commit/afbdcceff2c682ed312edf99c755e6d0f63e2df8>`_
:author:
    Frank Bennett
:date:
    2018-03-12 10:36 (JST)


------

Update citeproc-js to 1.1.194

:commit:
    `a256398 <https://github.com/Juris-M/zotero/commit/a256398971e849ee426fdfa74474dfa1ecb681e4>`_
:author:
    Frank Bennett
:date:
    2018-03-12 07:30 (JST)


------

Bump jurisdictions version

:commit:
    `7f448c1 <https://github.com/Juris-M/zotero/commit/7f448c1045b916f3deb7f6403cd66af085e2bacf>`_
:author:
    Frank Bennett
:date:
    2018-03-12 07:23 (JST)


------

Use all DOI translators for metadata retrieval

:commit:
    `c04b85e <https://github.com/Juris-M/zotero/commit/c04b85e74648f9f58dbc100faf1c4eaaa816228e>`_
:author:
    Dan Stillman
:date:
    2018-03-12 07:15 (JST)

The old recognizer code only used CrossRef, and the new code copied
that, but I think the old code simply predated additional DOI
translators and was never updated.


------

Refresh jurisdictions for NZ

:commit:
    `027d5a8 <https://github.com/Juris-M/zotero/commit/027d5a8d58f6bea1943ea164cd994eae50a3cc8d>`_
:author:
    Frank Bennett
:date:
    2018-03-12 07:09 (JST)


------

Update locales from upstream

:commit:
    `033ba03 <https://github.com/Juris-M/zotero/commit/033ba0336bedebb61c1e189143593bb021df8246>`_
:author:
    Frank Bennett
:date:
    2018-03-11 22:34 (JST)


------

Merge branch 'master' of https://github.com/zotero/zotero into jurism-5.0-dev

:commit:
    `d3744c7 <https://github.com/Juris-M/zotero/commit/d3744c764388aca661f1d45d91025b2cca35ca00>`_
:author:
    Frank Bennett
:date:
    2018-03-11 22:32 (JST)


------

Update jurisdictions

:commit:
    `317e1ac <https://github.com/Juris-M/zotero/commit/317e1acc7d60b7804b2bbc95b6af3afce7fc86cb>`_
:author:
    Frank Bennett
:date:
    2018-03-11 22:27 (JST)


------

Update version

:commit:
    `c89df69 <https://github.com/Juris-M/zotero/commit/c89df69f142375a0941928e775f2536733a29ce0>`_
:author:
    Dan Stillman
:date:
    2018-03-11 17:37 (JST)


------

Update locales from Transifex

:commit:
    `71bee9c <https://github.com/Juris-M/zotero/commit/71bee9cfe74b491f9422129d0e13eb38f92f8f44>`_
:author:
    Dan Stillman
:date:
    2018-03-11 16:01 (JST)


------

Remove obsolete line from Babel config

:commit:
    `92dcd41 <https://github.com/Juris-M/zotero/commit/92dcd41a0a8af84462bad933c580fb507b14e6a7>`_
:author:
    Dan Stillman
:date:
    2018-03-11 15:41 (JST)

The whole resource/tinymce directory is symlinked now.


------

Fix note display in read-only libraries and classic citation dialog

:commit:
    `90b9754 <https://github.com/Juris-M/zotero/commit/90b975445ef7accbdf14ca0ee1b71623f7e58737>`_
:author:
    Dan Stillman
:date:
    2018-03-11 15:41 (JST)


------

Select created items when importing RIS/BibTeX from connector

:commit:
    `877ff97 <https://github.com/Juris-M/zotero/commit/877ff972a9b79c807eb75839594ce58dfa928d94>`_
:author:
    Dan Stillman
:date:
    2018-03-11 15:20 (JST)


------

Don't delete automatic tags after web translation

:commit:
    `137a0eb <https://github.com/Juris-M/zotero/commit/137a0ebbfda5c7d92879be9a1670d1248a2723bf>`_
:author:
    Dan Stillman
:date:
    2018-03-11 01:18 (JST)

Regression from c8cf9b9e6f, probably


------

Update version

:commit:
    `53bea1f <https://github.com/Juris-M/zotero/commit/53bea1fb9fbbc4495dc0d9fb395deb597780ca17>`_
:author:
    Dan Stillman
:date:
    2018-03-11 01:15 (JST)


------

Follow Zotero practice of setting CSL date parser from current UI locale

:commit:
    `7392051 <https://github.com/Juris-M/zotero/commit/739205124206e999b9e6b211bff92a6ab9d8cb76>`_
:author:
    Frank Bennett
:date:
    2018-03-10 18:14 (JST)


------

Make dateparser independent of CiteProc

:commit:
    `f82421a <https://github.com/Juris-M/zotero/commit/f82421af7a0778942ba1f2c9b81b3d22e0e0d903>`_
:author:
    Frank Bennett
:date:
    2018-03-10 18:13 (JST)


------

Safer fix for external note focus issues

:commit:
    `3dcdd7f <https://github.com/Juris-M/zotero/commit/3dcdd7f2ba843a3ec24501e0d14fc69dbcd3542e>`_
:author:
    Dan Stillman
:date:
    2018-03-10 05:15 (JST)

Follow-up to 96e96c0348 and 07efe0304e


------

Fix separate-window button for child notes (broken by 96e96c0348)

:commit:
    `07efe03 <https://github.com/Juris-M/zotero/commit/07efe0304ec110111581d771608d487b4824d1e3>`_
:author:
    Dan Stillman
:date:
    2018-03-10 05:01 (JST)


------

Update locales from Transifex

:commit:
    `efe5d86 <https://github.com/Juris-M/zotero/commit/efe5d8669cc3a1738556a820be5df1e6ab2a8077>`_
:author:
    Dan Stillman
:date:
    2018-03-10 04:33 (JST)


------

Update submodules

:commit:
    `5f6de1c <https://github.com/Juris-M/zotero/commit/5f6de1c787a46d82dc233a0d4ba82d290ea30a85>`_
:author:
    Dan Stillman
:date:
    2018-03-10 04:32 (JST)


------

Focus correct note window when multiple note windows are open

:commit:
    `96e96c0 <https://github.com/Juris-M/zotero/commit/96e96c0348d10643704b0a8d9c3b39b85b3501de>`_
:author:
    Dan Stillman
:date:
    2018-03-10 04:24 (JST)

Probably broken by dcfaa5521e


------

Fix multiple-item context menu (broken by 7e3bad7390)

:commit:
    `6745ea9 <https://github.com/Juris-M/zotero/commit/6745ea9868c89621a51668110e3be62b3156dddc>`_
:author:
    Dan Stillman
:date:
    2018-03-09 20:58 (JST)


------

Select parent item after metadata retrieval if only PDF was selected

:commit:
    `6c8cf71 <https://github.com/Juris-M/zotero/commit/6c8cf71c9ad9509b6210cb8b1fcb99a334600277>`_
:author:
    Dan Stillman
:date:
    2018-03-09 20:39 (JST)

TODO: select all parents


------

Fix cut-off top line of search bar on Windows

:commit:
    `16ad422 <https://github.com/Juris-M/zotero/commit/16ad422e89ed402421787ad06ba871cdd4ebb0f7>`_
:author:
    Dan Stillman
:date:
    2018-03-09 20:35 (JST)


------

Restore attachment title and filename when undoing Retrieve Metadata

:commit:
    `da30f9e <https://github.com/Juris-M/zotero/commit/da30f9e25c2e2b5047e21602bc559b5f323d7682>`_
:author:
    Dan Stillman
:date:
    2018-03-09 15:07 (JST)


------

Update locales from Transifex

:commit:
    `f5a2534 <https://github.com/Juris-M/zotero/commit/f5a2534169944c54659bc3e9f996f4fce0478c69>`_
:author:
    Dan Stillman
:date:
    2018-03-09 12:03 (JST)


------

Keep PDF handler menulist the right size

:commit:
    `81a75d7 <https://github.com/Juris-M/zotero/commit/81a75d79be608da0984c308c21eed067b9389c52>`_
:author:
    Dan Stillman
:date:
    2018-03-09 09:38 (JST)


------

Don't hide the automatic citation updates option in doc prefs

:commit:
    `f871da1 <https://github.com/Juris-M/zotero/commit/f871da17c8b218f796355871c582d5cf4112fda6>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-09 05:23 (JST)


------

Merge new English strings

:commit:
    `2f7c93a <https://github.com/Juris-M/zotero/commit/2f7c93a4e6bd48ce2c4ab59a1b6be7767e674cf4>`_
:author:
    Dan Stillman
:date:
    2018-03-08 18:07 (JST)


------

Allow a day for undo/report for metadata retrieval, not an hour

:commit:
    `23ebded <https://github.com/Juris-M/zotero/commit/23ebdedf48702d57d74cba9c443660c4aa4be9eb>`_
:author:
    Dan Stillman
:date:
    2018-03-08 18:06 (JST)


------

"Undo Retrieve Metadata" and "Report Inaccurate Metadata"

:commit:
    `7e3bad7 <https://github.com/Juris-M/zotero/commit/7e3bad7390e681881ebaf7f474da4dcfd9e7187d>`_
:author:
    Dan Stillman
:date:
    2018-03-08 17:50 (JST)

New context menu options for items that were recognized in the last day
and that haven't been modified


------

Fix embedded items not showing up in the citation dialog.

:commit:
    `cc5c17a <https://github.com/Juris-M/zotero/commit/cc5c17a6e1d013626c23ce0399f9167e1f98a4cf>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-08 17:21 (JST)

Regression in 2ad0dc00d, bad fix in 553d2b00. Closes #1448


------

Use 'paste' plugin from TinyMCE 4.6.7 to fix drag and drop cursor issue

:commit:
    `c7d05ad <https://github.com/Juris-M/zotero/commit/c7d05ad2f9ecc0b6ba23ef04993ad037f1938195>`_
:author:
    Dan Stillman
:date:
    2018-03-08 14:17 (JST)

https://forums.zotero.org/discussion/70720/after-copy-by-dragging-the-cursor-disappears


------

Fix font size scaling of tag selector tags on macOS and Linux

:commit:
    `438d966 <https://github.com/Juris-M/zotero/commit/438d9669c12aaaca8fb30582a31e7c5d421278af>`_
:author:
    Dan Stillman
:date:
    2018-03-08 12:15 (JST)


------

Prevent note font size pref from being cut off

:commit:
    `ea569b8 <https://github.com/Juris-M/zotero/commit/ea569b8b1a2cbd35aee3f1d0615859d608c61091>`_
:author:
    Dan Stillman
:date:
    2018-03-07 18:26 (JST)


------

Merge new English strings

:commit:
    `37eb26d <https://github.com/Juris-M/zotero/commit/37eb26df36ef0508d07c9e6797bbbb29d6ff4ce0>`_
:author:
    Dan Stillman
:date:
    2018-03-07 18:51 (JST)


------

Reorganize file prefs and add UI for choosing PDF handler

:commit:
    `647463c <https://github.com/Juris-M/zotero/commit/647463cc616c0d817a133ea6fa8388d49f5d7272>`_
:author:
    Dan Stillman
:date:
    2018-03-07 18:20 (JST)

- Add a File Handling section to the General pane of the preferences,
  and move several prefs from Miscellaneous to there
- Add a UI to that section for choosing the PDF handler
- Update Zotero.launchFileWithApplication() to use /usr/bin/open on
  macOS if the handler is an .app (which it will be if set through the
  chooser, since it's limited to Mac applications, though an executable
  can still be set via the hidden pref if desired for some reason)
- Move prefs for style/translator updates and translator error reporting
  (which isn't particularly relevant anymore in the client) to Advanced

By default the PDF handler chooser says "System Default", which isn't
the nicest thing, and there's probably a way to get/guess the system
default, since Firefox seems to know it (at least on macOS), but I
couldn't quickly find a way to do it.

Addresses #1450


------

Fix unloaded citation items being serialized with string IDs

:commit:
    `079cb25 <https://github.com/Juris-M/zotero/commit/079cb258f44504acd7f335f700d9e5d245a52586>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-06 18:46 (JST)


------

Only show Quick Copy menu option when appropriate

:commit:
    `b25d99c <https://github.com/Juris-M/zotero/commit/b25d99c241830b93ff19037c63fe44c5e7b47602>`_
:author:
    Dan Stillman
:date:
    2018-03-06 18:38 (JST)


------

Reduce idle CPU use to ~0%

:commit:
    `c4a6421 <https://github.com/Juris-M/zotero/commit/c4a64216ce2b47093f617ac47c7f77c51d29556d>`_
:author:
    Dan Stillman
:date:
    2018-03-06 18:19 (JST)

Various animated things (search spinner, progress meters) were using CPU
even when hidden, either because they weren't properly hidden
(equivalent of `display: none` rather than `visibility: hidden`) or
because of bizarre Firefox bugs with progress meters on Linux.

Addresses #1455


------

Allow custom handler for PDF files

:commit:
    `da09a3b <https://github.com/Juris-M/zotero/commit/da09a3bb9610e00f63a108d39af6646b28f7fe2d>`_
:author:
    Dan Stillman
:date:
    2018-03-06 09:29 (JST)

Configurable via extensions.zotero.fileHandler.pdf hidden pref for now,
though we'll probably make it a visible pref.

We also appear to have been doing blocking launches when launch()
failed, which may have been causing UI hangs when opening files on some
Linux installations. (I'm not sure if that's an issue with recent
Firefox builds. launch() works on Ubuntu 17.10.) All launches are now
async.

This is a rewritten version of PR #1450 by @ehhc.

Closes #1450


------

Additional debugging lines for connector sessions

:commit:
    `f6926cc <https://github.com/Juris-M/zotero/commit/f6926ccda678b728f5fb692a60ef8023aee99a26>`_
:author:
    Dan Stillman
:date:
    2018-03-03 05:16 (JST)


------

Update translators

:commit:
    `51ddc46 <https://github.com/Juris-M/zotero/commit/51ddc463227ca334de7e8680292f34fe35422ecb>`_
:author:
    Dan Stillman
:date:
    2018-03-06 08:10 (JST)


------

Update locales from Transifex

:commit:
    `de4aa4c <https://github.com/Juris-M/zotero/commit/de4aa4c2407a11b31139f73a966b94fac698af8b>`_
:author:
    Dan Stillman
:date:
    2018-03-06 08:00 (JST)


------

Make atob() available in translator sandbox

:commit:
    `23bbb5a <https://github.com/Juris-M/zotero/commit/23bbb5a1e52c8c1e1b448839ee61ad8b29ae22af>`_
:author:
    Dan Stillman
:date:
    2018-03-06 07:37 (JST)

Addresses zotero/translators#1576


------

Fix blue toolbar background on Windows with DWM compositor

:commit:
    `87efe75 <https://github.com/Juris-M/zotero/commit/87efe75e24ff639db15574b1ffa0eb2e62efb91f>`_
:author:
    Dan Stillman
:date:
    2018-03-06 07:13 (JST)

Applies to Windows 7 with Aero effects and later Windows versions


------

Fix an error being logged when window to activate is gone on Linux

:commit:
    `381351b <https://github.com/Juris-M/zotero/commit/381351b4335ebb9b9f4ad4e7147da7b5cacd7332>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-05 21:28 (JST)


------

Show delayed citations checkbox in doc prefs dialog after initialization

:commit:
    `13766e1 <https://github.com/Juris-M/zotero/commit/13766e1f6c11b92795d0f03126218f0d615d913d>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-05 21:26 (JST)

Closes #1458


------

Fix dead integration field object function calls

:commit:
    `5a1cf3a <https://github.com/Juris-M/zotero/commit/5a1cf3ab02d8e992279d3a0ce3f6d63c2d803291>`_
:author:
    Adomas Venčkauskas
:date:
    2018-03-05 20:46 (JST)


------

Small improvement in language menu. Scroll only content, allow cols to expand a little

:commit:
    `1585a58 <https://github.com/Juris-M/zotero/commit/1585a58ce726a5960b85b35d940c17123f292c27>`_
:author:
    Frank Bennett
:date:
    2018-03-05 19:39 (JST)


------

Reduce delayed-citations timeout to 3 seconds

:commit:
    `3f905be <https://github.com/Juris-M/zotero/commit/3f905be77e2c2f89ea4e5382d69790eddf938b57>`_
:author:
    Dan Stillman
:date:
    2018-03-05 16:16 (JST)

5 seconds is too long


------

Prevent doc prefs from expanding vertically

:commit:
    `1c23094 <https://github.com/Juris-M/zotero/commit/1c2309401e33ba66256d222b8e4784b03ddccd14>`_
:author:
    Frank Bennett
:date:
    2018-03-05 05:48 (JST)


------

Include the recognizer URL in config

:commit:
    `5bf476a <https://github.com/Juris-M/zotero/commit/5bf476a19136f4502cc886f7ca49a9b242e28862>`_
:author:
    Frank Bennett
:date:
    2018-03-04 19:22 (JST)


------

Point client at new updater service

:commit:
    `c46ea4d <https://github.com/Juris-M/zotero/commit/c46ea4dfd5fa662a3d8cbf8da32dfbfed0fb656b>`_
:author:
    Frank Bennett
:date:
    2018-03-04 15:36 (JST)


------

Update translators

:commit:
    `ed01b2a <https://github.com/Juris-M/zotero/commit/ed01b2ae7ccbc6eb9fcf3e83948d921faadfa31c>`_
:author:
    Frank Bennett
:date:
    2018-03-04 15:21 (JST)


------

Update locales from upstream

:commit:
    `c8f644d <https://github.com/Juris-M/zotero/commit/c8f644df3ef7411ef32d61e2a72add40a8abba51>`_
:author:
    Frank Bennett
:date:
    2018-03-04 15:15 (JST)


------

Merge branch 'master' of https://github.com/zotero/zotero into jurism-5.0-dev

:commit:
    `e1409e6 <https://github.com/Juris-M/zotero/commit/e1409e6c1345ac6c6d9b52abf195fb6c13e23a22>`_
:author:
    Frank Bennett
:date:
    2018-03-04 15:11 (JST)


------

Upgrade citeproc-js to 1.1.192

:commit:
    `376e77c <https://github.com/Juris-M/zotero/commit/376e77cf20df14e61f04934fdaf6012e8fa09809>`_
:author:
    Frank Bennett
:date:
    2018-03-04 14:55 (JST)


------

Make the Windows UI somewhat less unpleasant

:commit:
    `44632e2 <https://github.com/Juris-M/zotero/commit/44632e22180dce36dc94c7089e7bdb7123c13e38>`_
:author:
    Dan Stillman
:date:
    2018-03-03 09:50 (JST)

- Get rid of the hideous blue effect in the menubar and toolbar
- Slim down splitters
- Get rid of awful grippies except when collapsed (and make them
  slightly less ugly in the collapsed state)
- Reduce spacing of tags in tag selector
- Tweak twisty spacing
- Get rid of stray line to the right of item pane tabs

We may still want to get rid of the menubar (#366), and we can do better
than the ugly gray backgrounds (#365), but this is a start.

I'm not sure if everything will look the same on all Windows versions,
so this will need a little testing.

Closes #367


------

Prevent Undo from clearing existing note

:commit:
    `724329d <https://github.com/Juris-M/zotero/commit/724329d94865acfc16bbd5665385d75de4dca371>`_
:author:
    Dan Stillman
:date:
    2018-03-02 08:24 (JST)

When loading the first note of a session in the right-hand pane or when
loading a note in the separate window, if you made a change and then
pressed Undo twice (or maybe only once in some situations), it could
undo to empty (though you could usually Redo to restore it).


------

Remove special handling of Cmd-Shift-Z in notes

:commit:
    `bf122ad <https://github.com/Juris-M/zotero/commit/bf122add81b39521c6613553099a87cd1186978f>`_
:author:
    Dan Stillman
:date:
    2018-03-02 08:19 (JST)

No longer relevant in standalone app


------

Symlink TinyMCE directory during build

:commit:
    `7a15c88 <https://github.com/Juris-M/zotero/commit/7a15c889725b1f6fa5d4565d5e8ec3175f819bc0>`_
:author:
    Dan Stillman
:date:
    2018-03-02 08:18 (JST)


------

Update TinyMCE to 4.7.9

:commit:
    `e8403b9 <https://github.com/Juris-M/zotero/commit/e8403b96790d95fedc2645d3f7df2a4bd6ac0126>`_
:author:
    Dan Stillman
:date:
    2018-03-02 08:16 (JST)


------

Be more lenient about Extra field values than citeproc-js

:commit:
    `1f320e1 <https://github.com/Juris-M/zotero/commit/1f320e1f5d5fd818e2c2d532f4789e38792a77a2>`_
:author:
    Dan Stillman
:date:
    2018-03-02 06:58 (JST)

Allow fields like "Original Date: 2018" and convert them to
"original-date: 2018" when sending to citeproc-js.

For reference:

http://citeproc-js.readthedocs.io/en/latest/csl-json/markup.html#cheater-syntax-for-odd-fields


------

Shorten auto-renaming pref

:commit:
    `e1e5178 <https://github.com/Juris-M/zotero/commit/e1e5178869bd7beea777e577f4ee5bc670d7e793>`_
:author:
    Dan Stillman
:date:
    2018-03-01 18:07 (JST)

So we now have autoRecognizeFiles and autoRenameFiles.


------

Disable background full-text processing during tests

:commit:
    `6e4d6a2 <https://github.com/Juris-M/zotero/commit/6e4d6a2820e1d256ae8f343bba83c348418c470e>`_
:author:
    Dan Stillman
:date:
    2018-03-01 17:45 (JST)


------

Increase Travis test timeout to 15 seconds

:commit:
    `18d0e98 <https://github.com/Juris-M/zotero/commit/18d0e980d1d4acb1325006e533a2135fda9a451f>`_
:author:
    Dan Stillman
:date:
    2018-03-01 17:38 (JST)

Though it probably won't help, since I imagine most timeouts are hangs
caused by race conditions


------

Fix bug in 97661539dc

:commit:
    `7e290b2 <https://github.com/Juris-M/zotero/commit/7e290b262c661061f9d28e43ea353b0342a3c24b>`_
:author:
    Dan Stillman
:date:
    2018-03-01 17:04 (JST)


------

Merge new English string

:commit:
    `0d4fd26 <https://github.com/Juris-M/zotero/commit/0d4fd26be9a3f6e9ffdfef6a34d026695da6a409>`_
:author:
    Dan Stillman
:date:
    2018-03-01 16:03 (JST)


------

Avoid repeating line in Zotero.Fulltext.indexItems()

:commit:
    `00b2823 <https://github.com/Juris-M/zotero/commit/00b28236127f8785c82aae4904b1cc37392d5ee3>`_
:author:
    Dan Stillman
:date:
    2018-03-01 15:12 (JST)


------

Wait for DB transaction to end before indexing string

:commit:
    `b50b055 <https://github.com/Juris-M/zotero/commit/b50b055e442d0e24ec477e6d6f45034cd397c8cb>`_
:author:
    Dan Stillman
:date:
    2018-03-01 15:11 (JST)

This might help avoid timeouts during indexing.

Addresses #1284


------

Serialize attachment indexing

:commit:
    `1cfc901 <https://github.com/Juris-M/zotero/commit/1cfc90186f44f9325f2cf6b15894083f814373bd>`_
:author:
    Dan Stillman
:date:
    2018-03-01 15:07 (JST)

Add newly added attachments to a queue, start processing it after five
seconds have passed since the last attachment was added, and process
another every half second after that unless another is added.

This queue won't survive a restart, so the queue should really be in the
DB, but this should avoid problems when adding multiple attachments at
once.

Addresses #1284


------

Don't show Reindex button for files that aren't PDFs or text files

:commit:
    `26dcaad <https://github.com/Juris-M/zotero/commit/26dcaad76aa83bed541658b7ecf44a17adff5447>`_
:author:
    Dan Stillman
:date:
    2018-03-01 14:07 (JST)


------

Automatically retrieve metadata when saving PDFs

:commit:
    `9766153 <https://github.com/Juris-M/zotero/commit/97661539dce3f485a311fb9eb61626c684705d83>`_
:author:
    Dan Stillman
:date:
    2018-03-01 11:43 (JST)

Applies to dragging to the collections pane or the items pane, adding
via New Item menu, or saving via the connector server

If the renaming pref is enabled, the PDF is renamed after recognition.

Can be disabled in the preferences

Closes #917


------

Disable auto_focus for TinyMCE

:commit:
    `081793f <https://github.com/Juris-M/zotero/commit/081793f72f65a691484b95adf901b473170c8e1e>`_
:author:
    Dan Stillman
:date:
    2018-03-01 11:10 (JST)

TinyMCE triggers a focus on the window itself, which means that the
window steals focus when an attachment is created even if another Zotero
window is in front. Instead, do a manual focus in the external note
window, which is the one place I could find where we rely on it (though
there might be others).


------

Fix PDF recognition within collection (broken by f8b41c971c)

:commit:
    `3cc92fe <https://github.com/Juris-M/zotero/commit/3cc92fe1e9c7ed8acdac3d4b824e0eccb5da21ab>`_
:author:
    Dan Stillman
:date:
    2018-03-01 07:34 (JST)


------

Fix recognizer dialog with multiple tests

:commit:
    `f99038f <https://github.com/Juris-M/zotero/commit/f99038fd37a2baf14c474e282fe0015ad324f0b0>`_
:author:
    Dan Stillman
:date:
    2018-03-01 07:32 (JST)

Do cleanup on 'unload' rather than 'close' (which is limited to a click
on the close button and doesn't get called for win.close()) and clear
the queue after each test.


------

Fix auto-rename after PDF recognition (wrong pref in f8b41c971)

:commit:
    `757709c <https://github.com/Juris-M/zotero/commit/757709cf43cef7794659738b9dae50b936a6079f>`_
:author:
    Dan Stillman
:date:
    2018-03-01 06:27 (JST)


------

Add 'window' getter to CollectionTreeView and ItemTreeView

:commit:
    `da49f99 <https://github.com/Juris-M/zotero/commit/da49f9900f2f208b97de7ce53e080a63930a7437>`_
:author:
    Dan Stillman
:date:
    2018-03-01 06:23 (JST)


------

Fix scope of Zotero_RecognizePDF_Dialog

:commit:
    `aff2bef <https://github.com/Juris-M/zotero/commit/aff2bef3f5c7fc28a9f5e82b648dff1a21997561>`_
:author:
    Dan Stillman
:date:
    2018-03-01 06:19 (JST)

When Window is accessed from another scope (e.g., ItemTreeView), the
`let` somehow prevents Zotero_RecognizePDF_Dialog from showing up on the
Window object like all the other objects loaded via <script>.


------

Update renamed styles

:commit:
    `16f228b <https://github.com/Juris-M/zotero/commit/16f228b2a327ce6379849742d270c2032fc68e88>`_
:author:
    Dan Stillman
:date:
    2018-02-28 18:30 (JST)


------

Update citeproc-js to 1.1.190

:commit:
    `153ed72 <https://github.com/Juris-M/zotero/commit/153ed728cbac0cf43255191092a9e9ea96701267>`_
:author:
    Dan Stillman
:date:
    2018-02-28 18:29 (JST)


------

Update version

:commit:
    `7210653 <https://github.com/Juris-M/zotero/commit/7210653c0bfed3bf8fe4169e8f9760ba5dcb91c0>`_
:author:
    Dan Stillman
:date:
    2018-02-28 18:30 (JST)


------

Update locales from Transifex and merge new English strings

:commit:
    `e03ecfa <https://github.com/Juris-M/zotero/commit/e03ecfae98f98833f5cdf3809da658f90ef8633a>`_
:author:
    Dan Stillman
:date:
    2018-02-28 16:52 (JST)


------

Fix await->yield in f8b41c971

:commit:
    `1d367f0 <https://github.com/Juris-M/zotero/commit/1d367f0165f5a9d0bf5200865dbc8f0c079b0b5e>`_
:author:
    Dan Stillman
:date:
    2018-02-28 09:24 (JST)


------

Automatic attachment file renaming changes

:commit:
    `f8b41c9 <https://github.com/Juris-M/zotero/commit/f8b41c971c89ffb474df2103c4bf1a49389a5048>`_
:author:
    Dan Stillman
:date:
    2018-02-27 15:40 (JST)

Automatic renaming is now done for dragging of an external file onto an
item (as added in 7cb95f41) as well as dragging as a linked file,
dragging a non-native (not text or HTML) URL, "Attach Link to File…",
"Attach Stored Copy of File…", and "Retrieve Metadata for PDF". It only
applies if a single file is being added and if the parent item has no
non-HTML attachments. By default, the renaming only applies to PDFs, but
this can be changed with the renameAttachmentFiles.automatic.fileTypes
hidden pref.

A new General pref, "Automatically rename attachment files using parent
metadata", controls whether the renaming happens.

Files saved via web translators are renamed regardless of this pref,
because they would often be gibberish otherwise.

Closes #113


------

Replace some nsIWindowMediator getService() calls with Services.wm

:commit:
    `68879a0 <https://github.com/Juris-M/zotero/commit/68879a0ffcecdbde9d147f6f64a0b8be12da3667>`_
:author:
    Dan Stillman
:date:
    2018-02-28 04:13 (JST)


------

Don't use hidden browser to download images

:commit:
    `b0d9a9c <https://github.com/Juris-M/zotero/commit/b0d9a9c82eb9e102cff4e23afc2bd4071c4a60e6>`_
:author:
    Dan Stillman
:date:
    2018-02-28 06:04 (JST)


------

Add Zotero.File.rename() (extracted from Zotero.Item::renameAttachmentFile())

:commit:
    `f5b1ee4 <https://github.com/Juris-M/zotero/commit/f5b1ee44f351b724e9dfde8c9cfa6da66e387556>`_
:author:
    Dan Stillman
:date:
    2018-02-28 04:10 (JST)


------

Remove Fx54 test from Travis config

:commit:
    `b5cc0f9 <https://github.com/Juris-M/zotero/commit/b5cc0f918a025434101ad280db376aa2a69be62b>`_
:author:
    Dan Stillman
:date:
    2018-02-26 11:54 (JST)


------

Bump version

:commit:
    `935446a <https://github.com/Juris-M/zotero/commit/935446af45dce9e0908b5c3cff67378eb3981225>`_
:author:
    Frank Bennett
:date:
    2018-02-24 23:37 (JST)


------

Update styles

:commit:
    `1b4db7a <https://github.com/Juris-M/zotero/commit/1b4db7aa5317ad26b301d3ece723bd3ce959a8eb>`_
:author:
    Frank Bennett
:date:
    2018-02-24 23:36 (JST)


------

Bump version

:commit:
    `9afb9f2 <https://github.com/Juris-M/zotero/commit/9afb9f2dc4531e92c90ed5f689e83953e3d3e106>`_
:author:
    Frank Bennett
:date:
    2018-02-24 23:08 (JST)


------

Upgrade citeproc-js to 1.1.190

:commit:
    `307d506 <https://github.com/Juris-M/zotero/commit/307d50696429f473bc3b691fcc0d2834a12e5973>`_
:author:
    Frank Bennett
:date:
    2018-02-24 22:51 (JST)


------

Better handling of 403 for attachment metadata upload

:commit:
    `c0b63e5 <https://github.com/Juris-M/zotero/commit/c0b63e59287f5ccb0fdab6a8b70fad6b0e919dcb>`_
:author:
    Dan Stillman
:date:
    2018-02-24 07:59 (JST)

Check file-editing access for the group from the API before offering to
reset, update the filesEditable setting properly, and restart the sync
automatically after resetting.


------

Make Esc in PDF recognizer window close rather than minimize if done

:commit:
    `5ed10c6 <https://github.com/Juris-M/zotero/commit/5ed10c6ba21dc64f61af4711492e19249a6ab335>`_
:author:
    Dan Stillman
:date:
    2018-02-23 16:38 (JST)


------

Bump version

:commit:
    `5f12bc7 <https://github.com/Juris-M/zotero/commit/5f12bc7d8718ec0fc1f55c2daf7d487eda33c0f1>`_
:author:
    Frank Bennett
:date:
    2018-02-23 13:00 (JST)


------

Upgrade citeproc-js to 1.1.188

:commit:
    `a66ebfd <https://github.com/Juris-M/zotero/commit/a66ebfd306ad519292a137454cbd1ed624792a74>`_
:author:
    Frank Bennett
:date:
    2018-02-23 12:41 (JST)


------

Use separate subdomain for recognizer requests for now

:commit:
    `7c64666 <https://github.com/Juris-M/zotero/commit/7c64666167819c91597942f4457088b0c3c0566e>`_
:author:
    Dan Stillman
:date:
    2018-02-22 16:01 (JST)


------

Improved PDF recognizer and 1x PDF icons

:commit:
    `c28c8c8 <https://github.com/Juris-M/zotero/commit/c28c8c820b139315c175a88240477657b5082021>`_
:author:
    Dan Stillman
:date:
    2018-02-22 14:26 (JST)


------

Update locales from Transifex and merge new English strings

:commit:
    `3fbb463 <https://github.com/Juris-M/zotero/commit/3fbb4633a6edfc5cecf24f889a0eaf8e869087be>`_
:author:
    Dan Stillman
:date:
    2018-02-22 15:04 (JST)


------

Tweak recognizer strings

:commit:
    `9ce9502 <https://github.com/Juris-M/zotero/commit/9ce9502b76d5c5d8eabac208a751ca899ff2cad4>`_
:author:
    Dan Stillman
:date:
    2018-02-22 15:03 (JST)


------

Merge pull request #1420 from mrtcode/recognizer

:commit:
    `a8312ac <https://github.com/Juris-M/zotero/commit/a8312acfe0b06980443c1368bd04daf9572a4066>`_
:author:
    Dan Stillman
:date:
    2018-02-22 03:59 (JST)

New PDF recognizer

------

Throw actual error if file open fails in md5Async()

:commit:
    `9cb2b81 <https://github.com/Juris-M/zotero/commit/9cb2b8167dce47fb9749a8e92e55b6892e2a5dd6>`_
:author:
    Dan Stillman
:date:
    2018-02-22 00:21 (JST)


------

Fix version

:commit:
    `606fafb <https://github.com/Juris-M/zotero/commit/606fafb060ea7fa2a31b4a6185d762087230ea9b>`_
:author:
    Frank Bennett
:date:
    2018-02-21 22:48 (JST)


------

Updated journal article icon with fixed transparency

:commit:
    `164fea0 <https://github.com/Juris-M/zotero/commit/164fea0cec0f682b833fd59390a8b39d524362c5>`_
:author:
    Dan Stillman
:date:
    2018-02-21 02:19 (JST)


------

New PDF recognizer

:commit:
    `991a50d <https://github.com/Juris-M/zotero/commit/991a50d0903ce3391c2b658144875b22fa09a89f>`_
:author:
    Martynas Bagdonas
:date:
    2018-01-20 17:45 (JST)


------

Update citeproc-js to 1.1.186

:commit:
    `ce0dd5c <https://github.com/Juris-M/zotero/commit/ce0dd5cc5e8d38fcdbc8bf6174eb4101c3185426>`_
:author:
    Dan Stillman
:date:
    2018-02-19 21:23 (JST)


------

Update locales from Transifex and merge new English strings

:commit:
    `55b30dd <https://github.com/Juris-M/zotero/commit/55b30dd08ca9f790f89d1e7c689e38a323aca682>`_
:author:
    Dan Stillman
:date:
    2018-02-19 06:11 (JST)


------

Hide Accessed row in attachment box when provided

:commit:
    `7fed34f <https://github.com/Juris-M/zotero/commit/7fed34fa30754ed6157159f572d3c24b1084b963>`_
:author:
    Dan Stillman
:date:
    2018-02-19 05:24 (JST)

If, say, a link without an access date is created via an import


------

Show full URL in tooltip when hovering over attachment URL

:commit:
    `30b59eb <https://github.com/Juris-M/zotero/commit/30b59ebc952f7ad64f2827631b1c7d394089e5af>`_
:author:
    Dan Stillman
:date:
    2018-02-19 05:24 (JST)


------

Nicer, localized messages for various field-too-long sync errors

:commit:
    `2200bad <https://github.com/Juris-M/zotero/commit/2200badef240cebc25d031b4cada11b373e249ba>`_
:author:
    Dan Stillman
:date:
    2018-02-19 05:21 (JST)

Closes #351
Closes #1177


------

Update translators

:commit:
    `0267fef <https://github.com/Juris-M/zotero/commit/0267fefad40e428ef0b3136e6a67baf85325cb5d>`_
:author:
    Frank Bennett
:date:
    2018-02-19 00:17 (JST)


------

Bump version to m4

:commit:
    `89c9f8e <https://github.com/Juris-M/zotero/commit/89c9f8e84b0cc61af94f054a37b5774a64243bb3>`_
:author:
    Frank Bennett
:date:
    2018-02-18 23:06 (JST)


------

File debug reports with Uni server

:commit:
    `19ab2c4 <https://github.com/Juris-M/zotero/commit/19ab2c4ae50552fd1ae4a99525a316e63ef685fa>`_
:author:
    Frank Bennett
:date:
    2018-02-18 23:05 (JST)


------

Remove Report Errors menu item

:commit:
    `9d69599 <https://github.com/Juris-M/zotero/commit/9d6959921af986b7b4263e7910301a73449d0aa8>`_
:author:
    Frank Bennett
:date:
    2018-02-18 23:04 (JST)


------

Bump version to m3

:commit:
    `2603e8f <https://github.com/Juris-M/zotero/commit/2603e8fa87d8bf6844af26529b3daf5e660bdd20>`_
:author:
    Frank Bennett
:date:
    2018-02-18 11:50 (JST)


------

Preload potential abbrevs data in integration.js

:commit:
    `a6fc0bb <https://github.com/Juris-M/zotero/commit/a6fc0bb8657805a7db4fa7477714eb228a66dcf2>`_
:author:
    Frank Bennett
:date:
    2018-02-18 11:04 (JST)


------

Bump mini-version

:commit:
    `b0ab85f <https://github.com/Juris-M/zotero/commit/b0ab85fe870f3bf51bee5e1764978eeefe859884>`_
:author:
    Frank Bennett
:date:
    2018-02-17 22:44 (JST)


------

Extend timeout in test fixture

:commit:
    `f4fd12b <https://github.com/Juris-M/zotero/commit/f4fd12bd02a0a5e5fd6d81b500335a290106dcbc>`_
:author:
    Frank Bennett
:date:
    2018-02-17 22:24 (JST)


------

Fix embedded items in quickFormat

:commit:
    `5a8fa86 <https://github.com/Juris-M/zotero/commit/5a8fa86e2edcd80dbedd9c7c8794d4d54b0216ce>`_
:author:
    Frank Bennett
:date:
    2018-02-17 19:35 (JST)


------

Point at Juris-M get-started page

:commit:
    `8c9b931 <https://github.com/Juris-M/zotero/commit/8c9b931a7efca9d9871b383d0cc6caf79a22029c>`_
:author:
    Frank Bennett
:date:
    2018-02-17 19:35 (JST)


------

Hard-code strings and tweak styling for disabled word processor plugins

:commit:
    `63f206c <https://github.com/Juris-M/zotero/commit/63f206c80e05210ee748e42cf5bd85e8e718f84b>`_
:author:
    Dan Stillman
:date:
    2018-02-16 20:33 (JST)

This will hopefully be both temporary and rare, so let's not bother
localizing htem.


------

Add a button in preferences to enable word plugins if some are disabled

:commit:
    `628bc53 <https://github.com/Juris-M/zotero/commit/628bc536a0fc47a429b300a35f6b0fbb3638b3cd>`_
:author:
    Adomas Venčkauskas
:date:
    2018-02-16 18:37 (JST)


------

Fix right/left arrow char move in name fields

:commit:
    `e32c64c <https://github.com/Juris-M/zotero/commit/e32c64c13b0d2b1ecd9395ae0858e0c44c6859e7>`_
:author:
    Frank Bennett
:date:
    2018-02-16 12:56 (JST)


------

Improves citation processing speed

:commit:
    `00e52ae <https://github.com/Juris-M/zotero/commit/00e52ae62b2e84d7fa770ca2f61d1b3b36f156bf>`_
:author:
    Adomas Venčkauskas
:date:
    2018-02-15 19:26 (JST)

Prevents from unnecesarily sending the same citation to citeproc
multiple times


------

Automatically set Referer for external attachment downloads

:commit:
    `bb92572 <https://github.com/Juris-M/zotero/commit/bb925723fdc8253fff8ab400b5a27cb4906bcf51>`_
:author:
    Dan Stillman
:date:
    2018-02-15 15:58 (JST)

Rather than requiring translators to explicitly set a referrer, as
proposed in #772 and #1375, this simply sets it to the URL where the
save button was triggered. This fixes the Project Euclid example
in #772. It's possible it won't fix all cases, since the translator might
build the URL manually or via an intermediate page, but hopefully it
will fix the majority of cases.

I guess there's a possibility that this would break something that
currently works, but it's hard to imagine a site would block based on
the wrong referrer from the right site and not block on no referrer.

Unlike #1375, this doesn't bother with the referrer for native downloads
(e.g., snapshots or images). The former probably don't need it, and the
latter should probably be switched to use `saveURI()` anyway.

This might also fix zotero/translators#523 (SSRN) if the translator
allowed it.

Closes #1375


------

Always show automatic updates option by default

:commit:
    `10f9fc9 <https://github.com/Juris-M/zotero/commit/10f9fc97b98f39c4c25015b0ed5eb1c099ddb6cb>`_
:author:
    Frank Bennett
:date:
    2018-02-15 16:06 (JST)


------

Extend timeout. Sync tests still fail locally on Mac, OK under Linux.

:commit:
    `0ca0c9b <https://github.com/Juris-M/zotero/commit/0ca0c9b063a962f915b25980deb152d335ddffcb>`_
:author:
    Frank Bennett
:date:
    2018-02-15 10:26 (JST)


------

Update citeproc-js to 1.1.184

:commit:
    `f1b4f8a <https://github.com/Juris-M/zotero/commit/f1b4f8a0d40532aa60caf305dd43838c1c7f1555>`_
:author:
    Frank Bennett
:date:
    2018-02-15 07:12 (JST)


------

Provide a URL for Juris-M repo services

:commit:
    `f9f48c5 <https://github.com/Juris-M/zotero/commit/f9f48c50315ae5054bbdf14032080b821d2d91f0>`_
:author:
    Frank Bennett
:date:
    2018-02-15 06:50 (JST)


------

Remember suppress-trailing-punctuation settings

:commit:
    `6e0dbde <https://github.com/Juris-M/zotero/commit/6e0dbde653dd37759971649cb58820a7a4ef327b>`_
:author:
    Frank Bennett
:date:
    2018-02-15 06:49 (JST)


------

New tag selector colors.

:commit:
    `081f6bc <https://github.com/Juris-M/zotero/commit/081f6bc77d775d97fbbb2f456628c99072fcb27d>`_
:author:
    Sean Takats
:date:
    2018-02-14 21:59 (JST)


------

Adds 10 more HiDPI itemType icons.

:commit:
    `d0aaa71 <https://github.com/Juris-M/zotero/commit/d0aaa7165ce74d0cb05b3b731d2ac97fe7877137>`_
:author:
    Sean Takats
:date:
    2018-02-14 19:56 (JST)


------

Update PDF tools version and fix fulltext test

:commit:
    `d810dea <https://github.com/Juris-M/zotero/commit/d810deaa9c33498d56bbacfe9ef0deb27a0cfdf2>`_
:author:
    Martynas Bagdonas
:date:
    2018-02-14 17:43 (JST)


------

Probably adds HiDPI/Retina icon for thesis.

:commit:
    `a8c19b4 <https://github.com/Juris-M/zotero/commit/a8c19b4d8b6f2b694ad1d5a67d6c663d23d0bc43>`_
:author:
    Sean Takats
:date:
    2018-02-14 17:58 (JST)


------

Fix loss-of-title-of-type-change bug

:commit:
    `2d4624b <https://github.com/Juris-M/zotero/commit/2d4624b19b8188321649e4594ea238e978a4f214>`_
:author:
    Frank Bennett
:date:
    2018-02-14 15:52 (JST)


------

Simplify error logging in translator architecture

:commit:
    `942b8b9 <https://github.com/Juris-M/zotero/commit/942b8b91f338f754ad047002530b2e93be0c357c>`_
:author:
    Dan Stillman
:date:
    2018-02-14 09:22 (JST)

Hopefully the previous stuff is no longer necessary


------

Make no-results error for search translation available as a property

:commit:
    `542584e <https://github.com/Juris-M/zotero/commit/542584eed30f4859996b8d674dd53955851791eb>`_
:author:
    Dan Stillman
:date:
    2018-02-14 09:05 (JST)

This allows translation-server to return a specific error code when
there were no results.

Also clarify the debug logging for search translation.


------

Fix hang for invalid DOI in translation-server /search

:commit:
    `4fdfdd3 <https://github.com/Juris-M/zotero/commit/4fdfdd341b2d1af577b6bc2ea1bc7273febfd9d5>`_
:author:
    Dan Stillman
:date:
    2018-02-14 08:26 (JST)


------

Return "Not Implemented" from server for 501, not "Method Not Implemented"

:commit:
    `a937c99 <https://github.com/Juris-M/zotero/commit/a937c99f093728aa3147dcca499d4356a5d0d234>`_
:author:
    Dan Stillman
:date:
    2018-02-14 08:25 (JST)


------

Fix startup error in new PDF code if application directory is read-only

:commit:
    `aedd361 <https://github.com/Juris-M/zotero/commit/aedd36156946970abe0b1638aafe70e8a20d185f>`_
:author:
    Dan Stillman
:date:
    2018-02-12 08:55 (JST)

In Firefox 52, `FileUtils.getFile()` tries to create the path to the
file even if the path array is empty. (In later versions (maybe in 54,
which we're using on macOS) it only does this if more than one path
component is provided.) We only need the special directory anyway, so we
can just use `getDir()`.


------

Fix field language setter

:commit:
    `44a86f5 <https://github.com/Juris-M/zotero/commit/44a86f577faea253b52bd0e7d5104233617432c9>`_
:author:
    Frank Bennett
:date:
    2018-02-13 12:06 (JST)


------

Fix node ID

:commit:
    `e04f62b <https://github.com/Juris-M/zotero/commit/e04f62b6ef5b53e2507806c7fa965ce5d5e353d5>`_
:author:
    Frank Bennett
:date:
    2018-02-13 12:05 (JST)


------

Merge branch 'master' of https://github.com/zotero/zotero into jm-5.0-dev

:commit:
    `c671306 <https://github.com/Juris-M/zotero/commit/c6713068076acf10289cf4f47acd167de9e8ed1f>`_
:author:
    Frank Bennett
:date:
    2018-02-12 23:33 (JST)


------

Expose style in citation plugin, for Abbrevs Filter

:commit:
    `13994c1 <https://github.com/Juris-M/zotero/commit/13994c1cabf243bb50630b6f2ea800709435ad47>`_
:author:
    Frank Bennett
:date:
    2018-02-12 22:25 (JST)


------

Fix citeproc errors upon first interaction with the doc

:commit:
    `e72da41 <https://github.com/Juris-M/zotero/commit/e72da417c0d71185c4b4505227ec99f122909445>`_
:author:
    Adomas Venčkauskas
:date:
    2018-02-12 18:35 (JST)


------

Fix noteIndex not being passed to citeproc. Closes #1439

:commit:
    `8e2c479 <https://github.com/Juris-M/zotero/commit/8e2c47933abd01925153ee31dc0e92317a48730e>`_
:author:
    Adomas Venčkauskas
:date:
    2018-02-12 17:58 (JST)


------

Fix jurisdiction and court field UI

:commit:
    `e23af88 <https://github.com/Juris-M/zotero/commit/e23af88b3c201cce501ada934b91cb45a7ca2cfe>`_
:author:
    Frank Bennett
:date:
    2018-02-12 17:56 (JST)


------

Add a pref to always show doc integration automatic updates option

:commit:
    `966c293 <https://github.com/Juris-M/zotero/commit/966c293deab68b68c7af09f462ab56b4a06e32dd>`_
:author:
    Adomas Venčkauskas
:date:
    2018-02-12 17:47 (JST)


------

Update translators

:commit:
    `e3987ea <https://github.com/Juris-M/zotero/commit/e3987ea3084b294cbc5ff20b807cb62a608bb553>`_
:author:
    Frank Bennett
:date:
    2018-02-12 09:04 (JST)


------

Remove redundant code block

:commit:
    `eb64b08 <https://github.com/Juris-M/zotero/commit/eb64b082c7509ad88aa8064187180b75879d4774>`_
:author:
    Frank Bennett
:date:
    2018-02-12 08:18 (JST)


------

Fix code misstep resulting from upstream merge

:commit:
    `68f4d0c <https://github.com/Juris-M/zotero/commit/68f4d0ce13014000457497f991d7a43e59d99a61>`_
:author:
    Frank Bennett
:date:
    2018-02-12 08:17 (JST)


------

Fix "channel is undefined" for invalid HTTP response during WebDAV sync

:commit:
    `f04a8c3 <https://github.com/Juris-M/zotero/commit/f04a8c37363d9a40c933d7f9d1f82fc398257c40>`_
:author:
    Dan Stillman
:date:
    2018-02-11 15:03 (JST)

Follow-up to 4bbae6e17

We're now using Zotero.HTTP.request(), which does its own checking for
security errors, so there's no need to do WebDAV-specific checks (though
we could consider checking for Zotero.HTTP.SecurityError and showing
more specific messages, since a self-signed certificate is more likely
in the case of WebDAV).


------

Better handling of invalid HTTP responses

:commit:
    `4bbae6e <https://github.com/Juris-M/zotero/commit/4bbae6e17a8b93d0f079ed22025c595d5838be06>`_
:author:
    Dan Stillman
:date:
    2018-02-11 12:14 (JST)

If a server returns an invalid HTTP response (e.g., Content-Encoding:
gzip with a plaintext body, a.k.a. NS_ERROR_INVALID_CONTENT_ENCODING)
but we can still parse a 4xx or 5xx HTTP response code, use that for the
XHR status, since it might be enough for what we need to do (e.g.,
verify a 404 from a WebDAV server). This fixes a current problem with
Box [1].

Also fix a "msg is not defined" error when the XHR status is 0 but the
SSL connection is fine and include the channel and response status on
the UnexpectedStatusException object (though both of these would now
only happen on an invalid 2xx response, when the XHR status would remain
as 0).

[1] https://forums.zotero.org/discussion/comment/301014/#Comment_301014


------

Use current Zotero source version number

:commit:
    `2d8918a <https://github.com/Juris-M/zotero/commit/2d8918acf33f5d8f8191d6e626733656218651ed>`_
:author:
    Frank Bennett
:date:
    2018-02-11 10:44 (JST)


------

Update citeproc-js to 1.0.183

:commit:
    `2c6ff8c <https://github.com/Juris-M/zotero/commit/2c6ff8c2b3e161ad1db9371d1cb300ce7d723c7c>`_
:author:
    Frank Bennett
:date:
    2018-02-11 10:43 (JST)


------

Update translators

:commit:
    `840b30e <https://github.com/Juris-M/zotero/commit/840b30e45b68d3aa1677d99172682455e949d68c>`_
:author:
    Frank Bennett
:date:
    2018-02-11 10:08 (JST)


------

Locale changes from upstream

:commit:
    `f4b5a2f <https://github.com/Juris-M/zotero/commit/f4b5a2ffa9966acea9f1dabb0c522b849c9a3d6b>`_
:author:
    Frank Bennett
:date:
    2018-02-10 23:27 (JST)


------

Pull changes from upstream master

:commit:
    `ac472f5 <https://github.com/Juris-M/zotero/commit/ac472f5834f0bfebe177b5a7e335e954d3e48179>`_
:author:
    Frank Bennett
:date:
    2018-02-10 23:24 (JST)


------

Require Administrator users on Windows Cygwin, and use symlinks always

:commit:
    `0adac3c <https://github.com/Juris-M/zotero/commit/0adac3cae4fa2aea7c84f4f743243de2f5a17352>`_
:author:
    Frank Bennett
:date:
    2018-02-10 21:48 (JST)


------

Add is-admin to node project package

:commit:
    `b8443fa <https://github.com/Juris-M/zotero/commit/b8443fad49301cecc4c3763d554c660a952777ad>`_
:author:
    Frank Bennett
:date:
    2018-02-10 21:42 (JST)


------

Fix detection of WebDAV settings changes when clicking Verify Server

:commit:
    `1aade0f <https://github.com/Juris-M/zotero/commit/1aade0f268c180c625bf8e5605850b728d55e160>`_
:author:
    Dan Stillman
:date:
    2018-02-10 21:26 (JST)

onchange() weirdly isn't called when clicking off the textbox to a button

Fixes #1291


------

Adjust version

:commit:
    `56d6462 <https://github.com/Juris-M/zotero/commit/56d646247ab05da00c25b789809087ebb50b015f>`_
:author:
    Frank Bennett
:date:
    2018-02-10 16:47 (JST)


------

Fix citation text editor (regression 09ceaa953)

:commit:
    `9ed1792 <https://github.com/Juris-M/zotero/commit/9ed1792d9e939660c22156b0c06cdf61aa8112f8>`_
:author:
    Adomas Venčkauskas
:date:
    2018-02-09 22:57 (JST)


------

Show "More Information…" button on WebDAV SSL cert error

:commit:
    `e9a3f9b <https://github.com/Juris-M/zotero/commit/e9a3f9b0e0e3d20e728cab5d140114969774e15c>`_
:author:
    Dan Stillman
:date:
    2018-02-09 16:35 (JST)

(Though the button takes you to to
https://www.zotero.org/support/kb/ssl_certificate_error rather than
https://www.zotero.org/support/kb/incomplete_cert_chain, since the error
comes from Zotero.HTTP.)


------

Fix "msg is not defined" on HTTP connection failure

:commit:
    `84d8bb4 <https://github.com/Juris-M/zotero/commit/84d8bb40201affc1f57dab0eb0d5bb5a418c0001>`_
:author:
    Dan Stillman
:date:
    2018-02-09 16:34 (JST)


------

Update README.md

:commit:
    `552662a <https://github.com/Juris-M/zotero/commit/552662a42556e7b9c3ad690a9be3a6365730205f>`_
:author:
    Frank Bennett
:date:
    2018-02-09 14:29 (JST)


------

Provide a mechanism for customizing firefox path for use in tests

:commit:
    `9916e0e <https://github.com/Juris-M/zotero/commit/9916e0e9ccf1534e9b6e24fe9b336d6a14391964>`_
:author:
    Frank Bennett
:date:
    2018-02-09 11:18 (JST)


------

Delete old build-hack file cruft

:commit:
    `279d575 <https://github.com/Juris-M/zotero/commit/279d575223ffa699afae3ab81755500127236cfa>`_
:author:
    Frank Bennett
:date:
    2018-02-09 11:05 (JST)


------

Update locales from Transifex and merge new English strings

:commit:
    `ad53b33 <https://github.com/Juris-M/zotero/commit/ad53b3311e946481b7d2766134fdf790052677b0>`_
:author:
    Dan Stillman
:date:
    2018-02-08 17:23 (JST)


------

Wait for any DB transactions to finish before starting sync

:commit:
    `bd7e1b2 <https://github.com/Juris-M/zotero/commit/bd7e1b222dd690904cf2d9260f8968d5a4e6016f>`_
:author:
    Dan Stillman
:date:
    2018-02-08 17:06 (JST)

purgeDataObjects(), which runs at the beginning of the sync process,
uses transactions, and those can fail after the default wait timeout if
there's another active transaction. Instead, check explicitly for
another transaction and, if there is one, display a nice message and
wait for it to finish. This isn't foolproof, but it should reduce the
frequency of "operation timed out" sync errors. (Avoiding all long
transactions would be a better solution.)


------

Fix "Can't queue event outside of a transaction"

:commit:
    `3f6ecc0 <https://github.com/Juris-M/zotero/commit/3f6ecc00212a652465867cfb795d1e21dea8e91e>`_
:author:
    Dan Stillman
:date:
    2018-02-08 16:07 (JST)

If a transaction took over 30 seconds and another transaction timed out
waiting for it, the second transaction would reset the notifier queue,
but if the first transaction then tried to queue an event, it would fail
with this error and roll back. (It would be nice to figure out why
transactions are taking over 30 seconds, though.)


------

Add `sessionID` option to translate() that gets passed to the ItemSaver

:commit:
    `80cfd60 <https://github.com/Juris-M/zotero/commit/80cfd609ea3ecfda9fa8024abe3ff6edc63f202c>`_
:author:
    Dan Stillman
:date:
    2018-02-06 15:40 (JST)

This will allow the connector to send a sessionID with a save request.


------

Support for connector-based save target selection

:commit:
    `c8cf9b9 <https://github.com/Juris-M/zotero/commit/c8cf9b9e6fed4811c88c072845728a71f77a7934>`_
:author:
    Dan Stillman
:date:
    2018-02-06 15:40 (JST)

- Updates /saveItems and /saveSnapshot to take a sessionID
- Provides a list of editable collections in the current library
- Adds an /updateSession method that takes a sessionID and updates the
  collection and tags of any items saved via that operation (and changes
  the currently selected collection)

Cross-library changes are not yet supported


------

Remove fail() override in Mocha

:commit:
    `4731b8f <https://github.com/Juris-M/zotero/commit/4731b8f905ee33bf56bf29fc8a108404e9419c5c>`_
:author:
    Dan Stillman
:date:
    2018-02-06 15:25 (JST)

I'm not sure what this was for, but at least with an async test function
it seems to be causing spurious "the string 'x' was thrown, throw an
Error :)" messages that hide the real error.


------

Reset PDF tools path for tests in resetDB()

:commit:
    `45ddf98 <https://github.com/Juris-M/zotero/commit/45ddf9827ce9658576fbf4d30ac4193da421629b>`_
:author:
    Dan Stillman
:date:
    2018-02-06 13:09 (JST)

And include path on error when running PDF tool


------

Use rowid to clean invalid entries from translatorCache

:commit:
    `06fb74a <https://github.com/Juris-M/zotero/commit/06fb74aafda57971f2c36a96c5553cf814bd9da9>`_
:author:
    Dan Stillman
:date:
    2018-02-07 13:45 (JST)

Since in truly weird cases [1] fileName might not exist

https://forums.zotero.org/discussion/comment/300558/#Comment_300558


------

Amend comment regarding citationsByIndex keys sort order

:commit:
    `46854b6 <https://github.com/Juris-M/zotero/commit/46854b6b238d0e9d3df28e188c40aa9928abc0db>`_
:author:
    Adomas Venčkauskas
:date:
    2018-02-06 23:08 (JST)


------

Fix field type changes triggering citation modified prompts

:commit:
    `4add3ec <https://github.com/Juris-M/zotero/commit/4add3ec44c8c7b3868cb8ed2585d4de2e8be31cf>`_
:author:
    Adomas Venčkauskas
:date:
    2018-02-06 22:19 (JST)


------

Fix some more citation update bugs

:commit:
    `09ceaa9 <https://github.com/Juris-M/zotero/commit/09ceaa953bcfc3d9aef829ae360c95d2b668c083>`_
:author:
    Adomas Venčkauskas
:date:
    2018-02-06 22:09 (JST)


------

Remove LibreOffice specific setText() calls (addressed within plugin)

:commit:
    `edc18a4 <https://github.com/Juris-M/zotero/commit/edc18a4fe42917e7c023cd4eb96b336e070dd693>`_
:author:
    Adomas Venčkauskas
:date:
    2018-02-02 23:00 (JST)


------

Update submodules

:commit:
    `d50adec <https://github.com/Juris-M/zotero/commit/d50adecec9fb4c818c0220548dcd06a5e2cb85dd>`_
:author:
    Frank Bennett
:date:
    2018-02-05 20:40 (JST)


------

Use the right port number in test

:commit:
    `86e21c2 <https://github.com/Juris-M/zotero/commit/86e21c286eabdb761f1ffd5ce4d18637e7dbe851>`_
:author:
    Frank Bennett
:date:
    2018-02-05 20:12 (JST)


------

Use later version of chai.js

:commit:
    `5b3b9b7 <https://github.com/Juris-M/zotero/commit/5b3b9b7749feed78aac0b870d46634c0b87a38b3>`_
:author:
    Frank Bennett
:date:
    2018-02-05 20:12 (JST)


------

Be fussy about math symbolx in PDF text dump

:commit:
    `778d8b6 <https://github.com/Juris-M/zotero/commit/778d8b6474af7552cc4f847a2cb512272921211e>`_
:author:
    Frank Bennett
:date:
    2018-02-05 16:36 (JST)


------

Adapt test to Juris-M

:commit:
    `6d80075 <https://github.com/Juris-M/zotero/commit/6d80075006f4188dd73622e98913b174c1cd41cb>`_
:author:
    Frank Bennett
:date:
    2018-02-05 11:13 (JST)


------

Fix JM coding error

:commit:
    `5442b91 <https://github.com/Juris-M/zotero/commit/5442b91e80998e8bdc791e20b77635e6c0861c20>`_
:author:
    Frank Bennett
:date:
    2018-02-05 10:26 (JST)


------

Fix JM syntax error

:commit:
    `beccfad <https://github.com/Juris-M/zotero/commit/beccfad8f9f6819a9ca3b0cef2ee8638e81709fe>`_
:author:
    Frank Bennett
:date:
    2018-02-05 10:25 (JST)


------

Locales from upstream master

:commit:
    `228d1c7 <https://github.com/Juris-M/zotero/commit/228d1c7a83e8e06afc40b0229e4f5757c32843b0>`_
:author:
    Frank Bennett
:date:
    2018-02-05 09:51 (JST)


------

Merge branch 'master' of https://github.com/zotero/zotero into jm-5-dev

:commit:
    `f274989 <https://github.com/Juris-M/zotero/commit/f2749892998ffbebcc55a63b372b4542e78e59b4>`_
:author:
    Frank Bennett
:date:
    2018-02-05 08:17 (JST)


------

Allow dragging parent items to collection if children are selected

:commit:
    `38411fb <https://github.com/Juris-M/zotero/commit/38411fb56cca3680470b02b760cf5d64e259ecd1>`_
:author:
    Dan Stillman
:date:
    2018-02-03 18:09 (JST)

This is a simplified version of the fix from #872. Unlike the proposal
in #36, this doesn't require all child items to be selected, since in a
search some children might be grayed out. If the child of an unselected
parent item is included, the drag isn't allowed.

Closes #36


------

Allow `parentItemID` as a `createDataObject()` parameter in tests

:commit:
    `ad216bc <https://github.com/Juris-M/zotero/commit/ad216bcf97327800c48c9c433dcf5acf83ba821e>`_
:author:
    Dan Stillman
:date:
    2018-02-03 18:14 (JST)

Not just `parentID`


------

Fix citation preview citeproc error. Closes #1430

:commit:
    `948a4dd <https://github.com/Juris-M/zotero/commit/948a4dda64e995398afee7e0796c03f0db332ff9>`_
:author:
    Adomas Venčkauskas
:date:
    2018-01-31 21:13 (JST)


------

Fix slow display of citation dialog on first interaction with doc

:commit:
    `97a045f <https://github.com/Juris-M/zotero/commit/97a045fe0f0611ebe4ad001b31d82fd02a2d6169>`_
:author:
    Adomas Venčkauskas
:date:
    2018-01-31 19:59 (JST)


------

Use temp directory for recognizePDFCache.txt

:commit:
    `b7a24a5 <https://github.com/Juris-M/zotero/commit/b7a24a58fb45cb451e7ffc4b17f5016dde692208>`_
:author:
    Dan Stillman
:date:
    2018-01-31 19:34 (JST)


------

Fix "Retrieve Metadata for PDF" with bundled PDF tools

:commit:
    `31f0f0d <https://github.com/Juris-M/zotero/commit/31f0f0d21001deac3b36705bbeb53d38b293cffb>`_
:author:
    Dan Stillman
:date:
    2018-01-31 19:34 (JST)


------

Reduce minimum width of Zotero pane to 670px

:commit:
    `2d43518 <https://github.com/Juris-M/zotero/commit/2d43518ef29ef70c8527e8d0fb795040e42efe89>`_
:author:
    Dan Stillman
:date:
    2018-01-31 09:12 (JST)

We could potentially do more, but this is the narrowest the pane can be
with the left pane collapsed without starting to hide toolbar icons, so
let's try this. (This will still hide the sync icon if the left pane
isn't collapsed.)

Closes #675
Closes #1183


------

Don't show Title in column picker, because hiding it doesn't make sense

:commit:
    `e4a3996 <https://github.com/Juris-M/zotero/commit/e4a399671abde33eb0ebde9af04e0d153459d53e>`_
:author:
    Dan Stillman
:date:
    2018-01-31 09:11 (JST)


------

Update locales from Transifex

:commit:
    `2219bd9 <https://github.com/Juris-M/zotero/commit/2219bd986167e29bd98fe8decd0954c026efa12d>`_
:author:
    Dan Stillman
:date:
    2018-01-30 07:38 (JST)


------

Update submodules

:commit:
    `eca9d82 <https://github.com/Juris-M/zotero/commit/eca9d82aa2db4aec4c9e66f136aed91769257148>`_
:author:
    Dan Stillman
:date:
    2018-01-30 07:22 (JST)


------

Update citeproc-js to 1.1.183

:commit:
    `4a41f21 <https://github.com/Juris-M/zotero/commit/4a41f219d81540a652bc4317049f3f25e9a3fdcb>`_
:author:
    Dan Stillman
:date:
    2018-01-30 07:21 (JST)


------

Fix test breakage from d67c6542451

:commit:
    `5b46735 <https://github.com/Juris-M/zotero/commit/5b467352046b988649984e6a6eb9c0499ef71688>`_
:author:
    Dan Stillman
:date:
    2018-01-26 18:23 (JST)


------

Prompt to reset local group files on 403 for file attachment upload

:commit:
    `c5fa130 <https://github.com/Juris-M/zotero/commit/c5fa1303e39e720c20a901d8263a148d518c9a85>`_
:author:
    Dan Stillman
:date:
    2018-01-26 17:36 (JST)

And reset modified file attachments when resetting files


------

Add `version` option to `toResponseJSON()`

:commit:
    `d67c654 <https://github.com/Juris-M/zotero/commit/d67c6542451cf6db3dbc200a417002841d924ccf>`_
:author:
    Dan Stillman
:date:
    2018-01-26 17:33 (JST)


------

Warn about version 0 when saving to sync cache

:commit:
    `3390f24 <https://github.com/Juris-M/zotero/commit/3390f2405b6cce49c1fde2e08ad94e5f9a343f53>`_
:author:
    Dan Stillman
:date:
    2018-01-26 17:32 (JST)

This should be an error, because the API will never return 0, but most
tests don't currently set the version properly in the response JSON.


------

Fix integration test errors. Closes #1426

:commit:
    `d857a81 <https://github.com/Juris-M/zotero/commit/d857a813b92a7ee3cee7ba660ea98ffc1ea71c92>`_
:author:
    Adomas Venčkauskas
:date:
    2018-01-25 19:48 (JST)


------

Fixes index is not defined error. Closes #1422

:commit:
    `fe4b757 <https://github.com/Juris-M/zotero/commit/fe4b75758d1f9cd3b79670a53fa9823d027a338e>`_
:author:
    Adomas Venčkauskas
:date:
    2018-01-25 19:39 (JST)


------

Fix slow citation dialog initialization

:commit:
    `2523bca <https://github.com/Juris-M/zotero/commit/2523bca65914af00cbdbfdf65dac4f18aa3c4e01>`_
:author:
    Adomas Venčkauskas
:date:
    2018-01-24 23:03 (JST)

Report: https://forums.zotero.org/discussion/69929/beta-delay-citation-feature


------

Fix footnote edit crashing in MacWord

:commit:
    `8544618 <https://github.com/Juris-M/zotero/commit/8544618445d7cdbfe4be80511e4fb026edff75a6>`_
:author:
    Adomas Venčkauskas
:date:
    2018-01-24 23:00 (JST)


------

Checkin to test Travis

:commit:
    `ed95699 <https://github.com/Juris-M/zotero/commit/ed9569997f0cee350535fd90807e2de85ecfe9d0>`_
:author:
    Frank Bennett
:date:
    2018-01-24 22:14 (JST)


------

Enable 2x PDF icon

:commit:
    `0bb0912 <https://github.com/Juris-M/zotero/commit/0bb0912a7bc062298ec0b4fd4a920a368065bcdc>`_
:author:
    Dan Stillman
:date:
    2018-01-24 20:15 (JST)


------

Fix an integration error when bibl present without citations

:commit:
    `d41c8d6 <https://github.com/Juris-M/zotero/commit/d41c8d648916831042da4114477e4de349df6d30>`_
:author:
    Adomas Venčkauskas
:date:
    2018-01-22 20:26 (JST)


------

Fix 'id must be a positive integer' integration error

:commit:
    `553d2b0 <https://github.com/Juris-M/zotero/commit/553d2b00d86f852e051a9d76474993cd0575f7cd>`_
:author:
    Adomas Venčkauskas
:date:
    2018-01-22 20:25 (JST)

Report: https://forums.zotero.org/discussion/comment/298804#Comment_298804


------

Run deploys from Travis on *-hotfix branches

:commit:
    `a1b6f07 <https://github.com/Juris-M/zotero/commit/a1b6f072c1eae63926a239bd4dfc9dfa4f1c81b8>`_
:author:
    Dan Stillman
:date:
    2018-01-20 13:46 (JST)


------

Fix startup hang if note is null in database

:commit:
    `2194dff <https://github.com/Juris-M/zotero/commit/2194dff7a49f268f66af9a9db525629087ff5215>`_
:author:
    Dan Stillman
:date:
    2018-01-20 02:57 (JST)


------

Merge pull request #1417 from mrtcode/pdftools-test

:commit:
    `ca9a7c6 <https://github.com/Juris-M/zotero/commit/ca9a7c685eae3df9aa1769c8511ea6402b564cae>`_
:author:
    Dan Stillman
:date:
    2018-01-19 09:24 (JST)

Fix PDF tools usage in tests


------

Cache PDF tools in the source directory between test runs

:commit:
    `37eb597 <https://github.com/Juris-M/zotero/commit/37eb597ee86fe64d3c4571227108799e7e39351a>`_
:author:
    Dan Stillman
:date:
    2018-01-19 09:20 (JST)

This avoids having to download a 13 MB file on every test run.


------

Fix Zotero.Fulltext.setItemContent() test

:commit:
    `db2ddfd <https://github.com/Juris-M/zotero/commit/db2ddfd49321a5b7bec1a46c0fcf694819ec18ea>`_
:author:
    Dan Stillman
:date:
    2018-01-19 08:53 (JST)


------

Fix Zotero.Fulltext tests

:commit:
    `723b4d3 <https://github.com/Juris-M/zotero/commit/723b4d32e5eb5116d3b81f38eaab73870789e5a0>`_
:author:
    Martynas Bagdonas
:date:
    2018-01-18 23:48 (JST)


------

Fix PDF tools usage in tests

:commit:
    `5815088 <https://github.com/Juris-M/zotero/commit/58150885866c1afba9e3c5519306228f945b543b>`_
:author:
    Martynas Bagdonas
:date:
    2018-01-18 19:23 (JST)


------

Merge pull request #1415 from mrtcode/pdftools

:commit:
    `5d39221 <https://github.com/Juris-M/zotero/commit/5d39221afea1b3848b519a58bacae944c0914efa>`_
:author:
    Dan Stillman
:date:
    2018-01-18 14:20 (JST)

Bundled PDF tools

------

Deleted strings that are no longer in use

:commit:
    `77ffc6a <https://github.com/Juris-M/zotero/commit/77ffc6ad5d99d5e51c5d2a53643f2d4d71ffb453>`_
:author:
    Martynas Bagdonas
:date:
    2018-01-16 02:52 (JST)


------

Use the bundled PDF tools

:commit:
    `0d5ea85 <https://github.com/Juris-M/zotero/commit/0d5ea8520a2de05f9443e11f64a2776802ff6d63>`_
:author:
    Martynas Bagdonas
:date:
    2018-01-16 02:09 (JST)


------

Update translators

:commit:
    `e3dee4d <https://github.com/Juris-M/zotero/commit/e3dee4dee74fc8ca0da8950ca609b8430bd7fe1c>`_
:author:
    Dan Stillman
:date:
    2018-01-17 15:15 (JST)


------

Update version

:commit:
    `9a9a4bf <https://github.com/Juris-M/zotero/commit/9a9a4bf9e9e9a8cd85e51c3e8df7eac1a3f9cb76>`_
:author:
    Dan Stillman
:date:
    2018-01-17 15:14 (JST)


------

Update locales from Transifex and merge new English strings

:commit:
    `d662a82 <https://github.com/Juris-M/zotero/commit/d662a828d1bc95b56a429ab5ef6df107b8530f2b>`_
:author:
    Dan Stillman
:date:
    2018-01-17 03:25 (JST)


------

Add missing spinners from 87cf336e2

:commit:
    `48757f0 <https://github.com/Juris-M/zotero/commit/48757f08ff1f5f88d85ddd17c7a2741e47327c8e>`_
:author:
    Dan Stillman
:date:
    2018-01-17 02:52 (JST)


------

Tweak padding in doc prefs

:commit:
    `17d4515 <https://github.com/Juris-M/zotero/commit/17d4515002c2f61698eeef3726fd93299494830c>`_
:author:
    Dan Stillman
:date:
    2018-01-17 02:42 (JST)


------

Tweak wording of delayed-citations mode

:commit:
    `e4cc28a <https://github.com/Juris-M/zotero/commit/e4cc28ac6041dd4bdd56fb5f26de6015ce4d05f4>`_
:author:
    Dan Stillman
:date:
    2018-01-17 02:36 (JST)

"Delay citation updates until manual refresh" would be fine in the doc
prefs, but "until manual refresh" is a bit too awkward for the prompt.
Instead, go with @rmzelle's suggestion from #1242 of referring to
"automatic citation updates", and invert the checkbox.


------

Fix translator architecture hangs on bad JSON in translatorCache

:commit:
    `cc9efde <https://github.com/Juris-M/zotero/commit/cc9efde8433b7ec94d4e02878f451b763dab30c6>`_
:author:
    Dan Stillman
:date:
    2018-01-17 01:04 (JST)


------

Start sync icon spinning before purging data

:commit:
    `2b8311d <https://github.com/Juris-M/zotero/commit/2b8311d3d7f3da6e7005ee5b14956c4f4aa9da3a>`_
:author:
    Dan Stillman
:date:
    2018-01-15 17:22 (JST)


------

Merge pull request #1242 from adomasven/feature/delay-updating-citatations

:commit:
    `0cd50b5 <https://github.com/Juris-M/zotero/commit/0cd50b5560d5ef1e82ae7eb313f8de03d78f71df>`_
:author:
    Dan Stillman
:date:
    2018-01-16 23:11 (JST)

Refactor integration and delay citation updates

------

Refresh citation text upon citation insertion

:commit:
    `2b27e40 <https://github.com/Juris-M/zotero/commit/2b27e40308353371969336c8e9fd58bebdff943d>`_
:author:
    Adomas Venčkauskas
:date:
    2018-01-16 20:55 (JST)


------

Ensure delayed citation styling is removed upon proper update

:commit:
    `b985ef8 <https://github.com/Juris-M/zotero/commit/b985ef8a53e9d37b38ebb6c2628da4522ae66aff>`_
:author:
    Adomas Venčkauskas
:date:
    2017-12-12 21:21 (JST)

Ensure delayed citation styling is removed upon proper update


------

Update locales from Transifex

:commit:
    `fec3fa2 <https://github.com/Juris-M/zotero/commit/fec3fa2a7273e5cf5d6fd6bb2514887530883ffc>`_
:author:
    Dan Stillman
:date:
    2018-01-12 10:23 (JST)


------

Update submodules

:commit:
    `09fc3c2 <https://github.com/Juris-M/zotero/commit/09fc3c2b1c26ec3cbabb2259bbe74fe0a88e3a23>`_
:author:
    Dan Stillman
:date:
    2018-01-12 10:19 (JST)


------

Automatically rename dragged file attachments from parent metadata

:commit:
    `7cb95f4 <https://github.com/Juris-M/zotero/commit/7cb95f41297477788ddbf014915dc9bdba9c1ac8>`_
:author:
    Dan Stillman
:date:
    2018-01-10 14:39 (JST)

Rename happens if only one file is dragged and the parent item has no
existing file attachments.

Closes #1405


------

Add spacing between icon and search field in Quick Format window

:commit:
    `ea2fead <https://github.com/Juris-M/zotero/commit/ea2feadbfff43016109aed09735512d411a7fb5b>`_
:author:
    Dan Stillman
:date:
    2018-01-08 15:08 (JST)


------

Cancel active Quick Format search if another one starts

:commit:
    `87cf336 <https://github.com/Juris-M/zotero/commit/87cf336e224aa9530fd632aad3ba3403c6239fe4>`_
:author:
    Dan Stillman
:date:
    2018-01-08 15:05 (JST)

This fixes inconsistent results (#1349) from async searches finishing
out of order.

Also adds spinner when search is active


------

Blacklist spurious warnings about word processor plugin update manifests

:commit:
    `7d41047 <https://github.com/Juris-M/zotero/commit/7d41047a9d0aee4cf3c624c00ff2004edf593f21>`_
:author:
    Dan Stillman
:date:
    2018-01-08 14:01 (JST)


------

Increase save time for Accessed test for Travis

:commit:
    `c83de8a <https://github.com/Juris-M/zotero/commit/c83de8a6ea5e667fee7bc984c50962e95aabb96c>`_
:author:
    Dan Stillman
:date:
    2018-01-05 20:04 (JST)


------

Allow "now" in Accessed field to use current time

:commit:
    `3f6ef7f <https://github.com/Juris-M/zotero/commit/3f6ef7fb01f81cef2de78edd11399f7e97c1b232>`_
:author:
    Dan Stillman
:date:
    2018-01-05 17:40 (JST)

Closes #1340


------

Add schema update step to remove dc:isReplacedBy relations

:commit:
    `5847388 <https://github.com/Juris-M/zotero/commit/5847388862a95379cf703972c6b0815037bd3976>`_
:author:
    Dan Stillman
:date:
    2018-01-05 16:53 (JST)

These should've all been replaced with dc:replaces relations in a schema
update step, so any that exist were likely synced down from the API
(since fixed) and should be obsolete/redundant.


------

Add "Publication" to top level of search condition drop-down

:commit:
    `4ac368e <https://github.com/Juris-M/zotero/commit/4ac368e0527ad34f9c71985bd33da4a52e468cfa>`_
:author:
    Dan Stillman
:date:
    2018-01-05 12:59 (JST)


------

Clear parentKey change marker after save

:commit:
    `fdb9e20 <https://github.com/Juris-M/zotero/commit/fdb9e20076f37bf365c78098b8dd69610f3b4e41>`_
:author:
    Dan Stillman
:date:
    2018-01-05 09:10 (JST)

Fixes #1325, Field editor closes during auto-sync of newly created
parent item


------

Pause the document update timer during warning dialogs

:commit:
    `4b78ebc <https://github.com/Juris-M/zotero/commit/4b78ebcd727aa82fd5fb45ffb5c84cb0cd90a58f>`_
:author:
    Adomas Venčkauskas
:date:
    2017-12-06 19:00 (JST)


------

Simplify field handling

:commit:
    `47744e4 <https://github.com/Juris-M/zotero/commit/47744e4ccd91cfc6f6bb2311f8fadf3025586226>`_
:author:
    Adomas Venčkauskas
:date:
    2017-12-06 18:41 (JST)

Don't use field.writeToDoc(), because it prevents from optimizing
libreoffice text writes


------

Add session.getItems in preparation for document collections

:commit:
    `2ad0dc0 <https://github.com/Juris-M/zotero/commit/2ad0dc00daa945f22041612639abfcb001b96408>`_
:author:
    Adomas Venčkauskas
:date:
    2017-10-16 20:05 (JST)


------

Display a refresh notice instead of bibliography when citing delayed

:commit:
    `f8f403e <https://github.com/Juris-M/zotero/commit/f8f403eca49346e447328c5e1d635024107a82ba>`_
:author:
    Adomas Venčkauskas
:date:
    2017-08-29 22:01 (JST)


------

Option to delay updating citation in document.

:commit:
    `2827f70 <https://github.com/Juris-M/zotero/commit/2827f70daaf571765a37a5f4a1ddda8f13a1b76f>`_
:author:
    Adomas Venčkauskas
:date:
    2017-06-06 18:07 (JST)

The checkbox in doc prefs is hidden until an update takes 5s or longer
after which the user is prompted to enable delaying.


------

Add more integration tests

:commit:
    `6d05c34 <https://github.com/Juris-M/zotero/commit/6d05c3472bd8e2dd6509795b81a964ca0aba3fe5>`_
:author:
    Adomas Venčkauskas
:date:
    2017-06-01 19:03 (JST)


------

Integration refactor megacommit

:commit:
    `5805c7e <https://github.com/Juris-M/zotero/commit/5805c7e562c820cdbe37221bb178ced99be22a8d>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-30 21:55 (JST)

- Removed obsolete logic for citation.properties.deleted, which is no
  longer set anywhere
- Introduced a bibliography class
- BibliographyEditInterface no longer edits state
- Fields._processFields() now has linear flow because:
- Exception handling for missing items and corrupt fields reworked to be
  handled in relevant Field classes, so that the flow remains linear
- Document modifying functions (i.e. Fields.updateDocument()) now only
  called in Zotero.Integration.Interface functions instead of all over
  the place
- document.setDocPrefs() now called after every execCommand() since
  the cost is trivial, but that simplifies a bunch of logic
- Misc code cleanup

TODO at some point in the future:
- Move Integration.(init/delete)Pipe out
- Decouple references and clarify functions in Integration.Fields and
  Integration.Session


------

Add Zotero.Integration.Citation

:commit:
    `f44d563 <https://github.com/Juris-M/zotero/commit/f44d563a152f3837a2da2a231d3c1a71b83446f6>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-25 16:48 (JST)

- Moves a bunch of citation related processing from Integration.Session
- Replaces missing item handling with a function instead of exception
- Solves some really confusing flow issues in _processFields


------

Make current session globally available

:commit:
    `a1acbd4 <https://github.com/Juris-M/zotero/commit/a1acbd403837b03e3ea7f17700b99cbd7e659cac>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-24 17:54 (JST)

Decoupling! Sessions can be instantiated without
Zotero.Integration.Interface


------

Fix bugs for style-switching and footnote citations

:commit:
    `54b4ec6 <https://github.com/Juris-M/zotero/commit/54b4ec6f5cd94533c2b3531395f0c62d8b5d7620>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-23 21:21 (JST)


------

Refactor CitationEditInterface

:commit:
    `4159c63 <https://github.com/Juris-M/zotero/commit/4159c63a3ba3c261583c9c62dcfd316285cbfefe>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-23 20:31 (JST)

This is the first really big change that detangles UI stuff from
directly changing state. io.citation is no longer tied to the citation
loaded in the session in any way and CitationEditInterface does not
write anything to session or document. All writes are handled in
Fields.addEditCitation()


------

Move citation unserialization

:commit:
    `41db61e <https://github.com/Juris-M/zotero/commit/41db61ecb9f17b92511806f223aee5d0e5c52ec5>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-17 23:12 (JST)

Using new es6 class syntax because getters/setters don't
retain `this` context with Zotero.extendClass and we're building
with at least FX45 on every platform now where the syntax is supported


------

Add a wrapper class for citation and bibliography fields

:commit:
    `52fd0d9 <https://github.com/Juris-M/zotero/commit/52fd0d992dee8e4a4f3b8e786abbbf708987897c>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-17 23:15 (JST)


------

Rename Integration.Document to Integration.Interface

:commit:
    `41c93ab <https://github.com/Juris-M/zotero/commit/41c93ab0349147545b4106cdae889495b1139611>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-16 00:19 (JST)


------

Remove integration plugin version checks

:commit:
    `18e4e37 <https://github.com/Juris-M/zotero/commit/18e4e37b329db0e8b4308b0f8ee4f0ef33bb5bc5>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-05 23:57 (JST)


------

Moves utilities code away from Zotero.Integration

:commit:
    `430f58d <https://github.com/Juris-M/zotero/commit/430f58d3c434edd507262a9f2e7872fe9a40899d>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-05 23:51 (JST)


------

Don't close clicked field when clicking away from changed field

:commit:
    `2baa537 <https://github.com/Juris-M/zotero/commit/2baa537542fcd5bc6e2826eb0eef6b34c571dcfc>`_
:author:
    Dan Stillman
:date:
    2018-01-03 16:33 (JST)

Fixes #1401

The item box badly wants to be redone in React.


------

Additional try/catch to fix NS_ERROR_UNEXPECTED from tree select

:commit:
    `374eefa <https://github.com/Juris-M/zotero/commit/374eefada10d254fedc61147c2467d9933ea654c>`_
:author:
    Dan Stillman
:date:
    2018-01-03 10:17 (JST)

Follow-up to 7cd1439928


------

Add attr()/text() to translator sandbox

:commit:
    `2bc44dd <https://github.com/Juris-M/zotero/commit/2bc44dddd19d6bbaef59c5524c251d226c2bcdb2>`_
:author:
    Dan Stillman
:date:
    2017-12-28 08:18 (JST)

The current document is automatically used (but can still be provided as
the first argument to avoid accidental bugs during the transition).

Closes #1323
Addresses zotero/translators#1277


------

Update locales from Transifex

:commit:
    `5350931 <https://github.com/Juris-M/zotero/commit/53509316174b5e2eb4619a895b287d1fbdd79973>`_
:author:
    Dan Stillman
:date:
    2017-12-28 07:07 (JST)


------

Fix undo in notes to not restore changes from another note

:commit:
    `c4fde7e <https://github.com/Juris-M/zotero/commit/c4fde7ebbf3acd645e3171d87aaa3dba39ce5230>`_
:author:
    Dan Stillman
:date:
    2017-12-28 06:49 (JST)

Fixes #1398


------

Bump version

:commit:
    `b354293 <https://github.com/Juris-M/zotero/commit/b354293921b7dbf2e4c7a96872a0f349677d14a2>`_
:author:
    Frank Bennett
:date:
    2017-12-22 09:33 (JST)


------

Update locales from Transifex

:commit:
    `5fcac10 <https://github.com/Juris-M/zotero/commit/5fcac10db9e35c03bf4f78cf7b4dc15535a81435>`_
:author:
    Dan Stillman
:date:
    2017-12-21 11:42 (JST)


------

Fix deletion of tags across libraries

:commit:
    `a1c96f1 <https://github.com/Juris-M/zotero/commit/a1c96f1db13e4a064d631c8e3f8d0bd53fc4f09c>`_
:author:
    Dan Stillman
:date:
    2017-12-21 10:37 (JST)

https://forums.zotero.org/discussion/comment/296384/#Comment_296384


------

Update version

:commit:
    `b1b9dcf <https://github.com/Juris-M/zotero/commit/b1b9dcf233df241985cd34904c68b36e6ae4a322>`_
:author:
    Dan Stillman
:date:
    2017-12-21 10:38 (JST)


------

Update version

:commit:
    `22d3fbb <https://github.com/Juris-M/zotero/commit/22d3fbbc9b6b753ec3e62ee1d5b4efbeeae84c78>`_
:author:
    Dan Stillman
:date:
    2017-12-20 05:59 (JST)


------

Hopefully fix intermittently broken items pane

:commit:
    `7cd1439 <https://github.com/Juris-M/zotero/commit/7cd143992860ae0e0c7eab7e8b100ea4730cfffd>`_
:author:
    Dan Stillman
:date:
    2017-12-18 16:55 (JST)

https://forums.zotero.org/discussion/69226/papers-become-invisible-in-the-middle-pane

I can't reproduce this, but it seems like if the tree disappears (due to
a collection change?) while the tree is refreshing, the toggleSelect()
in the rememberSelection() call can fail and break the tree.


------

Fix some UI issues with storage settings

:commit:
    `fa33eb7 <https://github.com/Juris-M/zotero/commit/fa33eb72b20a20974e1b422014f09f360b44a265>`_
:author:
    Dan Stillman
:date:
    2017-12-18 14:34 (JST)

- Enable/disable download mode drop-down for groups separately from user
  library
- Fixing hiding of terms of service message when Zotero storage isn't
  selected


------

Update version

:commit:
    `7d98f04 <https://github.com/Juris-M/zotero/commit/7d98f04bd8806f6928dae5e980e3e683fb182efb>`_
:author:
    Dan Stillman
:date:
    2017-12-15 16:29 (JST)


------

Open /start on first-run instead of /start_standalone

:commit:
    `545c800 <https://github.com/Juris-M/zotero/commit/545c8004598a08e2fcc95c795643f9b168b2a40e>`_
:author:
    Dan Stillman
:date:
    2017-12-15 14:14 (JST)

Closes #1389


------

Disable "Check Database Integrity" button while running

:commit:
    `6acf208 <https://github.com/Juris-M/zotero/commit/6acf208a367b44a572418ddca2e06e2c1dd99481>`_
:author:
    Dan Stillman
:date:
    2017-12-15 13:49 (JST)


------

Update locales from Transifex

:commit:
    `a85ea18 <https://github.com/Juris-M/zotero/commit/a85ea18fd92bfcb8ffbae86a3a3c19b82d923d33>`_
:author:
    Dan Stillman
:date:
    2017-12-15 13:31 (JST)


------

Log skipped libraries

:commit:
    `0ad4393 <https://github.com/Juris-M/zotero/commit/0ad439395e2a3e109b9bd623c0c29e8adf6d4416>`_
:author:
    Dan Stillman
:date:
    2017-12-15 13:20 (JST)


------

Fix type in report.js

:commit:
    `f913e7a <https://github.com/Juris-M/zotero/commit/f913e7ac27b2664bfe55bd858ff4ad01e6a0dfa4>`_
:author:
    Frank Bennett
:date:
    2017-12-14 16:29 (JST)


------

Add missing yield statement

:commit:
    `19c5659 <https://github.com/Juris-M/zotero/commit/19c56594de72c109787fad13c0491c85294b11d0>`_
:author:
    Frank Bennett
:date:
    2017-12-14 16:28 (JST)


------

Use numbered placeholders for new localized strings

:commit:
    `1a46196 <https://github.com/Juris-M/zotero/commit/1a46196080eba918d5b9589169d77285bbff975d>`_
:author:
    Dan Stillman
:date:
    2017-12-14 16:18 (JST)


------

Update submodules

:commit:
    `90d948a <https://github.com/Juris-M/zotero/commit/90d948a6bca258b7eae53cb1cc044900b35653ed>`_
:author:
    Dan Stillman
:date:
    2017-12-14 11:33 (JST)


------

Update locales from Transifex

:commit:
    `aefeb1f <https://github.com/Juris-M/zotero/commit/aefeb1f613160ad925ac4a420417471901cf3bc3>`_
:author:
    Dan Stillman
:date:
    2017-12-14 11:05 (JST)


------

Fix cursor reset while typing in attachment notes

:commit:
    `05eb3a3 <https://github.com/Juris-M/zotero/commit/05eb3a340c23a37f5f35b2dbb5bcb1db7e5465e0>`_
:author:
    Dan Stillman
:date:
    2017-12-12 17:31 (JST)

If you started typing just as auto-save was kicking in (i.e., 1 second
after stopping typing), any additional characters could be removed and
the cursor could jump back to the beginning of the note.

Fixes #1336, probably


------

Wrap URLs and DOIs in HTML output

:commit:
    `8f5903f <https://github.com/Juris-M/zotero/commit/8f5903f5eb95985dbda18ba2edd5d99ccd9b0da6>`_
:author:
    Dan Stillman
:date:
    2017-12-12 13:24 (JST)

Closes #1387


------

Update citeproc-js to 1.1.182

:commit:
    `9ca4089 <https://github.com/Juris-M/zotero/commit/9ca40890a9d9ebeb57ad0d74a2109fe6c99db9b6>`_
:author:
    Dan Stillman
:date:
    2017-12-12 07:34 (JST)


------

Tweak a couple font sizes in Sync -> Reset pane

:commit:
    `392687f <https://github.com/Juris-M/zotero/commit/392687f9eec0f8be6df7302ec7a5a3ac3e92e822>`_
:author:
    Dan Stillman
:date:
    2017-12-12 07:34 (JST)


------

Updates locales from Transifex and merge new English strings

:commit:
    `341d4f1 <https://github.com/Juris-M/zotero/commit/341d4f169fa471ad993f52fb46a8b46bac9fdc6a>`_
:author:
    Dan Stillman
:date:
    2017-12-11 17:58 (JST)


------

Fix auto-focusing of notes in external window

:commit:
    `6051c24 <https://github.com/Juris-M/zotero/commit/6051c245b455f07438fb2d9596cf38ffc693490e>`_
:author:
    Dan Stillman
:date:
    2017-12-11 16:39 (JST)


------

Don't show note in right-hand pane when editing in separate window

:commit:
    `dcfaa55 <https://github.com/Juris-M/zotero/commit/dcfaa5521e25c29f2218bd7e1b8666e66df4dd70>`_
:author:
    Dan Stillman
:date:
    2017-12-11 16:23 (JST)

- When a child note is opened in a separate window, the parent window is
  selected. (This used to work but was broken in 5.0.)
- When a top-level note is opened (via double-click), the right-hand pane
  changes to show "Editing in separate window".
- If a note that's currently open in a separate window is clicked on,
  the right-hand pane shows "Editing in a separate window".
- If a note window is closed and the item is selected, the note editor
  reappears in the right-hand pane after the note is saved.

This will avoid unnecessary UI updates and data loss bugs from the two
notes getting out of sync (and is just generally cleaner).

Also:

- General cleanup of note display code


------

Prevent Add Item by Identifier button from flashing on textbox click

:commit:
    `b2c9a42 <https://github.com/Juris-M/zotero/commit/b2c9a421033f62801003851e0708f11b7edbac36>`_
:author:
    Dan Stillman
:date:
    2017-12-11 13:15 (JST)

Nesting the panel in the toolbarbutton seems to cause the button to
appear as if it were clicked on any click/right-click in the textbox,
and I couldn't find a way to prevent that with event.stopPropagation().

Also cleans up this code in general


------

Fix context-menu paste into Add Item by Identifier

:commit:
    `383f8d2 <https://github.com/Juris-M/zotero/commit/383f8d2219e5abb96f4895c0f86b4833beee777f>`_
:author:
    Dan Stillman
:date:
    2017-12-11 07:20 (JST)

The context menu was triggering onpopuphidden, which was clearing the
textbox.


------

Avoid upload retry loops

:commit:
    `df38f4d <https://github.com/Juris-M/zotero/commit/df38f4ded7813fa2f9b4a6f74a731954296df68d>`_
:author:
    Dan Stillman
:date:
    2017-12-10 17:26 (JST)

- Don't try uploading an object more than 5 times
- Don't retry a child item if the parent item failed too


------

Update Node packages

:commit:
    `c176959 <https://github.com/Juris-M/zotero/commit/c17695939c992ecc11ce7eef9746c79eb7760b9b>`_
:author:
    Dan Stillman
:date:
    2017-12-10 17:15 (JST)


------

Select text in search bar when using Find menu option (or shortcut)

:commit:
    `c723e1e <https://github.com/Juris-M/zotero/commit/c723e1ebe43735686d0dc8a92bc4d3bf87f4b6e2>`_
:author:
    Dan Stillman
:date:
    2017-12-10 16:21 (JST)

https://forums.zotero.org/discussion/69305


------

API-based "Restore to Online Library"

:commit:
    `f353b7c <https://github.com/Juris-M/zotero/commit/f353b7ca61f7b216db6e2feeee156bfdbe08c3ef>`_
:author:
    Dan Stillman
:date:
    2017-12-08 14:27 (JST)

Restores the "Restore to Zotero Server" functionality, now using the
API:

1. Get all remote keys and send `DELETE` for any that don't exist
   locally.
2. Upload all local objects in full (non-patch) mode using only library
   version so that the remotes are overwritten.
3. Reset file sync history, causing all files to be uploaded (or, more
   likely, reassociated with existing remote files).

Since these are treated as regular updates on the server, they'll sync
down to other clients normally. Unsynced changes by other clients might
still trigger conflicts.

This and Reset File Sync History can also now be run on group libraries,
with a library selector in the Reset pane (which I forgot to do with
React).

The full sync option is now removed from the Reset pane, since there
wasn't ever really a reason to run it manually.

We should be able to reimplement Restore from Online Library (#1386)
using the inverse of this approach.

Closes #914


------

Add comment regarding strToDate()'s month handling in retrieveItem()

:commit:
    `885ed60 <https://github.com/Juris-M/zotero/commit/885ed6039f62141b3eea25b54f8a7b27fddf03dc>`_
:author:
    Dan Stillman
:date:
    2017-12-08 14:14 (JST)


------

Don't compress uploaded data in tests

:commit:
    `da1dd75 <https://github.com/Juris-M/zotero/commit/da1dd752658291416b50d5b13b30d57b4b9d73fc>`_
:author:
    Dan Stillman
:date:
    2017-12-08 14:10 (JST)

It would be better to handle this automatically in Sinon, but as it is
uploads are compressed if they're bigger than an arbitrary limit, which
can break tests unexpectedly if they check req.requestBody.


------

Avoid deprecation warning in recognizePDF

:commit:
    `e01cb38 <https://github.com/Juris-M/zotero/commit/e01cb38c5d11b4984f0d41926ff9694882830f22>`_
:author:
    Dan Stillman
:date:
    2017-12-08 14:10 (JST)


------

Show file path instead of "(null)" when installing style via file open

:commit:
    `9a43b53 <https://github.com/Juris-M/zotero/commit/9a43b53ebe200e87eeb92796a86351022f18861f>`_
:author:
    Dan Stillman
:date:
    2017-12-08 14:04 (JST)

And fix deprecation warning from passing an nsIFile

(Also updates the Zotero.Styles.install() documentation to note that the
first parameter's `file` property can be a string path.)


------

Add utility functions for building drop-down library lists

:commit:
    `045f1fb <https://github.com/Juris-M/zotero/commit/045f1fbb7e86eb6ee1e9790892687a18ab8f868a>`_
:author:
    Dan Stillman
:date:
    2017-12-08 14:01 (JST)

A XUL one for the current use in Advanced Search and an HTML one for
future uses. Sets the value to libraryID and adds data attributes for
editable/filesEditable on the HTML one.


------

Update version

:commit:
    `36436d0 <https://github.com/Juris-M/zotero/commit/36436d0b438226f3419f5bd27c2c2f1a979db7ce>`_
:author:
    Dan Stillman
:date:
    2017-12-04 08:05 (JST)


------

Update locales from Transifex

:commit:
    `816fb52 <https://github.com/Juris-M/zotero/commit/816fb52b76cff576f7eedc7bae568d66c4464d2b>`_
:author:
    Dan Stillman
:date:
    2017-12-04 05:24 (JST)


------

Update submodules

:commit:
    `8f98398 <https://github.com/Juris-M/zotero/commit/8f98398dfd47f96b5601e49c2443473beaa8a61a>`_
:author:
    Dan Stillman
:date:
    2017-12-04 05:20 (JST)


------

Show friendlier error on setDates() failure during file sync download

:commit:
    `4c337e5 <https://github.com/Juris-M/zotero/commit/4c337e52947acdb6bf2523c276e1b6f4f275d552>`_
:author:
    Dan Stillman
:date:
    2017-12-02 18:14 (JST)


------

Clear Windows read-only attribute when storing file

:commit:
    `6941f96 <https://github.com/Juris-M/zotero/commit/6941f96a5a912e980d332db1bcb9c355c5a4720b>`_
:author:
    Dan Stillman
:date:
    2017-12-02 18:11 (JST)


------

Fix "Access is denied" file sync error with read-only files

:commit:
    `c3df3fc <https://github.com/Juris-M/zotero/commit/c3df3fcebfbe8f775f90502e95a2b8332ad4d60b>`_
:author:
    Dan Stillman
:date:
    2017-12-02 17:57 (JST)

If the read-only file is set on a file in the 'storage' directory, it's
added to the ZIP for snapshot/WebDAV syncing, and when extracted the
setDates() call was failing. This clears the read-only attribute (and
system and hidden) when extracting all files.


------

Missed image files for 2x grippy dimples from 640846961a

:commit:
    `2c47b64 <https://github.com/Juris-M/zotero/commit/2c47b6403d73c862179afaf838b391748781b627>`_
:author:
    Dan Stillman
:date:
    2017-12-02 15:51 (JST)


------

Fix sync error after resetting read-only group

:commit:
    `cdaf73b <https://github.com/Juris-M/zotero/commit/cdaf73b3d07cc40ccb3207e99b10541c29916680>`_
:author:
    Dan Stillman
:date:
    2017-12-02 15:35 (JST)

If an item needed to be erased, it would fail with "Cannot edit item in
read-only library", because the deletion didn't skip the edit check.


------

2x grippy dimple

:commit:
    `6408469 <https://github.com/Juris-M/zotero/commit/640846961accbd3a84db4e3bc67de8778889ce19>`_
:author:
    Dan Stillman
:date:
    2017-12-02 03:09 (JST)


------

Update citeproc-js to 1.1.181

:commit:
    `fb74fe7 <https://github.com/Juris-M/zotero/commit/fb74fe76b7ac0ddfe91ad7e2b0d4f7a8128ce4ab>`_
:author:
    Dan Stillman
:date:
    2017-12-01 16:10 (JST)


------

Show sync error about embedded images in notes for attachment notes too

:commit:
    `b397ee2 <https://github.com/Juris-M/zotero/commit/b397ee22811f9c97619f37f7abbc9427299d2e8d>`_
:author:
    Dan Stillman
:date:
    2017-12-01 13:50 (JST)


------

Clone feed items if translation returns no items. Closes #1377

:commit:
    `6970556 <https://github.com/Juris-M/zotero/commit/6970556dbdd93fb301b1ec38da30afc173722ec2>`_
:author:
    Adomas Venčkauskas
:date:
    2017-11-30 18:39 (JST)


------

Don't show Firefox profile access message on empty 'zotero' dir

:commit:
    `9b9af65 <https://github.com/Juris-M/zotero/commit/9b9af65f8ab0e65b6e9d37b2f97564a7e83cfcec>`_
:author:
    Dan Stillman
:date:
    2017-11-29 17:57 (JST)

But maybe do show in cases where it didn't show before, since we were
using exists(), which can return false for inaccessible directories.


------

Fix localized sorting of creator types

:commit:
    `e2eef77 <https://github.com/Juris-M/zotero/commit/e2eef779c599144068ead11653454c3dec3ac75f>`_
:author:
    Dan Stillman
:date:
    2017-11-29 14:28 (JST)

Don't just rely on "Author" being first


------

Fix error selecting item with item type without creator types

:commit:
    `76b96a8 <https://github.com/Juris-M/zotero/commit/76b96a8b070c592232986925ac7313e13e7296de>`_
:author:
    Dan Stillman
:date:
    2017-11-29 13:22 (JST)

https://forums.zotero.org/discussion/69118/


------

Update version

:commit:
    `d5dd5c5 <https://github.com/Juris-M/zotero/commit/d5dd5c5100a0656eba217033cf3f294c9aed01f2>`_
:author:
    Dan Stillman
:date:
    2017-11-29 04:17 (JST)


------

Update submodules

:commit:
    `bbad56a <https://github.com/Juris-M/zotero/commit/bbad56a32af1b1024b7ad8c4935f36bbd2b3dba2>`_
:author:
    Dan Stillman
:date:
    2017-11-28 09:55 (JST)


------

Update locales from Transifex

:commit:
    `45b0c3a <https://github.com/Juris-M/zotero/commit/45b0c3ab190c99e9f039d02793a22979543f340f>`_
:author:
    Dan Stillman
:date:
    2017-11-28 09:54 (JST)


------

Skip auto-sync on stream notification if library version is up to date

:commit:
    `5759689 <https://github.com/Juris-M/zotero/commit/575968929cf9d67afbd622596216d0684e77a3b9>`_
:author:
    Dan Stillman
:date:
    2017-11-28 09:46 (JST)

This avoids an extra no-op sync after an upload when the notification
for the change comes back down from the streaming server.


------

Simplify quick search handling in itemTreeView notify()

:commit:
    `baeb846 <https://github.com/Juris-M/zotero/commit/baeb846b5ce8797076211fe11a23e901bfa17269>`_
:author:
    Dan Stillman
:date:
    2017-11-28 09:46 (JST)


------

Avoid logged deprecation warning in external note editor

:commit:
    `7bbb4a8 <https://github.com/Juris-M/zotero/commit/7bbb4a8e2db012c30850273506fe6df8e1f2710f>`_
:author:
    Dan Stillman
:date:
    2017-11-28 09:45 (JST)


------

Restore use of beginUpdateBatch/endUpdateBatch in itemTreeView notify()

:commit:
    `202192b <https://github.com/Juris-M/zotero/commit/202192bc72b0aab708d37b41a63a4d09dfd23580>`_
:author:
    Dan Stillman
:date:
    2017-11-28 09:43 (JST)

Not sure why this was disabled, but it prevents flashing of child items
when a child item is modified.


------

Avoid unnecessary item map refreshes during sorting

:commit:
    `ae21b31 <https://github.com/Juris-M/zotero/commit/ae21b3113eb1cc61ef04cb177f83028f3f9c3564>`_
:author:
    Dan Stillman
:date:
    2017-11-28 07:32 (JST)


------

Filter stack in debug output when using debug.stackTrace pref

:commit:
    `a854ce9 <https://github.com/Juris-M/zotero/commit/a854ce9dcec2b05ad95f34803bc279c3f79908ab>`_
:author:
    Dan Stillman
:date:
    2017-11-28 07:31 (JST)


------

Don't start transaction to clear search temp table

:commit:
    `a70a517 <https://github.com/Juris-M/zotero/commit/a70a517f7ef68f262cb0a9b746d78de76d7f799f>`_
:author:
    Dan Stillman
:date:
    2017-11-28 07:29 (JST)

This might fix loss of item focus when editing a note in a search,
possibly starting with fbf2fbe0c6.


------

Temporarily restore double text setting in LibreOffice for footnotes

:commit:
    `da38787 <https://github.com/Juris-M/zotero/commit/da387874a2bc5b7639b12286e8f9af8b7e9a6782>`_
:author:
    Adomas Venčkauskas
:date:
    2017-11-28 00:24 (JST)

Regressions from 921b21c3. Footnotes in LibreOffice lose styling


------

Update version

:commit:
    `8178307 <https://github.com/Juris-M/zotero/commit/81783070a21e2d0d113fbda3a70833417557f11f>`_
:author:
    Dan Stillman
:date:
    2017-11-22 18:39 (JST)


------

Fix sync error if item with no content type somehow was indexed

:commit:
    `8241149 <https://github.com/Juris-M/zotero/commit/82411490795c1a6a2b88e640a3ba1effea4dacff>`_
:author:
    Dan Stillman
:date:
    2017-11-22 18:22 (JST)

https://forums.zotero.org/discussion/68954/mimetype-is-undefined-error

Not sure how this could happen.


------

Merge locales from Transifex

:commit:
    `d45a9c2 <https://github.com/Juris-M/zotero/commit/d45a9c22c57144e4195e47096299f0aa97ece0ec>`_
:author:
    Dan Stillman
:date:
    2017-11-22 17:18 (JST)


------

Localize "Verify Server"

:commit:
    `dfea8b5 <https://github.com/Juris-M/zotero/commit/dfea8b5a6a4fd5a532db587142ef1a0b9ba7a4b4>`_
:author:
    Dan Stillman
:date:
    2017-11-22 06:58 (JST)


------

Update submodules

:commit:
    `d4ae63f <https://github.com/Juris-M/zotero/commit/d4ae63ff0d126c09d11dc344111bb4481ef02d7f>`_
:author:
    Dan Stillman
:date:
    2017-11-22 12:24 (JST)


------

Check for lost legacy data directory after migration

:commit:
    `4a6922b <https://github.com/Juris-M/zotero/commit/4a6922ba48895ce9af759ae0a4d9d80ef1741dc9>`_
:author:
    Dan Stillman
:date:
    2017-11-22 12:21 (JST)

The check only does anything if we're using the default location, and
otherwise if we migrate the wrong directory (say, because somebody
opened Standalone 4.0 before upgrading to 5.0) we won't prompt until the
next restart.


------

Remove the additional setText() call for libreoffice plugin

:commit:
    `921b21c <https://github.com/Juris-M/zotero/commit/921b21c3e161a0c60946bd7c47b5113ee109ba54>`_
:author:
    Adomas Venčkauskas
:date:
    2017-11-16 19:54 (JST)

Possible since zotero/zotero-libreoffice-integration@2deea6bd46b50f72cdc937a468e88ab6cd4461ad


------

Don't send inPublications=false in 'full' mode for group items

:commit:
    `88a6e4f <https://github.com/Juris-M/zotero/commit/88a6e4f79fa5f8e69612c6e521aa29fe53715ca3>`_
:author:
    Dan Stillman
:date:
    2017-11-21 06:27 (JST)


------

Skip migration on error checking whether dataDir is on different drive

:commit:
    `f0b7a21 <https://github.com/Juris-M/zotero/commit/f0b7a212e5670804c9b879d44ec34a4d19a91170>`_
:author:
    Dan Stillman
:date:
    2017-11-21 01:38 (JST)


------

Remove ellipses from toolbar button labels

:commit:
    `f546fbd <https://github.com/Juris-M/zotero/commit/f546fbda999efb93f9eb59a18a91165fe94cab19>`_
:author:
    Dan Stillman
:date:
    2017-11-20 11:50 (JST)


------

Update locales from Transifex

:commit:
    `d072c62 <https://github.com/Juris-M/zotero/commit/d072c6233e66f113f2b8b648ccf722ab0bf93407>`_
:author:
    Dan Stillman
:date:
    2017-11-20 11:33 (JST)


------

Update version

:commit:
    `bdd9bfd <https://github.com/Juris-M/zotero/commit/bdd9bfdd1cd9e04ca0cf49063a70e070fa6cd882>`_
:author:
    Dan Stillman
:date:
    2017-11-18 13:24 (JST)


------

Check for Firefox profile access at startup and show warning

:commit:
    `10a5d8d <https://github.com/Juris-M/zotero/commit/10a5d8d02e39b61159508118dc7c979f0eb69f25>`_
:author:
    Dan Stillman
:date:
    2017-11-18 12:36 (JST)

f40b7ae6ac didn't help with people who've already upgraded, so check at
startup and show a warning if the profile is inaccessible until 1) the
profile has been accessed once or 2) the user checks "Don't show again"
in the warning dialog.

Also fix Zotero.Profile.getDefaultInProfilesDir() to properly throw an
error if it can't access the default directory.


------

Update version

:commit:
    `8f42a3c <https://github.com/Juris-M/zotero/commit/8f42a3ca2922b875449304da9b2bd61f89e8a5cc>`_
:author:
    Dan Stillman
:date:
    2017-11-17 23:38 (JST)


------

Update submodules

:commit:
    `48928de <https://github.com/Juris-M/zotero/commit/48928deba408142e9efc5e5ea2c3199c99fc8a68>`_
:author:
    Dan Stillman
:date:
    2017-11-17 23:37 (JST)


------

Show warning on Firefox profile access error after installation

:commit:
    `f40b7ae <https://github.com/Juris-M/zotero/commit/f40b7ae6ac8f59272dd252f551170617aae67d47>`_
:author:
    Dan Stillman
:date:
    2017-11-17 23:29 (JST)

https://www.zotero.org/support/kb/data_missing_after_zotero_5_upgrade


------

Reduce spacing in collection pane on Linux. Closes #1369

:commit:
    `9bf4bac <https://github.com/Juris-M/zotero/commit/9bf4bac2923deb42abc5aab2be515b0cd27c29e4>`_
:author:
    Adomas Venčkauskas
:date:
    2017-11-17 20:17 (JST)

The collections pane height change in bf36a98 made the linux
collection pane vertical spacing very big. This resets it to previous spacing


------

More complete fix for invalid creator row error at startup

:commit:
    `04a730d <https://github.com/Juris-M/zotero/commit/04a730da7fd32381535180c0ad105770ab919b43>`_
:author:
    Dan Stillman
:date:
    2017-11-17 16:55 (JST)

Follow-up to 7d3311679e


------

Add creator fix to integrity check, and run at startup if necessary

:commit:
    `7d33116 <https://github.com/Juris-M/zotero/commit/7d3311679edfa2cc8c710dc90f256668323ecab6>`_
:author:
    Dan Stillman
:date:
    2017-11-16 20:43 (JST)


------

Fix DB integrity check when there's only one of a given problem

:commit:
    `1cb49cc <https://github.com/Juris-M/zotero/commit/1cb49cc5d3df16f28c45c8bc409a223a3164f959>`_
:author:
    Dan Stillman
:date:
    2017-11-16 19:54 (JST)


------

Add Zotero.getStringFromBundle()

:commit:
    `810e0a3 <https://github.com/Juris-M/zotero/commit/810e0a32395db415c9554740989819754e1d392f>`_
:author:
    Dan Stillman
:date:
    2017-11-16 15:18 (JST)

The same as Zotero.getString(), but takes an nsIStringBundle as the
first parameter. Extensions could use this to get the same getString()
features with their own properties files.


------

Don't ignore whitespace when sorting

:commit:
    `c7fd46e <https://github.com/Juris-M/zotero/commit/c7fd46e6b4e0f1f2f8add47dc16b9435661c39eb>`_
:author:
    Dan Stillman
:date:
    2017-11-16 15:15 (JST)

Intl.Collator's ignorePunctuation ignores whitespace too, so stop using
it, since it produces much weirder results than sorting on punctuation does.


------

Update version

:commit:
    `3c2bcf0 <https://github.com/Juris-M/zotero/commit/3c2bcf012ff1d42a2284d81829c681955a7d4ae2>`_
:author:
    Dan Stillman
:date:
    2017-11-16 15:17 (JST)


------

Update submodules

:commit:
    `20ad57a <https://github.com/Juris-M/zotero/commit/20ad57a368f8047d4c85225d8aa1ddfab819d3ae>`_
:author:
    Dan Stillman
:date:
    2017-11-13 08:46 (JST)


------

Update locales from Transifex

:commit:
    `cd90cfd <https://github.com/Juris-M/zotero/commit/cd90cfd3884882487b9ca3b3915033ac9053fe04>`_
:author:
    Dan Stillman
:date:
    2017-11-13 08:46 (JST)


------

Fix extremely slow tag query with some SQLite databases

:commit:
    `fbf2fbe <https://github.com/Juris-M/zotero/commit/fbf2fbe0c610bae7d23b13ae7dd115a908b51b55>`_
:author:
    Dan Stillman
:date:
    2017-11-11 16:56 (JST)

Reverts a80f13099, "Avoid temporary table when getting tags for current view",
fixes a couple things, and removes the unused Zotero.Tags.getAllWithinSearch().

Fixes #1290


------

Don't send translator error from connectors reports in private-browsing mode

:commit:
    `08eefea <https://github.com/Juris-M/zotero/commit/08eefeaf574a97da13ea08916832aec9d981a32f>`_
:author:
    Adomas Venčkauskas
:date:
    2017-11-10 18:10 (JST)


------

Fix HTTP breakage in bb1cbdff269

:commit:
    `6b03124 <https://github.com/Juris-M/zotero/commit/6b031249acfe749c85655fc26451f01aef254c83>`_
:author:
    Dan Stillman
:date:
    2017-11-08 16:18 (JST)


------

Add test for short DOI parsing

:commit:
    `bbb6434 <https://github.com/Juris-M/zotero/commit/bbb6434524e9b4e8604cad5eb4ffbcbe9fe718a5>`_
:author:
    Dan Stillman
:date:
    2017-11-08 06:53 (JST)

Follow-up to #1356


------

Fix responseCharset parameter in HTTP methods

:commit:
    `bb1cbdf <https://github.com/Juris-M/zotero/commit/bb1cbdff269383294f9525b8bed3e3cda03fe82b>`_
:author:
    Dan Stillman
:date:
    2017-11-08 06:51 (JST)

Setting `contentCharset` on the channel doesn't seem to work anymore, so
use `overrideMimeType()` instead like we do in the connector. As noted
in the comment, we should probably have a `responseContentType`
parameter instead, since that's what XHR actually allows. For the moment
we just use `text/plain`.


------

Support short DOIs in cleanDOI() and update DOI copyAsURL prefix (#1356)

:commit:
    `e935001 <https://github.com/Juris-M/zotero/commit/e935001586dffafc35e2db76d89fee52d6c879bd>`_
:author:
    bwiernik
:date:
    2017-11-08 06:48 (JST)


------

Add cleanDOI() tests

:commit:
    `01c71fd <https://github.com/Juris-M/zotero/commit/01c71fd970c297c417d16741e26b5966efefdab9>`_
:author:
    Dan Stillman
:date:
    2017-11-08 05:27 (JST)

In advance of #1356

We're not properly handling DOIs in parentheses or brackets (which would
require non-regex logic), so those tests are skipped for now.


------

Save to current collection from /connectors/savePage.

:commit:
    `24507a7 <https://github.com/Juris-M/zotero/commit/24507a73f6a4f7198fef1fbd5ab26545758c7896>`_
:author:
    Adomas Venčkauskas
:date:
    2017-11-06 19:57 (JST)

Closes #1351


------

Ignore translator browserSupport in connectors except bookmarklet

:commit:
    `8012829 <https://github.com/Juris-M/zotero/commit/80128299922cc1b2140dba6d85309764a49e1964>`_
:author:
    Adomas Venčkauskas
:date:
    2017-11-06 19:35 (JST)

Addresses zotero/zotero-connectors#197


------

Update to citeproc-js 1.1.80

:commit:
    `1617591 <https://github.com/Juris-M/zotero/commit/16175912cafccbccd20e907a41884e55b1674346>`_
:author:
    Dan Stillman
:date:
    2017-11-05 16:23 (JST)


------

Fix test after a3e711b7b5

:commit:
    `0bf546a <https://github.com/Juris-M/zotero/commit/0bf546a0aa1f37abe3ff0ff0809e83cbe188fe91>`_
:author:
    Dan Stillman
:date:
    2017-11-03 17:47 (JST)


------

Fix feed item read shortcut, and delay 1 second before marking as read

:commit:
    `a3e711b <https://github.com/Juris-M/zotero/commit/a3e711b7b5b10cb3787ec929d8d71092d59ba8e4>`_
:author:
    Dan Stillman
:date:
    2017-11-03 17:36 (JST)

This allows keyboard navigation without marking all items in between as
read.


------

Add 2x version of creator type menu dropboxmarker

:commit:
    `c40e321 <https://github.com/Juris-M/zotero/commit/c40e321c4b540b3366d409f9ef9453ed81435def>`_
:author:
    Dan Stillman
:date:
    2017-11-02 03:41 (JST)


------

Fix "Rename File from Parent Metadata" if target filename exists

:commit:
    `0f743e5 <https://github.com/Juris-M/zotero/commit/0f743e55c7c3b398ca4e33f871c19c1440482e30>`_
:author:
    Dan Stillman
:date:
    2017-11-01 14:02 (JST)

Add a unique numeric suffix to the filename, before any extension


------

Remove unused Babel syntax plugins

:commit:
    `c784db8 <https://github.com/Juris-M/zotero/commit/c784db88a88c74cab9b50f30baa487f6f111b107>`_
:author:
    Dan Stillman
:date:
    2017-11-01 11:33 (JST)


------

Specify Node.js 8 for Travis, since current is now 9.0.0

:commit:
    `37521b6 <https://github.com/Juris-M/zotero/commit/37521b62a1d032d9f74fc676f448b79ca588fca1>`_
:author:
    Dan Stillman
:date:
    2017-11-01 11:17 (JST)


------

Don't return unparsed Mac persistent descriptor from Item.getFilePath()

:commit:
    `14ecf88 <https://github.com/Juris-M/zotero/commit/14ecf88ad475d0da7a8c9b78318e84583a119186>`_
:author:
    Dan Stillman
:date:
    2017-11-01 11:03 (JST)

And auto-convert to path, not filename


------

Update version

:commit:
    `4137a61 <https://github.com/Juris-M/zotero/commit/4137a61bc8c7dcc88745a71edcc861958fb8f4c0>`_
:author:
    Dan Stillman
:date:
    2017-10-31 15:22 (JST)


------

Fix date parsing from Atom feeds

:commit:
    `676ab78 <https://github.com/Juris-M/zotero/commit/676ab7852b3d92525137e93ea53ff934bf22f4d9>`_
:author:
    Dan Stillman
:date:
    2017-10-31 15:14 (JST)

Use Atom namespace when getting fields, and use `<updated>` date before
`<published>`. (The dates are also available on the nsIFeedContainer
(`feedEntry`), but we're getting them directly from the fields for some
reason.)


------

Fix logged error clicking below list in "Choose Libraries…" window

:commit:
    `6150a08 <https://github.com/Juris-M/zotero/commit/6150a08dc199253795b82ee68bcf52a61dbdbeff>`_
:author:
    Dan Stillman
:date:
    2017-10-31 05:02 (JST)


------

Activate "Set Up Syncing" button on context-menu paste or drag and drop

:commit:
    `33bf3b2 <https://github.com/Juris-M/zotero/commit/33bf3b2e1203d6ecfd571d5b2e20f615260d6b26>`_
:author:
    Dan Stillman
:date:
    2017-10-28 09:22 (JST)


------

Fix file conflict resolution after f0770fa84d

:commit:
    `196e45c <https://github.com/Juris-M/zotero/commit/196e45c849445db5ef491e1ed50d2fddb971cbf0>`_
:author:
    Dan Stillman
:date:
    2017-10-27 17:07 (JST)

merge.xul now returns an object with .data and .selected instead of
returning .data directly


------

Fix -s and -e arguments for test runner

:commit:
    `2184952 <https://github.com/Juris-M/zotero/commit/21849525517d999e2a6ac926d979c8c530122722>`_
:author:
    Dan Stillman
:date:
    2017-10-27 17:03 (JST)


------

Fix some property access issues

:commit:
    `e22d7a8 <https://github.com/Juris-M/zotero/commit/e22d7a8459204437bb39fd178f8c26426e80ac8f>`_
:author:
    Dan Stillman
:date:
    2017-10-27 16:21 (JST)

- Return `undefined` instead of throwing an error trying to access
  `libraryTypeID` on a Zotero.Feed -- this fixes a test failure with
  the latest Chai, which annoyingly runs inspect() on an object passed
  to .include() regardless of whether the test succeeds
- Make some deprecated properties non-enumerable to avoid unnecessary
  logging when the object is dumped


------

Update chai-as-promised after chai update

:commit:
    `241df13 <https://github.com/Juris-M/zotero/commit/241df13954b98dd6175ad75564df3d30a2f8afd9>`_
:author:
    Dan Stillman
:date:
    2017-10-27 14:34 (JST)

(Though we should mostly just use async/await)


------

Don't try to delete Quick Start Guide items in test

:commit:
    `34028d3 <https://github.com/Juris-M/zotero/commit/34028d354e65c512f5e4a1e038f6872b2d56f569>`_
:author:
    Dan Stillman
:date:
    2017-10-27 14:09 (JST)

We don't create these items anymore.


------

Bail on auto-build failure when running tests

:commit:
    `15942b9 <https://github.com/Juris-M/zotero/commit/15942b97ae675d8576abac54558eada610e4fbcb>`_
:author:
    Dan Stillman
:date:
    2017-10-27 14:08 (JST)


------

Fix various conflict resolution bugs

:commit:
    `f0770fa <https://github.com/Juris-M/zotero/commit/f0770fa84da3c3b1a5a5ee24b90a8d3b9851fd85>`_
:author:
    Dan Stillman
:date:
    2017-10-27 14:07 (JST)

Among other things, when choosing the local side for a conflict, the
remote version could still end up being saved.


------

Update chai to 4.1.2

:commit:
    `7f8699b <https://github.com/Juris-M/zotero/commit/7f8699b9371c9a20d95ec45bd217db4342b7572e>`_
:author:
    Dan Stillman
:date:
    2017-10-27 14:08 (JST)


------

Fix possible skipped group download when another group is archived

:commit:
    `5901a3c <https://github.com/Juris-M/zotero/commit/5901a3c7af33a9a32dc921a7c24ae9f85bdef8e5>`_
:author:
    Dan Stillman
:date:
    2017-10-27 08:04 (JST)


------

Fix potential restart error switching to first note of session

:commit:
    `14f4021 <https://github.com/Juris-M/zotero/commit/14f40218a922a2eca69d141870c99bc2edc1469d>`_
:author:
    Dan Stillman
:date:
    2017-10-26 14:22 (JST)


------

Fall back to en-US sorting if we can't parse the locale

:commit:
    `1deba23 <https://github.com/Juris-M/zotero/commit/1deba232facfe8351b08f88adf755e146108bbf4>`_
:author:
    Dan Stillman
:date:
    2017-10-26 13:54 (JST)


------

Update submodules

:commit:
    `56289b6 <https://github.com/Juris-M/zotero/commit/56289b66932b6542a7e14d81efa333ee2f750d51>`_
:author:
    Dan Stillman
:date:
    2017-10-26 12:56 (JST)


------

Update locales from Transifex

:commit:
    `7de192c <https://github.com/Juris-M/zotero/commit/7de192cd3aa67b92a9be46f9704a8e2e37d7ea4b>`_
:author:
    Dan Stillman
:date:
    2017-10-26 12:55 (JST)


------

Additional debugging for group sync issue

:commit:
    `d08db42 <https://github.com/Juris-M/zotero/commit/d08db42f7bd2ebcd6c904cb74be84ecff19cb8dd>`_
:author:
    Dan Stillman
:date:
    2017-10-26 12:51 (JST)

https://forums.zotero.org/discussion/68299/group-library-not-showing-up-report-id-198634382


------

Fix items list problems when adding item with a search entered

:commit:
    `73d8842 <https://github.com/Juris-M/zotero/commit/73d88421bb67e52428dabbe0e9506c595f8f6753>`_
:author:
    Dan Stillman
:date:
    2017-10-24 17:54 (JST)

When an item is created, an active quick search is cleared, but that's
now an async operation. We weren't waiting for that, which meant that
new items weren't selected and depending on a race condition could even
show the welcome pane despite there being items in the library.


------

Fix "item._changed.creators is undefined" error at startup

:commit:
    `1a779bb <https://github.com/Juris-M/zotero/commit/1a779bb7aa16e20a3abcd18c505cfecfa1f9c22a>`_
:author:
    Dan Stillman
:date:
    2017-10-23 16:20 (JST)

This could occur if creator indexes needed to be corrected for an item.


------

Separate identifer parsing from Add Item by Identifier and search translation

:commit:
    `e35b035 <https://github.com/Juris-M/zotero/commit/e35b035224244e8522c05815ae253ff31ae6d959>`_
:author:
    Dan Stillman
:date:
    2017-10-21 16:26 (JST)

- Move identifier detection to `Zotero.Utilities.Internal.extractIdentifiers()`
  so that it can be used for things other than Add Item by Identifier
  (e.g., translation-server)
- Add a `Zotero.Translate.Search::setIdentifier()` function that takes an
  identifier object produced by `extractIdentifiers()` (`{ DOI: "10/..." }`),
  converts that to the search format expected by translators, and calls setSearch()


------

Fix dropmarkers on Linux after 2x upgrades

:commit:
    `4e717a0 <https://github.com/Juris-M/zotero/commit/4e717a0934b67fb12fee2831587fec614ee6d4a1>`_
:author:
    Dan Stillman
:date:
    2017-10-21 07:15 (JST)


------

Throw a proper error if item.relations isn't an object

:commit:
    `677b2ed <https://github.com/Juris-M/zotero/commit/677b2edd51317b214acacc1dee411765b0e7141a>`_
:author:
    Dan Stillman
:date:
    2017-10-21 06:42 (JST)


------

Update full-text sync tests after 2ecfff66817

:commit:
    `39a2445 <https://github.com/Juris-M/zotero/commit/39a2445d7486a9a571b0d9c90f593047954f94a1>`_
:author:
    Dan Stillman
:date:
    2017-10-20 18:23 (JST)


------

Improve idle detection for full-text content processor

:commit:
    `2ecfff6 <https://github.com/Juris-M/zotero/commit/2ecfff66817c5b09443685a7c8f58167a81ee561>`_
:author:
    Dan Stillman
:date:
    2017-10-20 15:01 (JST)

It was previously possible for a return-from-idle to not properly stop
active processing.


------

Fixed 2x note column icon size

:commit:
    `9c5a3ad <https://github.com/Juris-M/zotero/commit/9c5a3ad820d5ad5b0b89e24eea45beaba06103c0>`_
:author:
    Dan Stillman
:date:
    2017-10-19 15:54 (JST)


------

Add missing 2x Mac collection/search icons and fix 2x sync icon size

:commit:
    `223c427 <https://github.com/Juris-M/zotero/commit/223c42788877a192186630fc02cfa23c0af99f58>`_
:author:
    Dan Stillman
:date:
    2017-10-18 19:05 (JST)


------

More 2x icon fixes

:commit:
    `30ae61d <https://github.com/Juris-M/zotero/commit/30ae61d60ee362834a5bb0f89ea513945f550db1>`_
:author:
    Dan Stillman
:date:
    2017-10-18 17:08 (JST)

Follow-up to 5b2af4845b


------

Update submodules

:commit:
    `45357bd <https://github.com/Juris-M/zotero/commit/45357bdb85263b6c991fd81ce965291174e36d56>`_
:author:
    Dan Stillman
:date:
    2017-10-18 10:05 (JST)


------

Update locales from Transifex

:commit:
    `16792df <https://github.com/Juris-M/zotero/commit/16792df11d7bcac09ff910aa454f977329456eb1>`_
:author:
    Dan Stillman
:date:
    2017-10-18 10:05 (JST)


------

Toolbar button and icon overhaul

:commit:
    `5b2af48 <https://github.com/Juris-M/zotero/commit/5b2af4845b86bc677864bc3c9350117db2db03cc>`_
:author:
    Dan Stillman
:date:
    2017-10-18 09:36 (JST)

- New 2x toolbar button shapes and other icons from @johanneskrtek --
  this HiDPI-ifies basically all graphics other than a few remaining item
  type icons
- Use the Mac search dropmarker for all menu buttons, since it's wider
  and more pleasant. Reduce menu button padding slightly to compensate.
- Better toolbar button state for inactive window and pressed state
- Fix dropmarker overlap in tag selector icon

Closes #347, Better/retina-style OS X toolbar icons
Closes #1339, Create new button PNGs for macOS


------

Update version

:commit:
    `2b01a09 <https://github.com/Juris-M/zotero/commit/2b01a097c743cf1c7801a168f079150019abf638>`_
:author:
    Dan Stillman
:date:
    2017-10-18 09:53 (JST)


------

Fix #1335, Item drag and drop is unreliable

:commit:
    `1f5639d <https://github.com/Juris-M/zotero/commit/1f5639da4297ac20fd21223d2004a7cfeef72e21>`_
:author:
    Dan Stillman
:date:
    2017-10-10 12:03 (JST)

Regression from e62433edfb

Load a locale file once via nsIConverterInputStream and cache it for
subsequent retrieveLocale() calls. I'm not sure if using a stream
instead of synchronous XHR is actually necessary now that there's
caching, but it can't hurt.


------

Add note input event debugging via extensions.zotero.debugNoteEvents

:commit:
    `68b5ac4 <https://github.com/Juris-M/zotero/commit/68b5ac456f3f8153675c0bf2f9feb56b37b2223a>`_
:author:
    Dan Stillman
:date:
    2017-10-09 07:00 (JST)


------

Save note on forward-delete when text is selected

:commit:
    `8f39097 <https://github.com/Juris-M/zotero/commit/8f3909713fa5b593bc96192060d89f6705a3b1c3>`_
:author:
    Dan Stillman
:date:
    2017-10-09 06:59 (JST)

This doesn't generate a keypress event for some reason, even though it
does when no text is selected.


------

Fix rebuilding of full-text index

:commit:
    `4fb8f44 <https://github.com/Juris-M/zotero/commit/4fb8f44d016c199f3b964ec4f7f4d326ccef9583>`_
:author:
    Dan Stillman
:date:
    2017-10-09 05:58 (JST)


------

Fix sync error from invalid link mode in database

:commit:
    `08d3229 <https://github.com/Juris-M/zotero/commit/08d322932d90a96ec0e27268c955fe9f135a68a8>`_
:author:
    Dan Stillman
:date:
    2017-10-08 17:42 (JST)

And add cleanup step to DB integrity check


------

Fix item selection that requires switching to library root

:commit:
    `773a93f <https://github.com/Juris-M/zotero/commit/773a93f55d77f4cb91161480b666ca9cfdacba4a>`_
:author:
    Dan Stillman
:date:
    2017-10-07 18:05 (JST)

Broken in c7639f328fa


------

Remove unnecessary condition

:commit:
    `d4569d3 <https://github.com/Juris-M/zotero/commit/d4569d3640a63c80d89f9d38ee08ddb59e663daf>`_
:author:
    Dan Stillman
:date:
    2017-10-07 16:43 (JST)


------

Fix data-dir-not-found error on first run with no legacy dataDir

:commit:
    `982719b <https://github.com/Juris-M/zotero/commit/982719bf83bb170297259a9cb0a66d64528d58f6>`_
:author:
    Dan Stillman
:date:
    2017-10-07 16:44 (JST)


------

Update locales from Transifex

:commit:
    `352cf31 <https://github.com/Juris-M/zotero/commit/352cf310b45f91d63f28f6901453162bce9776f3>`_
:author:
    Dan Stillman
:date:
    2017-10-06 08:00 (JST)


------

Adjust ignore mask in build script to #*, not just #*.*

:commit:
    `225fa2b <https://github.com/Juris-M/zotero/commit/225fa2b5e2b441cc2a85aa7b3cb73d4bf2d172ab>`_
:author:
    Dan Stillman
:date:
    2017-10-06 06:22 (JST)


------

Merge pull request #1293 from zotero/xhr-processDocuments

:commit:
    `d073dec <https://github.com/Juris-M/zotero/commit/d073dec84dc50e386cd2336fc8fd0be89d4cb81d>`_
:author:
    Dan Stillman
:date:
    2017-10-06 06:21 (JST)

XMLHttpRequest() processDocuments


------

Fix breakage in the connector from 365e58249dc

:commit:
    `492e791 <https://github.com/Juris-M/zotero/commit/492e7917b6fe88369c4a7c5b2b91ad5f9a2d9bd0>`_
:author:
    Dan Stillman
:date:
    2017-10-06 05:58 (JST)


------

Remove babel-plugin-transform-async-to-module-method

:commit:
    `e14b8f9 <https://github.com/Juris-M/zotero/commit/e14b8f94bdbd5a8ee8f6c9df2af704e9cfd6d1c5>`_
:author:
    Dan Stillman
:date:
    2017-10-05 16:06 (JST)

Everything we support supports async/await now, so stop converting to
Bluebird coroutine().


------

Fix translator test mismatches due to 5.0 tag format

:commit:
    `7d14da3 <https://github.com/Juris-M/zotero/commit/7d14da3a8c2a9b0f8d43459a1c155cec1c37c92c>`_
:author:
    Dan Stillman
:date:
    2017-08-22 09:45 (JST)


------

Don't show "Running handler" for 'debug' handler during translation

:commit:
    `ffcf608 <https://github.com/Juris-M/zotero/commit/ffcf608de19719b0daff954df5a41aac96b8e55a>`_
:author:
    Dan Stillman
:date:
    2017-08-22 09:32 (JST)


------

Use object for translate() in translator tests

:commit:
    `9209edd <https://github.com/Juris-M/zotero/commit/9209edd081172d1be85ecdadbeb5e320e15999b6>`_
:author:
    Dan Stillman
:date:
    2017-08-22 09:32 (JST)


------

Use new HTTP.processDocuments() in translatorTester

:commit:
    `23cf6bd <https://github.com/Juris-M/zotero/commit/23cf6bd0078fb3c148dc10a2493710cb7e9c61eb>`_
:author:
    Dan Stillman
:date:
    2017-08-22 09:31 (JST)


------

Allow substrings when filtering translator tests

:commit:
    `d526184 <https://github.com/Juris-M/zotero/commit/d5261841be96f42521341da0413ab19f6c099c0c>`_
:author:
    Dan Stillman
:date:
    2017-08-22 09:30 (JST)


------

Fix import translators in translation-server

:commit:
    `c44af1c <https://github.com/Juris-M/zotero/commit/c44af1c7bd93d7f4fd8b28f6a22785acb09ca9c2>`_
:author:
    Dan Stillman
:date:
    2017-08-22 05:16 (JST)


------

Switch to XMLHttpRequest for processDocuments()

:commit:
    `819be60 <https://github.com/Juris-M/zotero/commit/819be60796d2b8b0b512a6d157533b5a1fe81873>`_
:author:
    Dan Stillman
:date:
    2017-08-19 19:57 (JST)

processDocuments() now uses an XHR 'document' request, wrapped to
provide a 'location' property, and uses promises for a simpler call
signature (though the old one will continue to work, for existing
translators). 'done' and 'exception' can now be handled via promises,
and in the translator sandbox an optional noCompleteOnError argument
instructs it not to automatically cancel the translation process with an
error (e.g., for supplementary materials).

Since we do need a hidden browser in some situations (e.g., for saving
snapshots), the old hidden-browser-based processDocuments() is still
available as Zotero.HTTP.loadDocuments().

This hopefully also fixes various problems with document property access
in translation-server.


------

Increase size of page logged for invalid PDF download

:commit:
    `5f9dc05 <https://github.com/Juris-M/zotero/commit/5f9dc0595637fa2d1c5ab126298b24f97382f029>`_
:author:
    Dan Stillman
:date:
    2017-10-05 10:36 (JST)


------

Avoid double item save when adding attachment

:commit:
    `ff798d3 <https://github.com/Juris-M/zotero/commit/ff798d332bdde9cf92d4a9fd490f9138c2f9022b>`_
:author:
    Dan Stillman
:date:
    2017-10-05 10:35 (JST)


------

Disable e10s for tests

:commit:
    `6e1e2dc <https://github.com/Juris-M/zotero/commit/6e1e2dcf761acb806a6256613c2a1889d9903f74>`_
:author:
    Dan Stillman
:date:
    2017-10-05 10:35 (JST)


------

Fix #1272, Different-account warning with same username

:commit:
    `fcc366a <https://github.com/Juris-M/zotero/commit/fcc366a17622be580bbef0c285dd2549e5f88e86>`_
:author:
    Dan Stillman
:date:
    2017-10-03 14:44 (JST)

If you swapped in a database with a different sync account from the
stored one and then opened the prefs, it would update the username to
match the username from the API key, and then when you synced it would
warn you using the new username for both accounts.

This stops the prefs from updating the username in the DB, so it only
happens during a sync.

(This behavior was put in in 77a95b5e6d, I guess so that if you open the
prefs twice before a sync it won't briefly show a missing/outdated
username after the first time, but that's not a big deal.)


------

Update version

:commit:
    `f880fd1 <https://github.com/Juris-M/zotero/commit/f880fd12d6d16254d2aee0b77f175d7b003e26ad>`_
:author:
    Dan Stillman
:date:
    2017-10-03 04:40 (JST)


------

Isolate test from 531170353b

:commit:
    `f7e2cd6 <https://github.com/Juris-M/zotero/commit/f7e2cd6348ea2531e6066462a6e85d7bae8ee7bf>`_
:author:
    Dan Stillman
:date:
    2017-10-02 11:42 (JST)


------

Disable app update during test runs

:commit:
    `959772d <https://github.com/Juris-M/zotero/commit/959772dc00dc221c0e9e3e3cc5b5389747623217>`_
:author:
    Dan Stillman
:date:
    2017-10-02 11:06 (JST)


------

Log warning if key not passed to getByLibraryAndKey()

:commit:
    `dc11b37 <https://github.com/Juris-M/zotero/commit/dc11b37cedbef984cc60aec3a372e6e0e06b54d2>`_
:author:
    Dan Stillman
:date:
    2017-10-02 11:05 (JST)


------

Fix bidirectional relations on Duplicate Item

:commit:
    `5311703 <https://github.com/Juris-M/zotero/commit/531170353b395d2f63cc4b5f5aac5f1eca1953eb>`_
:author:
    Dan Stillman
:date:
    2017-10-02 11:04 (JST)


------

Fix additional refresh bug when Advanced Search window is open

:commit:
    `c014330 <https://github.com/Juris-M/zotero/commit/c0143300c426a586b40acd448fa9c4da39d48b58>`_
:author:
    Dan Stillman
:date:
    2017-10-01 13:23 (JST)

Follow-up to 89babf8832


------

Add deprecation warning for itemTreeView::saveSelection()

:commit:
    `699d563 <https://github.com/Juris-M/zotero/commit/699d5634e9ec913718fa77f87dc22c6103233c0e>`_
:author:
    Dan Stillman
:date:
    2017-10-01 12:46 (JST)


------

Make missing row in itemTreeView::getSelectedItems() non-fatal

:commit:
    `4eb18e5 <https://github.com/Juris-M/zotero/commit/4eb18e5eba97aa53ee91b2edd98f95bfb9fa188b>`_
:author:
    Dan Stillman
:date:
    2017-10-01 12:45 (JST)

This might help avoid the search bar brokenness that people are seeing
(and that we can't reproduce), though the same problem might just cause
a later error.


------

Update locales from Transifex

:commit:
    `f75d731 <https://github.com/Juris-M/zotero/commit/f75d7313dd3957ca35c05d367ce608eb3c9d5d06>`_
:author:
    Dan Stillman
:date:
    2017-10-01 08:33 (JST)


------

Update submodules

:commit:
    `5f413b2 <https://github.com/Juris-M/zotero/commit/5f413b2ff3861b29c967f422b826259f54e46bb1>`_
:author:
    Dan Stillman
:date:
    2017-10-01 08:10 (JST)


------

Revert Create Bib/Doc Prefs font size change from db496e13c2f

:commit:
    `dec6b86 <https://github.com/Juris-M/zotero/commit/dec6b864c9d7986f7eea961134a5bcffe686b747>`_
:author:
    Dan Stillman
:date:
    2017-10-01 08:08 (JST)

The font size is already controlled by the main font size pref, so this
was just making the font disproportionally bigger.


------

Remove citeproc-prereqs, which isn't necessary anymore

:commit:
    `52bbb79 <https://github.com/Juris-M/zotero/commit/52bbb79fd0678cfd281124792582d95758215b12>`_
:author:
    Dan Stillman
:date:
    2017-10-01 08:07 (JST)


------

Fix citeproc-js in Firefox 56

:commit:
    `e62433e <https://github.com/Juris-M/zotero/commit/e62433edfb902a8382c02548b02eeb7fbb8f30b8>`_
:author:
    Dan Stillman
:date:
    2017-09-30 17:01 (JST)

Our retrieveLocale() implementation was broken by
https://bugzilla.mozilla.org/show_bug.cgi?id=1319111


------

Firefox 55 compatibility: fix zotero-platform files

:commit:
    `404e045 <https://github.com/Juris-M/zotero/commit/404e045a9219653019ef14e8811e0652842874a6>`_
:author:
    Dan Stillman
:date:
    2017-08-09 11:45 (JST)

Mozilla removed support for the 'platform' keyword in chrome.manifest,
so use os= instead


------

Fix refresh problems when Advanced Search is open, and maybe other times

:commit:
    `89babf8 <https://github.com/Juris-M/zotero/commit/89babf8832ff80296b5851a2aca44e51bc15a4be>`_
:author:
    Dan Stillman
:date:
    2017-09-29 17:17 (JST)


------

Standardize connector server behavior for saves to read-only libraries

:commit:
    `48d4d2d <https://github.com/Juris-M/zotero/commit/48d4d2d5a5f26c92345406c5a7e23d64659252d8>`_
:author:
    Dan Stillman
:date:
    2017-09-28 06:31 (JST)

Return a 500 for read-only libraries for all save modes. Read-only views
within editable libraries will save to the library root.

Addresses #185, RIS/BibTeX interception to read-only view behaves
differently from save button


------

Update copyright and trademark info.

:commit:
    `18d15d8 <https://github.com/Juris-M/zotero/commit/18d15d8dc94a67d024214dc148d5070c79b91654>`_
:author:
    Sean Takats
:date:
    2017-09-27 22:37 (JST)


------

Remove connector proxy code

:commit:
    `7a062a7 <https://github.com/Juris-M/zotero/commit/7a062a74930c7ef398c8792188a8a6604538ac30>`_
:author:
    Adomas Venčkauskas
:date:
    2017-09-25 20:56 (JST)

Observing requests, auto-redirecting and learning proxies no longer
relevant on this codebase (and interferes with Scaffold).


------

Remove old archive.org relations

:commit:
    `da21c9c <https://github.com/Juris-M/zotero/commit/da21c9c47bccb651ab64eb9211c001fb53d90c1b>`_
:author:
    Dan Stillman
:date:
    2017-09-23 05:56 (JST)

These aren't allowed by the API and were breaking syncing (and haven't
been exposed anywhere for years anyway).


------

Apply linux tab fixes to all tabs (e.g. tabs in zotero plugins)

:commit:
    `42e2f22 <https://github.com/Juris-M/zotero/commit/42e2f229c0939ddf05727278681895e61db67431>`_
:author:
    Adomas Venčkauskas
:date:
    2017-09-22 19:10 (JST)


------

Fix RIS/BibTeX import errors when in library root

:commit:
    `19447e7 <https://github.com/Juris-M/zotero/commit/19447e7b90914d80d1fe10e03f6a20974d674c7c>`_
:author:
    Dan Stillman
:date:
    2017-09-22 17:12 (JST)


------

Remove invalid relations mangled during import

:commit:
    `a455a72 <https://github.com/Juris-M/zotero/commit/a455a7253491af9d61502a3b6c36f4e76c0f00e0>`_
:author:
    Dan Stillman
:date:
    2017-09-22 14:22 (JST)

Not sure if this occurred for our own translators, but it addresses
items created from #1282.


------

Fix relations import via translators

:commit:
    `0d3d432 <https://github.com/Juris-M/zotero/commit/0d3d4323b5b457d119228df66707257b985a02d8>`_
:author:
    Dan Stillman
:date:
    2017-09-22 14:02 (JST)

Fixes #1282


------

Restrict relation predicates to letters and colons for now

:commit:
    `10cae22 <https://github.com/Juris-M/zotero/commit/10cae22c55accc7ce4843ac860cd1c9b7293e033>`_
:author:
    Dan Stillman
:date:
    2017-09-22 14:01 (JST)


------

Restore related-items tests for Zotero.Translate.ItemGetter

:commit:
    `d80aa97 <https://github.com/Juris-M/zotero/commit/d80aa97ebd777ac8c1e9b4e495fd8375e82efd68>`_
:author:
    Dan Stillman
:date:
    2017-09-22 12:03 (JST)


------

Update version

:commit:
    `1777fd1 <https://github.com/Juris-M/zotero/commit/1777fd16f02dc0d4930f82b62218d223818f812c>`_
:author:
    Dan Stillman
:date:
    2017-09-22 07:21 (JST)


------

Update citeproc-js to 1.1.178

:commit:
    `241e596 <https://github.com/Juris-M/zotero/commit/241e59668035a3c2d25a4a39a1be4c49ed67c50e>`_
:author:
    Dan Stillman
:date:
    2017-09-22 04:47 (JST)


------

Fix sync errors from remote item referencing deleted local collection

:commit:
    `d81e2a5 <https://github.com/Juris-M/zotero/commit/d81e2a5cf0d6612cf9a2fafaa8da48cbd2f7ea9f>`_
:author:
    Dan Stillman
:date:
    2017-09-20 18:32 (JST)


------

Fix getAsync() integer warning when clicking on related item

:commit:
    `85d7c01 <https://github.com/Juris-M/zotero/commit/85d7c01c8582ba8ea7dad08c9813cb00d1b927e9>`_
:author:
    Dan Stillman
:date:
    2017-09-20 16:35 (JST)


------

Fix editing in classic citation window (broken by 2901174ba3)

:commit:
    `c7639f3 <https://github.com/Juris-M/zotero/commit/c7639f328fa15dd8606340cbb274003c1aa3fea2>`_
:author:
    Dan Stillman
:date:
    2017-09-20 16:30 (JST)

This is (hopefully) a better fix for selection issues than 2901174ba3. A
reference to the collectionTreeView is stored in a `view` property on
the collectionTreeRow, and when an itemTreeView is initialized and
passed a collectionTreeRow it assigns itself to an `itemTreeView`
property on the row's view.


------

Update version

:commit:
    `67ddc20 <https://github.com/Juris-M/zotero/commit/67ddc202d9d9d6a18c2480349f37965adf3c43d6>`_
:author:
    Dan Stillman
:date:
    2017-09-20 16:35 (JST)


------

Check for invalid certificate in Zotero.HTTP.request()

:commit:
    `365e582 <https://github.com/Juris-M/zotero/commit/365e58249dc44bee22613cd3be73b6010d101ee0>`_
:author:
    Dan Stillman
:date:
    2017-09-20 13:19 (JST)

We were checking for this in the sync API client, but that didn't apply
to Amazon S3 for ZFS.


------

Revert "Use eraseTx() instead of erase() when deleting saved search"

:commit:
    `a858368 <https://github.com/Juris-M/zotero/commit/a8583686428a7907f09ded48f6f89aa3e5f4184a>`_
:author:
    Dan Stillman
:date:
    2017-09-20 12:47 (JST)

eraseTx() isn't actually valid in this context.

This reverts commit 103c16a56328cb789c73c304e9f1391041983211.


------

Close import progress window on error

:commit:
    `8efbfb7 <https://github.com/Juris-M/zotero/commit/8efbfb7c74141dcfd7f22347ea580f023b6232c1>`_
:author:
    Dan Stillman
:date:
    2017-09-19 15:35 (JST)

Fixes https://github.com/retorquere/zotero-better-bibtex/issues/719


------

Update version

:commit:
    `fbca2e5 <https://github.com/Juris-M/zotero/commit/fbca2e5c5274f8d3abf8385324b77baee6ea59d3>`_
:author:
    Dan Stillman
:date:
    2017-09-19 10:20 (JST)


------

Better isolate collectionTreeView test

:commit:
    `459e264 <https://github.com/Juris-M/zotero/commit/459e26490afeeac1ba3bfa7444ead49448aa7897>`_
:author:
    Dan Stillman
:date:
    2017-09-19 06:45 (JST)


------

Fix error deleting collection after emptying trash

:commit:
    `afc7afe <https://github.com/Juris-M/zotero/commit/afc7afeb9cc98a435251df62a371fdc979c391b4>`_
:author:
    Dan Stillman
:date:
    2017-09-19 06:03 (JST)

Follow-up to c442daedce
Fixes #1317


------

Fix non-integer warning when purging ids from sourceList.persist

:commit:
    `49506b6 <https://github.com/Juris-M/zotero/commit/49506b6d94318652704fa7a4234e698b6cae792e>`_
:author:
    Dan Stillman
:date:
    2017-09-19 06:02 (JST)


------

Update locate engine download code

:commit:
    `d83d70e <https://github.com/Juris-M/zotero/commit/d83d70eb5ce2c948220f9e6e292795a051552403>`_
:author:
    Dan Stillman
:date:
    2017-09-18 15:26 (JST)

Asyncify, make JSON load failures not fatal, and simplify icon download
code (which also fixes download of CrossRef icon, which was failing for
some reason).


------

Add sniffer entry for .ico files

:commit:
    `6d53839 <https://github.com/Juris-M/zotero/commit/6d53839fbca8654bcc196651e897a7ea778f1584>`_
:author:
    Dan Stillman
:date:
    2017-09-18 15:26 (JST)


------

Update submodules

:commit:
    `d2a33f2 <https://github.com/Juris-M/zotero/commit/d2a33f26133cd09fe2d34a9e67902e579a5166e1>`_
:author:
    Dan Stillman
:date:
    2017-09-18 14:37 (JST)


------

Update locales from Transifex

:commit:
    `8ebff89 <https://github.com/Juris-M/zotero/commit/8ebff89c1cd9fbeea00842d19e2d658ae909731c>`_
:author:
    Dan Stillman
:date:
    2017-09-18 14:36 (JST)


------

Update automatic trash emptying after 3872e646ac7

:commit:
    `fb61819 <https://github.com/Juris-M/zotero/commit/fb61819f6b0942fbd6df50e2827b8168c43156fd>`_
:author:
    Dan Stillman
:date:
    2017-09-16 13:44 (JST)

And restore 'limit' parameter used for auto-empty


------

Fix sync event listener after 3872e646ac

:commit:
    `e25af42 <https://github.com/Juris-M/zotero/commit/e25af42ef30c85aa645a346af4c109ca077e7f10>`_
:author:
    Dan Stillman
:date:
    2017-09-16 10:02 (JST)


------

Fix test failure after 8215ba7a1d5c

:commit:
    `cc04ddb <https://github.com/Juris-M/zotero/commit/cc04ddbe4d3c18f40371448beaa31efe5f59b6f2>`_
:author:
    Dan Stillman
:date:
    2017-09-16 09:42 (JST)


------

Update submodules

:commit:
    `235d7c8 <https://github.com/Juris-M/zotero/commit/235d7c8dae4b661134b885f1bc1eea330d3c83d1>`_
:author:
    Dan Stillman
:date:
    2017-09-16 09:25 (JST)


------

Speed up emptying trash

:commit:
    `3872e64 <https://github.com/Juris-M/zotero/commit/3872e646ac7fded1137824daa09e00c4ad82dd75>`_
:author:
    Dan Stillman
:date:
    2017-09-16 09:20 (JST)

Shows a progress meter, which allows for larger chunks and fewer
refreshes, avoids unnecessary updating of parent items that are
being deleted anyway, and skip re-sorting of modified items in the
trash.

Closes #1292, Emptying trash is slow


------

Update locales from Transifex

:commit:
    `7935d01 <https://github.com/Juris-M/zotero/commit/7935d01a1cb5c8caa494e532fdc14e569fac75f6>`_
:author:
    Dan Stillman
:date:
    2017-09-15 13:51 (JST)


------

Crash Zotero on note-saving error

:commit:
    `8215ba7 <https://github.com/Juris-M/zotero/commit/8215ba7a1d5c850e8e2382f56e8af8d6b32b2df9>`_
:author:
    Dan Stillman
:date:
    2017-09-15 13:46 (JST)

Closes #1277, Crash note if not saving properly


------

Fix display of data dir in migration error message

:commit:
    `18c62be <https://github.com/Juris-M/zotero/commit/18c62be6a49a3e17b8dd251319fedbfbac5d996b>`_
:author:
    Dan Stillman
:date:
    2017-09-15 07:49 (JST)

When migrating prefs from Zotero for Firefox, the prefs specified a
custom data dir, and that directory was missing, the "Previous
directory:" line was blank.


------

Fix "SyntaxError: unterminated string literal" on first run

:commit:
    `9395af8 <https://github.com/Juris-M/zotero/commit/9395af86f76c71883a766986e91ec3b2cc025846>`_
:author:
    Dan Stillman
:date:
    2017-09-15 07:48 (JST)

This could happen when migrating prefs from Firefox when the prefs.js
file included a corrupted line.


------

Remove jm-sh from .gitmodules

:commit:
    `350e958 <https://github.com/Juris-M/zotero/commit/350e958132d0ba64b0b7d57217024227e4f7a0a4>`_
:author:
    Frank Bennett
:date:
    2017-09-15 02:06 (JST)


------

Use eraseTx() instead of erase() when deleting saved search

:commit:
    `103c16a <https://github.com/Juris-M/zotero/commit/103c16a56328cb789c73c304e9f1391041983211>`_
:author:
    Dan Stillman
:date:
    2017-09-13 14:02 (JST)


------

Update collection cache after "Delete collection and items…"

:commit:
    `c442dae <https://github.com/Juris-M/zotero/commit/c442daedcec41a47a232d511053773e887818798>`_
:author:
    Dan Stillman
:date:
    2017-09-13 14:01 (JST)

Fixes #1314


------

Add debugging for userID change

:commit:
    `5ec7c97 <https://github.com/Juris-M/zotero/commit/5ec7c97f306f537bdd1b801f116380d337af1085>`_
:author:
    Dan Stillman
:date:
    2017-09-13 05:22 (JST)


------

Merge new English strings

:commit:
    `892d4fb <https://github.com/Juris-M/zotero/commit/892d4fb5da5401bead412f4aeb9a1c7b7a4f9832>`_
:author:
    Dan Stillman
:date:
    2017-09-12 15:36 (JST)


------

Show better error message if data dir can't be created

:commit:
    `a47c332 <https://github.com/Juris-M/zotero/commit/a47c332895519b77164599d39bea14563b764aef>`_
:author:
    Dan Stillman
:date:
    2017-09-12 15:35 (JST)


------

Update version

:commit:
    `e669bf0 <https://github.com/Juris-M/zotero/commit/e669bf03b0901232038aaa740f77d24386f65ae6>`_
:author:
    Dan Stillman
:date:
    2017-09-12 15:01 (JST)


------

Merge new English strings

:commit:
    `1cab2ba <https://github.com/Juris-M/zotero/commit/1cab2ba5fa0851e542492b50da59ccd357f4dec6>`_
:author:
    Dan Stillman
:date:
    2017-09-11 16:53 (JST)


------

Allow setting data directory via -datadir command-line flag

:commit:
    `e9439c9 <https://github.com/Juris-M/zotero/commit/e9439c978b493eb3b7b8cb78e52288f17c86646f>`_
:author:
    Dan Stillman
:date:
    2017-09-11 16:49 (JST)

Can be an absolute path or 'profile' to use 'zotero' subdirectory of
profile directory as in earlier versions (but which won't be treated as
a legacy location eligible for migration)

Closes #1305


------

Filter stack displayed in startup error dialog

:commit:
    `d8d9758 <https://github.com/Juris-M/zotero/commit/d8d9758f27f9b0b081b9302512b11cfc817c9197>`_
:author:
    Dan Stillman
:date:
    2017-09-11 16:52 (JST)


------

Fix "undefined" for stack when a string is passed as Zotero.startupError

:commit:
    `48778b5 <https://github.com/Juris-M/zotero/commit/48778b5d50d8d84b8b383000f517867f6b25c1a5>`_
:author:
    Dan Stillman
:date:
    2017-09-11 16:52 (JST)


------

Filter 'XPCOMUtils.jsm' lines from stack traces

:commit:
    `33128d1 <https://github.com/Juris-M/zotero/commit/33128d1f5924c1f3dac3c8dac1f8219d282c6372>`_
:author:
    Dan Stillman
:date:
    2017-09-11 16:51 (JST)


------

Update locales from Transifex

:commit:
    `c6e6cb6 <https://github.com/Juris-M/zotero/commit/c6e6cb639cb6f882a8017835aa76b4b294e321b5>`_
:author:
    Dan Stillman
:date:
    2017-09-11 09:34 (JST)


------

Pass nonmatching court keys through when rendering in processor

:commit:
    `2ff62c5 <https://github.com/Juris-M/zotero/commit/2ff62c55f862124db6434c891fb13ffe3f837e54>`_
:author:
    Frank Bennett
:date:
    2017-09-11 06:41 (JST)


------

Nonmatch text saves to court field. Bump version

:commit:
    `6a4ef46 <https://github.com/Juris-M/zotero/commit/6a4ef46835ad7f324a914392aa279cd577fe6edc>`_
:author:
    Frank Bennett
:date:
    2017-09-11 05:49 (JST)


------

Try for nonmatching field content, take 5

:commit:
    `c0c9dc9 <https://github.com/Juris-M/zotero/commit/c0c9dc93bf78d2d3aa5a121ecd9e863d827459b8>`_
:author:
    Frank Bennett
:date:
    2017-09-11 04:17 (JST)


------

Try for nonmatching field content, take 4

:commit:
    `db2ac74 <https://github.com/Juris-M/zotero/commit/db2ac748a5a1c439b461f7442a1efbd958fa0b9d>`_
:author:
    Frank Bennett
:date:
    2017-09-11 04:05 (JST)


------

Try for nonmatching field content, take 3

:commit:
    `b7c14b4 <https://github.com/Juris-M/zotero/commit/b7c14b4ea494b90e86213bcb6be891d309719aed>`_
:author:
    Frank Bennett
:date:
    2017-09-10 23:14 (JST)


------

Try again for nonmatch content, take 3

:commit:
    `ca91b3b <https://github.com/Juris-M/zotero/commit/ca91b3b2f5666fd620db278eefd5e5e4dc5baaf6>`_
:author:
    Frank Bennett
:date:
    2017-09-10 22:02 (JST)


------

Try again for nonmatch content, take 2

:commit:
    `6ad54dd <https://github.com/Juris-M/zotero/commit/6ad54dda665c776ad675893ca1bd2c599116ba9a>`_
:author:
    Frank Bennett
:date:
    2017-09-10 21:56 (JST)


------

Try again for nonmatch content

:commit:
    `dd9404b <https://github.com/Juris-M/zotero/commit/dd9404bb6d1bdb31a5c0121e7a7dd6a262e0fec2>`_
:author:
    Frank Bennett
:date:
    2017-09-10 21:31 (JST)


------

Try simply not forcing select to allow non-matching content

:commit:
    `4742ef8 <https://github.com/Juris-M/zotero/commit/4742ef84262e2b1dc33eb04fa36c7fa81a7be2b8>`_
:author:
    Frank Bennett
:date:
    2017-09-10 18:30 (JST)


------

Fix obvious bug in new court name selection code

:commit:
    `72bdd8e <https://github.com/Juris-M/zotero/commit/72bdd8ecdc767d4adad45976e9e11621512a83ca>`_
:author:
    Frank Bennett
:date:
    2017-09-10 17:03 (JST)


------

Continue after failure in Add Item by Identifier

:commit:
    `64e840e <https://github.com/Juris-M/zotero/commit/64e840e418d6a9a7d14739245833369f7172c01a>`_
:author:
    Dan Stillman
:date:
    2017-09-10 16:38 (JST)

This should give better feedback when some identifiers fail, but for now
restore 4.0 behavior.

Also add items by identifier in order, not reverse order


------

Allow non-listed court values

:commit:
    `8a7fdcd <https://github.com/Juris-M/zotero/commit/8a7fdcd5d84fecc0e06c8380d359858d335f4a33>`_
:author:
    Frank Bennett
:date:
    2017-09-10 16:41 (JST)


------

Fix intermittent item selection failure

:commit:
    `2901174 <https://github.com/Juris-M/zotero/commit/2901174ba335cfd6d7eb0a1670be3ace78d52082>`_
:author:
    Dan Stillman
:date:
    2017-09-10 16:18 (JST)


------

Hack in unions for each call to itemData and itemCreators (isNot searches failed).

:commit:
    `b1f29aa <https://github.com/Juris-M/zotero/commit/b1f29aa788149132b0ee483e4e4a2f7332960174>`_
:author:
    Frank Bennett
:date:
    2017-09-10 10:30 (JST)


------

Fix sqlParams

:commit:
    `91c5c90 <https://github.com/Juris-M/zotero/commit/91c5c902c134d74f698b01bf96a6d4699c774507>`_
:author:
    Frank Bennett
:date:
    2017-09-10 09:43 (JST)


------

Hack to include variants in search results

:commit:
    `d9b56a6 <https://github.com/Juris-M/zotero/commit/d9b56a6a0771906032aa5b8cf24b089b9e9f619b>`_
:author:
    Frank Bennett
:date:
    2017-09-10 09:34 (JST)


------

Bump version

:commit:
    `9baf3fa <https://github.com/Juris-M/zotero/commit/9baf3fa73dcba55c5e662f01a91d3247cae1bb6b>`_
:author:
    Frank Bennett
:date:
    2017-09-09 15:00 (JST)


------

Tweak jurisdiction-depth param handing

:commit:
    `074977b <https://github.com/Juris-M/zotero/commit/074977b2a77cd8cd786e47a85895cacc91551cda>`_
:author:
    Frank Bennett
:date:
    2017-09-09 11:13 (JST)


------

Update processor. Add jurisdiction-depth attribute.

:commit:
    `3e549f5 <https://github.com/Juris-M/zotero/commit/3e549f589c12d22dcf55fb408128dd71442d9bb9>`_
:author:
    Frank Bennett
:date:
    2017-09-09 10:32 (JST)


------

Update translators

:commit:
    `f9f0c5a <https://github.com/Juris-M/zotero/commit/f9f0c5ab36909536f91c4ab96114a4431b4d2687>`_
:author:
    Frank Bennett
:date:
    2017-09-08 21:01 (JST)


------

Fix syntax error in auto-complete SQL, take 2

:commit:
    `509c822 <https://github.com/Juris-M/zotero/commit/509c8227b3784323dd8d7a9759a129eccba64d19>`_
:author:
    Frank Bennett
:date:
    2017-09-08 21:00 (JST)


------

Fix syntax error in auto-search SQL

:commit:
    `73d9575 <https://github.com/Juris-M/zotero/commit/73d9575d124cd07f8dd58c6758cdda40de994efb>`_
:author:
    Frank Bennett
:date:
    2017-09-08 18:26 (JST)


------

Recognize discrete country variable in processor derived from jurisdiction

:commit:
    `c2a9bc5 <https://github.com/Juris-M/zotero/commit/c2a9bc5fe666d5006c42d6e89fce0cb2d04b22d6>`_
:author:
    Frank Bennett
:date:
    2017-09-08 17:45 (JST)


------

Update citeproc-js

:commit:
    `32b9c33 <https://github.com/Juris-M/zotero/commit/32b9c33778d0f1c9d75ce1825259e871044395fc>`_
:author:
    Frank Bennett
:date:
    2017-09-08 15:10 (JST)


------

Bypass cache by default in Zotero.Utilities.Internal.saveURI()

:commit:
    `d271683 <https://github.com/Juris-M/zotero/commit/d2716839680cb6857db2b1e00fe310f92e7717ca>`_
:author:
    Dan Stillman
:date:
    2017-09-08 12:54 (JST)


------

Simplify abbrev key normalization, cover names

:commit:
    `bcc39e2 <https://github.com/Juris-M/zotero/commit/bcc39e257d073fd419c7ccf6e26431c031a87a3b>`_
:author:
    Frank Bennett
:date:
    2017-09-08 10:27 (JST)


------

Fix syntax error

:commit:
    `2626973 <https://github.com/Juris-M/zotero/commit/262697380f516955fce367edf4b80bdf81905aea>`_
:author:
    Frank Bennett
:date:
    2017-09-08 08:03 (JST)


------

Update translators

:commit:
    `de548c5 <https://github.com/Juris-M/zotero/commit/de548c5f0c1addbf48d7d42ddf57d93d8c8ca85b>`_
:author:
    Frank Bennett
:date:
    2017-09-08 07:25 (JST)


------

Normalize abbreviation keys

:commit:
    `904b4ca <https://github.com/Juris-M/zotero/commit/904b4cac66c6dd9e900d329b8f49b3ac9852b4a3>`_
:author:
    Frank Bennett
:date:
    2017-09-08 07:24 (JST)


------

Bump version

:commit:
    `e226f18 <https://github.com/Juris-M/zotero/commit/e226f18fa2909b6831c416b15fc57f4180acbfa8>`_
:author:
    Frank Bennett
:date:
    2017-09-05 07:27 (JST)


------

Update locales

:commit:
    `efa481f <https://github.com/Juris-M/zotero/commit/efa481f4ff81865d28dfce54b8fb4aa329a1ccc1>`_
:author:
    Frank Bennett
:date:
    2017-09-03 06:48 (JST)


------

Adjust version compatibility in update.rdf (not sure if this is relevant now)

:commit:
    `8d882af <https://github.com/Juris-M/zotero/commit/8d882af0367df41b447732c987af5d4ae0808e15>`_
:author:
    Frank Bennett
:date:
    2017-09-03 06:29 (JST)


------

Change version string in install.rdf

:commit:
    `3e9ecec <https://github.com/Juris-M/zotero/commit/3e9ecec8ea8cbf89e622ba6c1b86dbfe92eb870f>`_
:author:
    Frank Bennett
:date:
    2017-09-02 16:15 (JST)


------

Remove debug lines

:commit:
    `5248b08 <https://github.com/Juris-M/zotero/commit/5248b08de0d0f0b82cd1bf45626c9f4b01d9b909>`_
:author:
    Dan Stillman
:date:
    2017-09-02 14:38 (JST)


------

Don't purge data tables until after schema update

:commit:
    `1100015 <https://github.com/Juris-M/zotero/commit/1100015d2c0e5647f09e40d86df27c429f8e5471>`_
:author:
    Dan Stillman
:date:
    2017-09-02 06:46 (JST)

It's no longer necessary to do this before syncing, since tags and
creators aren't first-class objects.


------

Fix potential failure with full-text phrase search

:commit:
    `69c27cd <https://github.com/Juris-M/zotero/commit/69c27cd8a7dd0dda989ee3aecc3fd76a11841fe4>`_
:author:
    Dan Stillman
:date:
    2017-09-02 06:44 (JST)

Phrase searches weren't scoped to the current library, so they could
return unloaded items in other libraries and cause the search to fail.


------

Simplify Zotero.ItemTreeView.prototype.getSortedItems()

:commit:
    `fd5c48a <https://github.com/Juris-M/zotero/commit/fd5c48ac513fb5481997327e335e21f3adbf2697>`_
:author:
    Dan Stillman
:date:
    2017-09-02 02:21 (JST)


------

Fix Create Bib for saved searches

:commit:
    `ed6d628 <https://github.com/Juris-M/zotero/commit/ed6d628f4e1af57578f4f42b47f886a996d8ca36>`_
:author:
    Dan Stillman
:date:
    2017-09-02 02:21 (JST)


------

Do not attempt to edit sourt in Travis then

:commit:
    `ad9ba1e <https://github.com/Juris-M/zotero/commit/ad9ba1e5b85e19cd04b251046df2217b34a80de0>`_
:author:
    Frank Bennett
:date:
    2017-09-01 08:44 (JST)


------

More jiggery-pokery around hidden variables

:commit:
    `63f0200 <https://github.com/Juris-M/zotero/commit/63f0200d4ea38a252b467da3c4a73748935a7636>`_
:author:
    Frank Bennett
:date:
    2017-09-01 08:12 (JST)


------

Try moving vars back into .travis.yml

:commit:
    `260863c <https://github.com/Juris-M/zotero/commit/260863c2806587380f16d203dc10414496118a05>`_
:author:
    Frank Bennett
:date:
    2017-09-01 07:28 (JST)


------

Extend another timeout value

:commit:
    `e80f32b <https://github.com/Juris-M/zotero/commit/e80f32bf7488718ad995236e8182d405fe439a5c>`_
:author:
    Frank Bennett
:date:
    2017-08-31 22:05 (JST)


------

Fix path, reposition sed call

:commit:
    `b384317 <https://github.com/Juris-M/zotero/commit/b3843175fea306c91066c86fe46b151f1720e4ae>`_
:author:
    Frank Bennett
:date:
    2017-08-31 20:03 (JST)


------

Stir in CL key at build time

:commit:
    `7bf51c7 <https://github.com/Juris-M/zotero/commit/7bf51c766a4c641a1f67131dbaa49aba918912c8>`_
:author:
    Frank Bennett
:date:
    2017-08-31 19:26 (JST)


------

Fix regression in 05d74c4cac

:commit:
    `01ecff8 <https://github.com/Juris-M/zotero/commit/01ecff8e2b248f446e35c1c20f15bfcbf8fac610>`_
:author:
    Dan Stillman
:date:
    2017-08-31 07:46 (JST)


------

Fix test failure after 94c4445475

:commit:
    `91ef561 <https://github.com/Juris-M/zotero/commit/91ef56147446e6147d0ad97d5f0317400f99e5a8>`_
:author:
    Dan Stillman
:date:
    2017-08-31 07:22 (JST)

If the styled textbox (i.e., TinyMCE) isn't initialized, .value now
returns null instead of throwing.


------

Don't load note/attachments counts as primary data

:commit:
    `05d74c4 <https://github.com/Juris-M/zotero/commit/05d74c4cac675565624b7854012f55f5ca8781dd>`_
:author:
    Dan Stillman
:date:
    2017-08-31 07:06 (JST)

Zotero.Item::numNotes()/numAttachments() now require 'childItems' to
have been loaded.

Fixes #1301, Slow startup with many items in trash


------

Allow parentID in importFileAttachment() test support function

:commit:
    `687f86a <https://github.com/Juris-M/zotero/commit/687f86af714f1289699030a14d6eb716a22bcf71>`_
:author:
    Dan Stillman
:date:
    2017-08-31 06:23 (JST)

The Zotero.Attachments functions only take parentItemID, but
createDataObject() takes parentID.


------

Fix restart error moving away from note that hadn't finished loading

:commit:
    `94c4445 <https://github.com/Juris-M/zotero/commit/94c44454759e3c047a53ca1ca077b2021865a9f9>`_
:author:
    Dan Stillman
:date:
    2017-08-31 06:22 (JST)


------

Fix letter casing of repo name

:commit:
    `825599a <https://github.com/Juris-M/zotero/commit/825599ae8c175706c84e3e0eddbde4b032f00420>`_
:author:
    Frank Bennett
:date:
    2017-08-30 21:27 (JST)


------

Fix slug name

:commit:
    `a396d7b <https://github.com/Juris-M/zotero/commit/a396d7b7ba2533af539c00f99d7f4f06fc7e5e92>`_
:author:
    Frank Bennett
:date:
    2017-08-30 20:55 (JST)


------

Revert secure env setting to Zotero original. Secret key via web UI now.

:commit:
    `68d2feb <https://github.com/Juris-M/zotero/commit/68d2febd390aa895a94f2ab4c2ce83975d06c723>`_
:author:
    Frank Bennett
:date:
    2017-08-30 17:44 (JST)


------

Extend callback timeout

:commit:
    `9d2f5e8 <https://github.com/Juris-M/zotero/commit/9d2f5e8b372b6fd7f64861bc50a3dab0b5653b9b>`_
:author:
    Frank Bennett
:date:
    2017-08-30 13:59 (JST)


------

Extended timeouts

:commit:
    `2df8069 <https://github.com/Juris-M/zotero/commit/2df80695ee3a6275f566cfb92deb55a0dc5e4243>`_
:author:
    Frank Bennett
:date:
    2017-08-30 13:42 (JST)


------

Weird tweak in fulltext.js

:commit:
    `7f215d4 <https://github.com/Juris-M/zotero/commit/7f215d4f626f42300e8526df61e6f3969336cfc0>`_
:author:
    Frank Bennett
:date:
    2017-08-30 09:47 (JST)


------

Fix bugs in loading of test versions of language/jurisdiction datasets

:commit:
    `f910b97 <https://github.com/Juris-M/zotero/commit/f910b973d3da4b8db7c364df34bddae35d403453>`_
:author:
    Frank Bennett
:date:
    2017-08-30 08:31 (JST)


------

Use minimal lang/jurisd data everywhere, to see what happens

:commit:
    `72b9d96 <https://github.com/Juris-M/zotero/commit/72b9d96ddae167d0eec1528ceb8c65b4e0956d66>`_
:author:
    Frank Bennett
:date:
    2017-08-30 05:17 (JST)


------

Update locales from Transifex

:commit:
    `000e7f9 <https://github.com/Juris-M/zotero/commit/000e7f9744b1ce67984167cd33c7a7c048760df5>`_
:author:
    Dan Stillman
:date:
    2017-08-24 08:54 (JST)


------

Combine Zotero and Juris-M data load overrides

:commit:
    `6f1a3b6 <https://github.com/Juris-M/zotero/commit/6f1a3b68d14192a635d2ff48400eceb7260c6e35>`_
:author:
    Frank Bennett
:date:
    2017-08-29 20:55 (JST)


------

Add China to minimal language dataset. China is everywhere.

:commit:
    `6a7c592 <https://github.com/Juris-M/zotero/commit/6a7c592de358137644b4fa6a0214e2458ef538c4>`_
:author:
    Frank Bennett
:date:
    2017-08-29 17:37 (JST)


------

Add more language tag descriptors needed for testing

:commit:
    `b027b4e <https://github.com/Juris-M/zotero/commit/b027b4e350e3923db5b011ef4f5fdfac57313c3e>`_
:author:
    Frank Bennett
:date:
    2017-08-29 17:18 (JST)


------

Add GB to minimal tag data used for testing

:commit:
    `9c198bc <https://github.com/Juris-M/zotero/commit/9c198bcf49c3e630ffaaee7134394233459567dc>`_
:author:
    Frank Bennett
:date:
    2017-08-29 15:29 (JST)


------

Install minimal language data only by default, for testing

:commit:
    `ac3188c <https://github.com/Juris-M/zotero/commit/ac3188c24df6fd483b9f69acdc9da5601145a547>`_
:author:
    Frank Bennett
:date:
    2017-08-29 15:21 (JST)


------

Amend tests to reflect Juris-M behavior

:commit:
    `c5b8186 <https://github.com/Juris-M/zotero/commit/c5b81866dbddad0a9455d0944c861564332baf0d>`_
:author:
    Frank Bennett
:date:
    2017-08-29 10:54 (JST)


------

Omit jurisdiction data with skipBundledFiles, for testing

:commit:
    `7423ba1 <https://github.com/Juris-M/zotero/commit/7423ba1f5c8fc0ccb0a28142d55ffde128528e0d>`_
:author:
    Frank Bennett
:date:
    2017-08-29 08:13 (JST)


------

Trivial change to trigger Travis CI

:commit:
    `4465597 <https://github.com/Juris-M/zotero/commit/4465597ef92c737efbf7bf50fe4353eb45cb2c48>`_
:author:
    Frank Bennett
:date:
    2017-08-29 07:37 (JST)


------

Adjust tests to follow Juris-M behavior

:commit:
    `6b7e5eb <https://github.com/Juris-M/zotero/commit/6b7e5ebce860183267332108a9d4d8f9c05f1d4f>`_
:author:
    Frank Bennett
:date:
    2017-08-29 01:00 (JST)


------

Adjust test result to follow Juris-M behavior

:commit:
    `52a8188 <https://github.com/Juris-M/zotero/commit/52a8188a8e7e47ab912bb676c45a89070cf4ccbf>`_
:author:
    Frank Bennett
:date:
    2017-08-29 00:24 (JST)


------

Align chrome.manifest content with Zotero

:commit:
    `1a76917 <https://github.com/Juris-M/zotero/commit/1a7691779ac82ac8088f79a9b7392d5ce8c4391c>`_
:author:
    Frank Bennett
:date:
    2017-08-28 09:56 (JST)


------

Set travis params

:commit:
    `46caac2 <https://github.com/Juris-M/zotero/commit/46caac20e705fe5112ee0fca964b9b731a125fc9>`_
:author:
    Frank Bennett
:date:
    2017-08-27 20:17 (JST)


------

Merge branch 'jurism-5.0' of github.com:Juris-M/zotero into jurism-5.0

:commit:
    `a5f69d7 <https://github.com/Juris-M/zotero/commit/a5f69d7b7126f51a57cfe8d09ad500e558d27a97>`_
:author:
    Frank Bennett
:date:
    2017-08-26 11:54 (JST)


------

Merge pull request #1299 from Juris-M/z-abbrevs-filter-style-edit-hook

:commit:
    `b9b1c0c <https://github.com/Juris-M/zotero/commit/b9b1c0c5086c7c0e5a7c19352165a3a8a691d1d9>`_
:author:
    Dan Stillman
:date:
    2017-08-25 10:15 (JST)

Expose styleEngine in csledit.js, for Abbreviation Filter

------

Merge branch 'jurism-6.0' of https://github.com/juris-m/zotero into jurism-5.0

:commit:
    `4eaaa12 <https://github.com/Juris-M/zotero/commit/4eaaa123bd1a610bd51a627fdecc991a964cdf29>`_
:author:
    Frank Bennett
:date:
    2017-08-25 09:41 (JST)


------

Add FIX_SYMLINKS.sh script

:commit:
    `a5cfcdf <https://github.com/Juris-M/zotero/commit/a5cfcdf1ce7105d3b89d8446f72ac97e11372fd0>`_
:author:
    Frank Bennett
:date:
    2017-08-25 09:40 (JST)


------

Update locales from upstream Zotero

:commit:
    `e8503f8 <https://github.com/Juris-M/zotero/commit/e8503f8c669cf2980e3691352a66a55b79b6194e>`_
:author:
    Frank Bennett
:date:
    2017-08-25 09:33 (JST)


------

Merge upstream Zotero to 5.0.17 tag

:commit:
    `89fe034 <https://github.com/Juris-M/zotero/commit/89fe03412cc8fe58fc657ce6356b6da1d276a689>`_
:author:
    Frank Bennett
:date:
    2017-08-25 07:14 (JST)


------

Source files for icon

:commit:
    `eafadee <https://github.com/Juris-M/zotero/commit/eafadeedc9e71d4e907ead15aab8534953d609eb>`_
:author:
    Frank Bennett
:date:
    2017-08-25 06:49 (JST)


------

Expose styleEngine in csledit.js, for Abbreviation Filter

:commit:
    `b0c0cd6 <https://github.com/Juris-M/zotero/commit/b0c0cd6e0ca1c92e062d2a5facf354e1c485f026>`_
:author:
    Frank Bennett
:date:
    2017-08-24 23:26 (JST)


------

Update citeproc-js to 1.1.177

:commit:
    `a15b23e <https://github.com/Juris-M/zotero/commit/a15b23e3538154b11df4fad3342fd60066a07a96>`_
:author:
    Dan Stillman
:date:
    2017-08-23 18:01 (JST)


------

Fix error relocating to filename with different Unicode normalization

:commit:
    `f4b73d2 <https://github.com/Juris-M/zotero/commit/f4b73d22b832a1eeae32c1873e66318f4aeea882>`_
:author:
    Dan Stillman
:date:
    2017-08-23 18:00 (JST)


------

Update version

:commit:
    `b3043c9 <https://github.com/Juris-M/zotero/commit/b3043c98ab28c3b1f9fe411cbac1b186ba376be3>`_
:author:
    Dan Stillman
:date:
    2017-08-22 22:30 (JST)


------

Update locales from Transifex

:commit:
    `e632f1c <https://github.com/Juris-M/zotero/commit/e632f1c84dc680a09204b02b30cdd54e73c1095f>`_
:author:
    Dan Stillman
:date:
    2017-08-22 19:27 (JST)


------

Disable strict mode in citeproc-js for now

:commit:
    `1d19811 <https://github.com/Juris-M/zotero/commit/1d19811bd2b268450bef89022d787496298ebf9c>`_
:author:
    Dan Stillman
:date:
    2017-08-22 19:18 (JST)


------

Update citeproc-js to 1.1.175

:commit:
    `879ed11 <https://github.com/Juris-M/zotero/commit/879ed11b69e48b1cdd6dcab33753895350bd6243>`_
:author:
    Dan Stillman
:date:
    2017-08-22 19:18 (JST)


------

Update version

:commit:
    `8e36529 <https://github.com/Juris-M/zotero/commit/8e365298ba90576803d41da827d21fc0adc7f3dc>`_
:author:
    Dan Stillman
:date:
    2017-08-20 06:26 (JST)


------

Don't keep checking for lost Z4Fx data directory

:commit:
    `2919486 <https://github.com/Juris-M/zotero/commit/29194868183688da2c4fc98bc1d567e981bb98b7>`_
:author:
    Dan Stillman
:date:
    2017-08-20 06:47 (JST)


------

Remove unnecessary log line

:commit:
    `f45d561 <https://github.com/Juris-M/zotero/commit/f45d56113af3e0975581ce883feb43c680bf9d3a>`_
:author:
    Dan Stillman
:date:
    2017-08-20 06:36 (JST)


------

Only prompt for recently updated Z4Fx data directories

:commit:
    `0391569 <https://github.com/Juris-M/zotero/commit/0391569f4d6be0bcc6b84b0035aab327b0bb4f0a>`_
:author:
    Dan Stillman
:date:
    2017-08-20 06:30 (JST)


------

Add prompt to revert to Zotero for Firefox data directory

:commit:
    `267e316 <https://github.com/Juris-M/zotero/commit/267e3165a265d5ca0670f8b13281b167d94cbc90>`_
:author:
    Dan Stillman
:date:
    2017-08-20 06:17 (JST)

For people affected by migration bugs prior to 5.0.15


------

Update version

:commit:
    `2725d42 <https://github.com/Juris-M/zotero/commit/2725d423ed49d2e8804c043c192125af55bf6cb3>`_
:author:
    Dan Stillman
:date:
    2017-08-19 23:06 (JST)


------

Fix data directory migration if only Firefox profile directory

:commit:
    `d368c40 <https://github.com/Juris-M/zotero/commit/d368c4019a82cafffa312858a63affa6fdee93a6>`_
:author:
    Dan Stillman
:date:
    2017-08-19 22:58 (JST)


------

Update version

:commit:
    `bbfe4b9 <https://github.com/Juris-M/zotero/commit/bbfe4b92de26d9952cd35cc5f9accf27d0c73b05>`_
:author:
    Dan Stillman
:date:
    2017-08-19 22:23 (JST)


------

Fix accessDate when translators set CURRENT_TIMESTAMP

:commit:
    `6673c64 <https://github.com/Juris-M/zotero/commit/6673c64ac651c94637f126be63b9f2a3e5ab9776>`_
:author:
    Dan Stillman
:date:
    2017-08-19 22:21 (JST)

(But it also seems like we always do that automatically for web
translators, so I'm not sure why so many translators set that.)


------

Update version

:commit:
    `d92f566 <https://github.com/Juris-M/zotero/commit/d92f5669f3f432550156786b615830b4c345e382>`_
:author:
    Dan Stillman
:date:
    2017-08-19 21:48 (JST)


------

Update locales from Transifex

:commit:
    `2d9284b <https://github.com/Juris-M/zotero/commit/2d9284ba269d183441db129633dbe0e88f6146cf>`_
:author:
    Dan Stillman
:date:
    2017-08-19 21:45 (JST)


------

Make sure rootDocument is set in Zotero.Translate.Web.setDocument()

:commit:
    `de36a6e <https://github.com/Juris-M/zotero/commit/de36a6e83324700eacd44266ba374b5f61b2c07a>`_
:author:
    Dan Stillman
:date:
    2017-08-17 09:16 (JST)

For non-browser documents that we wrap, defaultView.top.document can be
undefined without being inaccessible.

Fixes regression from dae0986b9be


------

Update citeproc-js to 1.1.174

:commit:
    `871cbae <https://github.com/Juris-M/zotero/commit/871cbae499bd367950e3d0fbc5f84913b1aeb7cf>`_
:author:
    Dan Stillman
:date:
    2017-08-19 12:23 (JST)


------

Update version

:commit:
    `a65ae87 <https://github.com/Juris-M/zotero/commit/a65ae873e356b3961225a815646e868cb59bf83e>`_
:author:
    Dan Stillman
:date:
    2017-08-18 23:15 (JST)


------

Fix linked attachment base directory handling at drive root

:commit:
    `7386b37 <https://github.com/Juris-M/zotero/commit/7386b376f361b4e7fe4283b40f12c3368b8b8123>`_
:author:
    Dan Stillman
:date:
    2017-08-18 23:04 (JST)

The first letter of the relative path was being removed on save if the
base directory was set to the drive root (e.g. D:\ instead of D:\foo).


------

Update submodules

:commit:
    `acb990c <https://github.com/Juris-M/zotero/commit/acb990c75da2d4bca096401902cce22c5a0ac3f4>`_
:author:
    Dan Stillman
:date:
    2017-08-17 23:57 (JST)


------

Update locales from Transifex

:commit:
    `a4a786b <https://github.com/Juris-M/zotero/commit/a4a786bac676c06ee3187abe6eb75d17314a6e22>`_
:author:
    Dan Stillman
:date:
    2017-08-17 23:56 (JST)


------

Fix #1286, Show proper error messages for OS.File errors

:commit:
    `1efe54e <https://github.com/Juris-M/zotero/commit/1efe54e896da3a11ad4ad69b208ebe00c5d25368>`_
:author:
    Dan Stillman
:date:
    2017-08-17 22:42 (JST)


------

Use passed URL rather than doc.location in translator processDocuments

:commit:
    `da2dedf <https://github.com/Juris-M/zotero/commit/da2dedf7affd75b0f79c258b496bbc5ccbf794f2>`_
:author:
    Dan Stillman
:date:
    2017-08-17 00:58 (JST)

Outside of page contexts (e.g., from an XHR with responseType =
'document'), document.location is null.


------

Update locales from Transifex

:commit:
    `d1de8b7 <https://github.com/Juris-M/zotero/commit/d1de8b751a3b6594d18de404d18c461669a5cf0b>`_
:author:
    Dan Stillman
:date:
    2017-08-16 08:46 (JST)


------

Fix attachment-download test

:commit:
    `13cd84e <https://github.com/Juris-M/zotero/commit/13cd84e1be28ead41ad53fd0301db8c50675c39f>`_
:author:
    Dan Stillman
:date:
    2017-08-16 08:42 (JST)


------

Avoid XML Parsing Error for WebDAV requests that don't return Content-Type

:commit:
    `065bac3 <https://github.com/Juris-M/zotero/commit/065bac3b8ae4c0c621b93fe9217a6b3279b6930e>`_
:author:
    Dan Stillman
:date:
    2017-08-16 08:07 (JST)

If responseType isn't set and the response doesn't include a
Content-Type header, Firefox tries to parse the file as XML, and if the
file isn't XML it logs an "XML Parsing Error", which includes the
username and password.


------

Update password-hiding logic for malformed-XML XHR errors in reports

:commit:
    `db8bb34 <https://github.com/Juris-M/zotero/commit/db8bb3484d68f4f0d6482581f24741b402a889cd>`_
:author:
    Dan Stillman
:date:
    2017-08-16 07:38 (JST)


------

Don't log WebDAV Authorization header

:commit:
    `b171b15 <https://github.com/Juris-M/zotero/commit/b171b15d87fb41d62d60aa58acc33c04e3fbe8b4>`_
:author:
    Dan Stillman
:date:
    2017-08-16 07:37 (JST)


------

Restore Cut/Copy/Paste to note context menu

:commit:
    `dd0fafd <https://github.com/Juris-M/zotero/commit/dd0fafd41dd829fd8ff67c0987e95249b3229c48>`_
:author:
    Dan Stillman
:date:
    2017-08-16 06:46 (JST)


------

Fix "Client failed to connect to the D-BUS daemon" in Travis output

:commit:
    `70ade61 <https://github.com/Juris-M/zotero/commit/70ade61b75ffe4f057f2a70a296df935855b8a97>`_
:author:
    Dan Stillman
:date:
    2017-08-16 04:39 (JST)


------

Fix a cross-origin frame access error in Translate.Web.setDocument

:commit:
    `dae0986 <https://github.com/Juris-M/zotero/commit/dae0986b9bec5a2e1008fa3b38fba8d0fe57551c>`_
:author:
    Adomas Venčkauskas
:date:
    2017-08-15 21:36 (JST)


------

Changes imports from connector to save to selected collection

:commit:
    `a5a7df3 <https://github.com/Juris-M/zotero/commit/a5a7df328ac08de888a495677fe9e8735ad8b35d>`_
:author:
    Adomas Venčkauskas
:date:
    2017-08-15 17:14 (JST)

Closes #1289


------

Update version

:commit:
    `cee2e1d <https://github.com/Juris-M/zotero/commit/cee2e1d47afa522ec53576eaad88b498f1b8a9f2>`_
:author:
    Dan Stillman
:date:
    2017-08-15 07:37 (JST)


------

Fix <label class="text-link"/> in basic viewer (e.g., Add-ons pane)

:commit:
    `c31f0b6 <https://github.com/Juris-M/zotero/commit/c31f0b6b5ccecfa5a91e7fefa4232a7905c92097>`_
:author:
    Dan Stillman
:date:
    2017-08-15 07:36 (JST)

I'm not sure when this stopped working, or whether the Add-ons pane was
in the basic viewer before, but that fixes it.


------

Fix error refreshing missing citation without name part

:commit:
    `8797c7f <https://github.com/Juris-M/zotero/commit/8797c7f6804ee1f2127436982acf9b5fd4db6636>`_
:author:
    Dan Stillman
:date:
    2017-08-15 04:24 (JST)

https://forums.zotero.org/discussion/66789/


------

Don't look up library name for each downloaded file

:commit:
    `a24f16e <https://github.com/Juris-M/zotero/commit/a24f16eb856323c516c10d126f506678c4d45dd9>`_
:author:
    Dan Stillman
:date:
    2017-08-13 10:26 (JST)


------

Update locales from Transifex

:commit:
    `b0826fd <https://github.com/Juris-M/zotero/commit/b0826fd91d49a40c95a07f9d5a1b9dd51a3268d6>`_
:author:
    Dan Stillman
:date:
    2017-08-13 10:09 (JST)


------

Fix first-run error with some upgrades after 39bfeac86c21

:commit:
    `c9b9d41 <https://github.com/Juris-M/zotero/commit/c9b9d4127d0cb33f2ec7c617d851756e29bbed3d>`_
:author:
    Dan Stillman
:date:
    2017-08-13 10:00 (JST)


------

Fix "Open in Library" from Quick Format popup if main window is closed

:commit:
    `6bcf92d <https://github.com/Juris-M/zotero/commit/6bcf92db4668c95ff2a2f5723eaab96263291c10>`_
:author:
    Dan Stillman
:date:
    2017-08-12 09:50 (JST)

Possible now on macOS


------

Add Zotero.openMainWindow()

:commit:
    `c59ae5c <https://github.com/Juris-M/zotero/commit/c59ae5cf40e497a6c1ba2dcf5ce23716f476dd0f>`_
:author:
    Dan Stillman
:date:
    2017-08-12 09:49 (JST)

Opens the main Zotero window if it's not open, which is now possible on
macOS.


------

Update version

:commit:
    `c293226 <https://github.com/Juris-M/zotero/commit/c29322645331858079825555e5b476950c44e01c>`_
:author:
    Dan Stillman
:date:
    2017-08-12 07:11 (JST)


------

Don't update storage version if file sync is stopped

:commit:
    `2770860 <https://github.com/Juris-M/zotero/commit/277086096808cfd4f2cd3effd2e4f825f72a8065>`_
:author:
    Dan Stillman
:date:
    2017-08-12 03:29 (JST)

Otherwise subsequent syncs won't download the remaining files until
there's a remote storage change.


------

Improve logic for determining whether to check for files to download

:commit:
    `9069559 <https://github.com/Juris-M/zotero/commit/906955905068f2de45966aecb0d070daaf1cc490>`_
:author:
    Dan Stillman
:date:
    2017-08-12 05:25 (JST)

This should fix cases of files not being downloaded after interrupted
syncs until the next time files were changed remotely.


------

Merge new English strings

:commit:
    `c768d48 <https://github.com/Juris-M/zotero/commit/c768d4845419b03906e2a295fd63da49ae03c91b>`_
:author:
    Dan Stillman
:date:
    2017-08-12 02:15 (JST)


------

Show files remaining in library in sync button tooltip

:commit:
    `4c13d51 <https://github.com/Juris-M/zotero/commit/4c13d51f24cd0504aab2f82b3cc3cec3a0458747>`_
:author:
    Dan Stillman
:date:
    2017-08-11 05:41 (JST)


------

Fix error handling for HTTP.request() with responseType: 'document'

:commit:
    `0df9674 <https://github.com/Juris-M/zotero/commit/0df967418b6f4df6e6224d335dc6e1cea12017da>`_
:author:
    Dan Stillman
:date:
    2017-08-12 01:24 (JST)


------

Download missing attachments as needed even in at-sync-time mode

:commit:
    `9202ab8 <https://github.com/Juris-M/zotero/commit/9202ab8b3c08228cadadb492de5bfe1a1f0dc94c>`_
:author:
    Dan Stillman
:date:
    2017-08-11 23:05 (JST)


------

Fix URL opening in some places (since 21cc9f16bff0)

:commit:
    `3a2f0e6 <https://github.com/Juris-M/zotero/commit/3a2f0e69295d4d4a742ed4c973f54b1fa8c0fefd>`_
:author:
    Dan Stillman
:date:
    2017-08-11 18:50 (JST)


------

Update version

:commit:
    `0653ee3 <https://github.com/Juris-M/zotero/commit/0653ee35668244599296789110be172858d9e6f1>`_
:author:
    Dan Stillman
:date:
    2017-08-11 18:50 (JST)


------

Fix opening of some links in About pane

:commit:
    `65d63fa <https://github.com/Juris-M/zotero/commit/65d63fad376902b8f33f7c06041784bd14755dcd>`_
:author:
    Dan Stillman
:date:
    2017-08-10 11:50 (JST)


------

Move ZoteroPane.launchURL() to Zotero.launchURL()

:commit:
    `21cc9f1 <https://github.com/Juris-M/zotero/commit/21cc9f16bff02dce7dd1e5140071abca6c96c938>`_
:author:
    Dan Stillman
:date:
    2017-08-10 11:49 (JST)

And add deprecation warning to ZoteroPane.launchURL()


------

Better Unicode path comparison in WebDAV.purgeOrphanedStorageFiles()

:commit:
    `678a6e1 <https://github.com/Juris-M/zotero/commit/678a6e15cc5c6c5a1c7e040667ff88ee87c4f1d6>`_
:author:
    Dan Stillman
:date:
    2017-08-10 11:41 (JST)


------

Fix error message in WebDAV purgeOrphanedStorageFiles()

:commit:
    `83fe445 <https://github.com/Juris-M/zotero/commit/83fe445f8f5a66c70a46617384f2e28cfd7121a0>`_
:author:
    Dan Stillman
:date:
    2017-08-10 10:59 (JST)


------

Choose most recently used data directory when upgrading to 5.0

:commit:
    `39bfeac <https://github.com/Juris-M/zotero/commit/39bfeac86c210a502aa280616a15878e1f356773>`_
:author:
    Dan Stillman
:date:
    2017-08-10 10:31 (JST)

Previously, if someone was upgrading from Zotero for Firefox to 5.0 but
at some point had installed Zotero Standalone and told it not to share
the data directory, 5.0 would use the data directory from the Zotero
profile directory, and people would end up with an empty database with a
Zotero Quick Start Guide from years ago.

This checks for the database with the most recent mtime and uses that
data directory instead. In the Firefox profile, that can be either the
default 'zotero' subdirectory or a custom data directory. If one of the
Firefox locations is used, Zotero prefs are read from Firefox, because
it means that Zotero for Firefox was being used (because if Zotero
Standalone had been in use it would've needed a custom data dir setting
pointing at the Firefox database).


------

Ignore stored-file path with no 'storage:'

:commit:
    `d3833b8 <https://github.com/Juris-M/zotero/commit/d3833b8afd91fbed7b8c756b3d3cca82249bafe6>`_
:author:
    Dan Stillman
:date:
    2017-08-09 09:39 (JST)

There was a report of an imported file with a relative path, probably
from some ancient bug (in our code or a plugin's)


------

Update locales from Transifex

:commit:
    `126fb86 <https://github.com/Juris-M/zotero/commit/126fb86957674327285e23386c4806bc6cfebc16>`_
:author:
    Dan Stillman
:date:
    2017-08-09 09:38 (JST)


------

Don't stop after one uploaded full-text batch

:commit:
    `a02eb3c <https://github.com/Juris-M/zotero/commit/a02eb3c328f3fb1ea751d4c7c3fac198a1cc4948>`_
:author:
    Dan Stillman
:date:
    2017-08-07 02:02 (JST)


------

Fix spacing of note editor and parent row in conflict resolution window

:commit:
    `945da5e <https://github.com/Juris-M/zotero/commit/945da5e008583ab7bdc63c19e5e1b8e5b982fe7a>`_
:author:
    Dan Stillman
:date:
    2017-08-07 01:52 (JST)


------

Fix spacing of full-text index state row

:commit:
    `aea378f <https://github.com/Juris-M/zotero/commit/aea378f1055c253336f2dbd750f2506e39a5ce4e>`_
:author:
    Dan Stillman
:date:
    2017-08-07 01:51 (JST)


------

Merge new English strings

:commit:
    `782e798 <https://github.com/Juris-M/zotero/commit/782e7989734207bf022f3a6b98e0200f2a110c69>`_
:author:
    Dan Stillman
:date:
    2017-08-09 09:03 (JST)


------

Show "Queued" in right pane for unprocessed full-text and allow indexing

:commit:
    `07ce273 <https://github.com/Juris-M/zotero/commit/07ce2733337c6d9d992606863eda41addff27e80>`_
:author:
    Dan Stillman
:date:
    2017-08-07 01:50 (JST)


------

Stop storage requests on shutdown

:commit:
    `fffa1ba <https://github.com/Juris-M/zotero/commit/fffa1badd451243496413f94231373a2af0f3a17>`_
:author:
    Dan Stillman
:date:
    2017-08-07 00:50 (JST)


------

Don't initialize storage requests until they start

:commit:
    `9920a84 <https://github.com/Juris-M/zotero/commit/9920a845c635649eb09ed4348cfe2dc2e4389230>`_
:author:
    Dan Stillman
:date:
    2017-08-07 00:50 (JST)


------

Add more logging for word plugin installer

:commit:
    `55992e3 <https://github.com/Juris-M/zotero/commit/55992e341dae739ba139d5760703fcc5bc397f69>`_
:author:
    Adomas Venčkauskas
:date:
    2017-08-08 18:46 (JST)


------

Fix icon name

:commit:
    `a758c30 <https://github.com/Juris-M/zotero/commit/a758c30404a817c9be232ea76f3de0ef2986ee2e>`_
:author:
    Frank Bennett
:date:
    2017-08-08 14:03 (JST)


------

Add composite Windows icon

:commit:
    `b355a5e <https://github.com/Juris-M/zotero/commit/b355a5e5258c20ba9f629040664a3f422b9ff11c>`_
:author:
    Frank Bennett
:date:
    2017-08-07 19:18 (JST)


------

Add composite Windows icon

:commit:
    `1e5ce2b <https://github.com/Juris-M/zotero/commit/1e5ce2b0756ea46058a595605e47c955bc296374>`_
:author:
    Frank Bennett
:date:
    2017-08-07 19:15 (JST)


------

Add Windows icon

:commit:
    `3bf9efb <https://github.com/Juris-M/zotero/commit/3bf9efb09d6a8886ffab50663d5b3dca3b8f8194>`_
:author:
    Frank Bennett
:date:
    2017-08-07 19:02 (JST)


------

Fix icons

:commit:
    `655ccaa <https://github.com/Juris-M/zotero/commit/655ccaaf546c12e82117b0de0b768bf978d863e8>`_
:author:
    Frank Bennett
:date:
    2017-08-07 18:56 (JST)


------

Merge new English strings

:commit:
    `6232c83 <https://github.com/Juris-M/zotero/commit/6232c83b4b4d06d6304d0869fbe35b5ed0d4aa88>`_
:author:
    Dan Stillman
:date:
    2017-08-06 02:47 (JST)


------

Allow debug output logging to be enabled after later restart

:commit:
    `a0a2502 <https://github.com/Juris-M/zotero/commit/a0a2502947fb66741b5ffaf271b6b98742908291>`_
:author:
    Dan Stillman
:date:
    2017-08-06 02:44 (JST)

With the new system, it wasn't possible through the UI to generate debug
output for another action that happened after a restart, since it just
restarted immediately. This adds a prompt after selecting the menu
option that allows for restarting now, restarting later, or cancelling.


------

Update version

:commit:
    `83dfd07 <https://github.com/Juris-M/zotero/commit/83dfd07306a472ef1b84f48c7ee3b86254710866>`_
:author:
    Dan Stillman
:date:
    2017-08-05 23:27 (JST)


------

Update app name in branding

:commit:
    `45f11ff <https://github.com/Juris-M/zotero/commit/45f11ff358923ead3f3d29c89ccbd4ac8eaaa448>`_
:author:
    Frank Bennett
:date:
    2017-08-05 16:28 (JST)


------

Fix "Copy as HTML" Quick Copy setting

:commit:
    `b3b9cac <https://github.com/Juris-M/zotero/commit/b3b9cac078a8551838ae18c9191f00131cbe7d81>`_
:author:
    Dan Stillman
:date:
    2017-08-05 10:13 (JST)


------

Fix sync test after 7b0ed6da81

:commit:
    `8b7f338 <https://github.com/Juris-M/zotero/commit/8b7f33826e60b740673f1b1de7c9cf9ad58e317b>`_
:author:
    Dan Stillman
:date:
    2017-08-05 08:41 (JST)


------

Remove pointless Bluebird lines from various stack traces

:commit:
    `34e2393 <https://github.com/Juris-M/zotero/commit/34e23937a158344a4dcb9ca3d89a580087226d89>`_
:author:
    Dan Stillman
:date:
    2017-08-05 08:09 (JST)


------

Don't unlink account on key info request connection failure

:commit:
    `7b0ed6d <https://github.com/Juris-M/zotero/commit/7b0ed6da8167873a8f67a5d36fad30be99e6539f>`_
:author:
    Dan Stillman
:date:
    2017-08-05 08:07 (JST)

This can happen when the computer is offline but that hasn't been
detected for some reason.


------

Resolve schema update promise even if repository update fails

:commit:
    `198fb28 <https://github.com/Juris-M/zotero/commit/198fb28e20250447f68e9c65858ac8eb0289ff62>`_
:author:
    Dan Stillman
:date:
    2017-08-04 23:48 (JST)


------

Update locales from Transifex

:commit:
    `2b3f6b4 <https://github.com/Juris-M/zotero/commit/2b3f6b4f1ff65ba9ae558b0f62e0081c7ec55c34>`_
:author:
    Dan Stillman
:date:
    2017-08-04 07:42 (JST)


------

Add test script to repo

:commit:
    `32c88a1 <https://github.com/Juris-M/zotero/commit/32c88a152a0d407d295efcff624162f39a6b57cf>`_
:author:
    Frank Bennett
:date:
    2017-08-03 08:18 (JST)


------

Add console and branding subdirs to repo

:commit:
    `4bcacac <https://github.com/Juris-M/zotero/commit/4bcacacb61580b4b5eba9965269b9b51840d6393>`_
:author:
    Frank Bennett
:date:
    2017-08-03 05:17 (JST)


------

Fix a wrong cookieSandbox condition for /connector/saveSnapshot

:commit:
    `492293e <https://github.com/Juris-M/zotero/commit/492293ef84a372b5d3dff7b103f6a368340bd82e>`_
:author:
    Adomas Venčkauskas
:date:
    2017-08-02 21:43 (JST)


------

Reverse 110f2a patch to addCitationDialog.xul. Broke formatting.

:commit:
    `67bf516 <https://github.com/Juris-M/zotero/commit/67bf516420f1596da1f4cff1afaed0b3547fe77e>`_
:author:
    Frank Bennett
:date:
    2017-08-01 08:52 (JST)


------

Merge new English strings

:commit:
    `03f8c5f <https://github.com/Juris-M/zotero/commit/03f8c5fa9936d99865c968a648cbc565f6ad7d5d>`_
:author:
    Dan Stillman
:date:
    2017-07-31 18:47 (JST)


------

Improve data directory startup error handling

:commit:
    `c6ab186 <https://github.com/Juris-M/zotero/commit/c6ab18634de37aa829f479c9fc98af3726c113fc>`_
:author:
    Dan Stillman
:date:
    2017-07-31 18:40 (JST)

Better instructions and behavior if the data directory is inaccessible
or missing, including automatically detecting a directory at the default
location if the configured directory is missing and offering to use the
default instead. Together, this means that if, say, security software
prevents Zotero from accessing the data directory within the Firefox
profile, it will suggest that the user move it to ~/Zotero and then
prompt to use that directory.


------

Update submodules

:commit:
    `ffc32d9 <https://github.com/Juris-M/zotero/commit/ffc32d992d3315feeef154b4066f425036cef818>`_
:author:
    Dan Stillman
:date:
    2017-07-31 04:34 (JST)


------

Update locales from Transifex

:commit:
    `cd86cfc <https://github.com/Juris-M/zotero/commit/cd86cfca982fc4820fcab31768cbbec5dbb37686>`_
:author:
    Dan Stillman
:date:
    2017-07-31 04:32 (JST)


------

Fix typo from 991967d5b

:commit:
    `33eb31d <https://github.com/Juris-M/zotero/commit/33eb31d6e24bfbcbe4f97bf87270e76a32380437>`_
:author:
    Dan Stillman
:date:
    2017-07-31 04:25 (JST)


------

Don't close Zotero on macOS when window is closed

:commit:
    `5123c21 <https://github.com/Juris-M/zotero/commit/5123c21e0d75456fe41fca2740882b10d8e17296>`_
:author:
    Dan Stillman
:date:
    2017-07-30 20:43 (JST)

Keep the application open with limited menus, including a Window ->
Zotero option bound to (Cmd-0) that can be used to reopen the main
window.

This allows Zotero to use almost no CPU (instead of a few percentage
points when the window is open, even when hidden with Cmd-H, though it'd
be nice to fix that) and still allow saves from the connector.

There might be some things that aren't being destroyed properly when the
window is closed or other bugginess, but it seems to work pretty well.


------

Don't rely on last browser window to open prefs from menu

:commit:
    `a8ba2fa <https://github.com/Juris-M/zotero/commit/a8ba2fac334a504e88b929dab8aea0d3293aa3c0>`_
:author:
    Dan Stillman
:date:
    2017-07-30 20:42 (JST)


------

Use nsIWindowWatcher in Zotero.openInViewer()

:commit:
    `ee0b4f5 <https://github.com/Juris-M/zotero/commit/ee0b4f5d0d84eddaf658b87fdbf819f6e93a5ea0>`_
:author:
    Dan Stillman
:date:
    2017-07-30 20:36 (JST)

Instead of getting the last browser window


------

Refactor and improve target selection in connector server

:commit:
    `991967d <https://github.com/Juris-M/zotero/commit/991967d5bc3f20de39f82faae6eddf471cbb38c3>`_
:author:
    Dan Stillman
:date:
    2017-07-30 20:34 (JST)

Fall back to lastViewedFolder if no active Zotero pane


------

Fix 2x icons in Timeline

:commit:
    `a92acfe <https://github.com/Juris-M/zotero/commit/a92acfe7c4641d80638a66be429964f4c3c03034>`_
:author:
    Dan Stillman
:date:
    2017-07-30 16:58 (JST)


------

Fix searches for PowerPoint files

:commit:
    `ac7c22a <https://github.com/Juris-M/zotero/commit/ac7c22a7c6ad2678feacc0c57171375b8bc3cbfc>`_
:author:
    Dan Stillman
:date:
    2017-07-30 13:04 (JST)

This also adds a mechanism for indicating that DB userdata upgrades
after a certain version are minor and shouldn't show "Upgrading
database…" or create a pre-upgrade backup.


------

Fix logged errors and debug messages in timeline

:commit:
    `9652b9f <https://github.com/Juris-M/zotero/commit/9652b9f553eb87acf027caa2fe7cbc0f9e0e856c>`_
:author:
    Dan Stillman
:date:
    2017-07-30 11:16 (JST)


------

Default month/day to 01 in Timeline if missing

:commit:
    `168e4e4 <https://github.com/Juris-M/zotero/commit/168e4e4b45bc03c9e9df78b41d51a5f130ef30d7>`_
:author:
    Dan Stillman
:date:
    2017-07-30 11:13 (JST)

This causes any item with just a year to show up at the start of the
year (instead of just not showing up, which I think was the case
before). Unfortunately they can then go out of view, and it's not
possible to scroll to view more, though that could probably be fixed.


------

Hide broken Timeline copyright image (listed in About pane anyway)

:commit:
    `fba412f <https://github.com/Juris-M/zotero/commit/fba412fe4a14276767d22c6b5831f9f567b37af7>`_
:author:
    Dan Stillman
:date:
    2017-07-30 11:13 (JST)


------

Fix Zotero.Utilities.Internal.getAsyncInputStream(), used by Timeline

:commit:
    `23d4992 <https://github.com/Juris-M/zotero/commit/23d4992265cb264c65f37c4443cc02275d7d349a>`_
:author:
    Dan Stillman
:date:
    2017-07-30 11:11 (JST)


------

Fix external zotero:// links

:commit:
    `4c9f389 <https://github.com/Juris-M/zotero/commit/4c9f389aa8f4f41a51d60a60dd9b7a91b9422c4c>`_
:author:
    Dan Stillman
:date:
    2017-07-30 06:13 (JST)


------

Update proxy authentication URLs

:commit:
    `a6564e9 <https://github.com/Juris-M/zotero/commit/a6564e92d7dfc1c26f0facfaf419321689341085>`_
:author:
    Dan Stillman
:date:
    2017-07-29 09:21 (JST)

And try all, since it doesn't do any of this unless there's a PAC file,
it's not actually a network request unless the site should be proxied,
and it should only make a single HEAD request unless a previous one
fails.

There's a possibility some proxies are limited to HTTP, in which case
changing these to HTTPS might stop this from working. If so, we'd need
to add back HTTP addresses.

Closes #1273


------

Update locales from Transifex

:commit:
    `ae22ce7 <https://github.com/Juris-M/zotero/commit/ae22ce7ecdab9cf8f69bd5e119025fbcbfd4f4c9>`_
:author:
    Dan Stillman
:date:
    2017-07-29 08:34 (JST)


------

Remove prompt when adding style manually

:commit:
    `884d03b <https://github.com/Juris-M/zotero/commit/884d03b12a0e9605fa88f574962d4d79bf1111a5>`_
:author:
    Dan Stillman
:date:
    2017-07-29 07:45 (JST)

(And prompt was showing "(null)")


------

Merge new English strings

:commit:
    `34b99fb <https://github.com/Juris-M/zotero/commit/34b99fb71c4b27f045e0b44321a3ce12d58774a9>`_
:author:
    Dan Stillman
:date:
    2017-07-28 15:18 (JST)


------

Update Quick Copy menu options based on current settings and URL

:commit:
    `d252a09 <https://github.com/Juris-M/zotero/commit/d252a09cd37c193e6ceb20f01136a43b55c4fd96>`_
:author:
    Dan Stillman
:date:
    2017-07-27 15:29 (JST)

Show "Copy Citation" and "Copy Bibliography" when a bib format is
selected and "Copy as BibTeX", etc., when an export is selected. If a
site-specific setting is in effect from the last active URL, use that
instead.

If no regular items are selected in bib mode, the menu options are
disabled.

This also now filters non-regular items out when in bib mode -- before
if you selected a combination it would include a bunch of 'n.d.' lines.

Closes #1155, Disable Copy Citation menu option when a translator is
selected for Quick Copy


------

Fix crash switching from Notes tab to feed item

:commit:
    `72fbee5 <https://github.com/Juris-M/zotero/commit/72fbee55239fdda78972a211097be3b72f457e35>`_
:author:
    Dan Stillman
:date:
    2017-07-27 13:11 (JST)


------

Consider fulltextItems with SYNC_STATE_MISSING as unindexed

:commit:
    `c110e64 <https://github.com/Juris-M/zotero/commit/c110e642932143d15ad1b2f5c015181775b6ef99>`_
:author:
    Dan Stillman
:date:
    2017-07-26 19:07 (JST)

The items will still match full-text word searches, but they won't match
phrase searches (because those require cache files for non-text
attachments) and the full-text won't sync to other computers, so they
should really be reindexed.


------

Don't keep looking for unsynced full-text content that isn't available

:commit:
    `67ccb63 <https://github.com/Juris-M/zotero/commit/67ccb632b495feb0937f7cf7ece6692b80577f75>`_
:author:
    Dan Stillman
:date:
    2017-07-26 18:39 (JST)

This can happen if cache files are deleted for PDF attachments or if
text files are missing.


------

Switch to OS.File for most full-text file access

:commit:
    `10637ca <https://github.com/Juris-M/zotero/commit/10637ca9ea590e80cb969b55fa86e673f920221d>`_
:author:
    Dan Stillman
:date:
    2017-07-26 18:38 (JST)


------

Fix various problems with fulltextContent searches

:commit:
    `61f8a2c <https://github.com/Juris-M/zotero/commit/61f8a2c3c5097f1469142d32d06c28b2eb4aa129>`_
:author:
    Dan Stillman
:date:
    2017-07-26 18:35 (JST)

Including finding items in the wrong library and not finding any items
when paired with the checkboxes in ANY mode


------

Restore auto-expanding of search matches except in My Publications

:commit:
    `3637163 <https://github.com/Juris-M/zotero/commit/36371630b56b2ce79b6587b57d9f64b42ffc6537>`_
:author:
    Dan Stillman
:date:
    2017-07-26 18:33 (JST)

Saved searches and the trash should automatically expand items to show
matching child items, but that was broken in d47275210.


------

Remove non-matching parent items when deleting items from trash

:commit:
    `46531a4 <https://github.com/Juris-M/zotero/commit/46531a4c69f8eef706b6986fb51be7e634b03d97>`_
:author:
    Dan Stillman
:date:
    2017-07-26 18:31 (JST)

Fixes #866, Trash doesn't refresh properly when emptying deleted
attachments


------

Log a few more lines during the word plugin installation

:commit:
    `81d5618 <https://github.com/Juris-M/zotero/commit/81d5618346475a723c1e8f489a0c1de8f596a243>`_
:author:
    Adomas Venčkauskas
:date:
    2017-07-26 15:20 (JST)


------

Add intl.accept_languages from Mozilla language packs

:commit:
    `e475b22 <https://github.com/Juris-M/zotero/commit/e475b22f1d1e9d08a788519f21ee99a75b7a0d1b>`_
:author:
    Dan Stillman
:date:
    2017-07-26 05:27 (JST)


------

Allow clearing global prefs

:commit:
    `d8b2014 <https://github.com/Juris-M/zotero/commit/d8b201487d5eff64d05a80f556a3a05310ca1852>`_
:author:
    Dan Stillman
:date:
    2017-07-26 04:44 (JST)


------

Update locales from Transifex

:commit:
    `c6e4722 <https://github.com/Juris-M/zotero/commit/c6e4722289472ee8df89b8a03dd8cf152f68708f>`_
:author:
    Dan Stillman
:date:
    2017-07-26 04:32 (JST)


------

Fix PluralForm support

:commit:
    `521f291 <https://github.com/Juris-M/zotero/commit/521f291b844f10998aa190855d92f7b0f7fe5e61>`_
:author:
    Dan Stillman
:date:
    2017-07-26 04:20 (JST)

The library was using the plural rule defined in the built-in
intl.properties, but that was always en-US in the standalone app.


------

Disable debug output logging test for now

:commit:
    `c223417 <https://github.com/Juris-M/zotero/commit/c2234176aad1d6a015f742b6af6087b567328905>`_
:author:
    Dan Stillman
:date:
    2017-07-25 16:24 (JST)

This should be tested, but we run tests in Firefox, and this doesn't
exist in Firefox... Easiest option is probably to add the submenu to the
Firefox menus for the purposes of testing.


------

Merge new English strings

:commit:
    `3bb8b5d <https://github.com/Juris-M/zotero/commit/3bb8b5d24df0897029ab5b5a5b2ee4760af3e1a6>`_
:author:
    Dan Stillman
:date:
    2017-07-25 16:08 (JST)


------

Remove line from Report Errors about messages possibly unrelated to Zotero

:commit:
    `d01366a <https://github.com/Juris-M/zotero/commit/d01366a2f150d59b594593fbd4d3b20cddf8c8dc>`_
:author:
    Dan Stillman
:date:
    2017-07-25 15:40 (JST)


------

Move debug output logging to the Help menu

:commit:
    `c2bb4ac <https://github.com/Juris-M/zotero/commit/c2bb4ac10b97865c4e13e32e8609035b09dc367a>`_
:author:
    Dan Stillman
:date:
    2017-07-25 15:36 (JST)

Adds a submenu for quickly generating and submitting debug output, with
a button to copy the Debug ID to the clipboard and a one-click option to
restart with logging enabled. Debug output can also now be viewed in
real-time using the new debug output viewer window (previously available
only via a command-line flag).

The locale switcher has moved to the top of the Advanced prefpane (where
Debug Output Logging used to go) in a Miscellaneous section, and there's
a new "Advanced Configuration" section (mirroring Thunderbird) at the
bottom for "Config Editor".

Closes #1108


------

Debug output viewer tweaks

:commit:
    `e3947e7 <https://github.com/Juris-M/zotero/commit/e3947e7b45bc433b4cb8d10a647c49e42231d48b>`_
:author:
    Dan Stillman
:date:
    2017-07-25 15:30 (JST)

- Decrease font size
- Do a better job of pinning to bottom
- Disable submit button when clearing output
- Filter ANSI color codes from slow lines


------

"Submit Feedback…" -> "Discussion Forums"

:commit:
    `eb1cecf <https://github.com/Juris-M/zotero/commit/eb1cecf404b224c6fd5953d043c777dea3a377dd>`_
:author:
    Dan Stillman
:date:
    2017-07-25 15:30 (JST)


------

Deprecate Zotero.Utilities.Internal.quitZotero() in favor of quit()

:commit:
    `a959436 <https://github.com/Juris-M/zotero/commit/a9594360cd068edd2a5bb0d7eaf2cecb24219b56>`_
:author:
    Dan Stillman
:date:
    2017-07-25 15:29 (JST)


------

Don't omit first line in debug output when submitting

:commit:
    `695dd4e <https://github.com/Juris-M/zotero/commit/695dd4e65db1c6df5a9b3ab15c7ba2be4611b163>`_
:author:
    Dan Stillman
:date:
    2017-07-25 11:49 (JST)


------

Merge branch 'jurism-5.0-dev' into jurism-5.0

:commit:
    `25ffd47 <https://github.com/Juris-M/zotero/commit/25ffd47e2d588296ae03d32b17b8d96f3d29e5e2>`_
:author:
    Frank Bennett
:date:
    2017-07-25 08:55 (JST)


------

Remove legacy language switcher code, tidy up language pref panel

:commit:
    `69f4e81 <https://github.com/Juris-M/zotero/commit/69f4e816efda6ee6318e1e2af18ab0324b321246>`_
:author:
    Frank Bennett
:date:
    2017-07-25 08:54 (JST)


------

Update locales following merge

:commit:
    `53b979b <https://github.com/Juris-M/zotero/commit/53b979b90aecfd1883e80232f5bdcc08cb939257>`_
:author:
    Frank Bennett
:date:
    2017-07-25 06:12 (JST)


------

Merge changes from upstream Zotero

:commit:
    `a881067 <https://github.com/Juris-M/zotero/commit/a881067d928ef16363192513a252e958a6f7be15>`_
:author:
    Frank Bennett
:date:
    2017-07-25 06:09 (JST)


------

Avoid sync error on removal of creator with multi data

:commit:
    `af99e6d <https://github.com/Juris-M/zotero/commit/af99e6d3066189ca9ffb80c3d38b6ffd36e23b89>`_
:author:
    Frank Bennett
:date:
    2017-07-25 05:59 (JST)


------

Update version

:commit:
    `9a8ab52 <https://github.com/Juris-M/zotero/commit/9a8ab522e15d8304d3f5e79bc7da5d4326019510>`_
:author:
    Dan Stillman
:date:
    2017-07-24 22:14 (JST)


------

Update submodules

:commit:
    `6ae2b58 <https://github.com/Juris-M/zotero/commit/6ae2b58d3fd4398f98730541cc1b6fcef65c14eb>`_
:author:
    Dan Stillman
:date:
    2017-07-24 21:59 (JST)


------

Update locales from Transifex

:commit:
    `d5759e3 <https://github.com/Juris-M/zotero/commit/d5759e37244450479de90cdda2cee33c7e706544>`_
:author:
    Dan Stillman
:date:
    2017-07-24 21:58 (JST)


------

Fix a whole mess of issues with data directory migration

:commit:
    `34d039b <https://github.com/Juris-M/zotero/commit/34d039ba48c94ff0dc13b098706c18822dfd36ed>`_
:author:
    Dan Stillman
:date:
    2017-07-24 21:38 (JST)

- If an error occurred while moving the database file, the data
  directory could end up pointing to the new, empty directory after a
  restart
- The error message for a full failure was missing the second half that
  actually explained that you were supposed to move the data directory
- The check for different-drive migrations didn't work if the new
  directory didn't exist (at least on macOS), swallowed some errors, and
  interfered with manual migrations from the prefs
- The manual migration button would say that the new directory wasn't
  empty even if it just contained .DS_Store
- Don't show "Database migration in progress" after not restarting after
  a migration failure

Additionally, after a full failure the migration is now attempted on
every restart and displays a warning each time, since otherwise people
will never move their directories out of the Firefox profile (which is
when it's going to fail the most, due to security software).


------

Use proper locale format for dates in items list

:commit:
    `05ea309 <https://github.com/Juris-M/zotero/commit/05ea309e2e18ae9590fd1d1b193b3a6df0b90af3>`_
:author:
    Dan Stillman
:date:
    2017-07-24 04:00 (JST)

2addf6b27b fixed the date order used when automatic locale detection was
enabled, but this fixes the format (e.g., dots instead of slashes). It
should now match the item pane. I'm not sure why we weren't doing this
before, but hopefully we didn't have a good reason.


------

Update locales from Transifex

:commit:
    `a9f0096 <https://github.com/Juris-M/zotero/commit/a9f00969291445c36f3d4e5cfe2472a162d03b49>`_
:author:
    Dan Stillman
:date:
    2017-07-23 14:11 (JST)


------

Increase font size and decrease style list height in doc prefs

:commit:
    `db496e1 <https://github.com/Juris-M/zotero/commit/db496e13c2fa23d8c84ebaffe9484897707ac306>`_
:author:
    Dan Stillman
:date:
    2017-07-23 13:54 (JST)

On macOS this shows all default styles without a scroll bar.


------

Use HTTPS for Google Scholar and CrossRef lookup engines

:commit:
    `073d273 <https://github.com/Juris-M/zotero/commit/073d27311f76f6fa17c6aaca1a74fe62ee36f080>`_
:author:
    Dan Stillman
:date:
    2017-07-23 13:45 (JST)

TODO: Update existing engines


------

Use HTTPS for Google Scholar in Retrieve Metadata for PDF

:commit:
    `ef71a2c <https://github.com/Juris-M/zotero/commit/ef71a2c77c72d461a5ad69f9d4cdaa8865fae9bb>`_
:author:
    Dan Stillman
:date:
    2017-07-23 13:44 (JST)


------

Add some additional logging to docs plugin installer

:commit:
    `0ceb5ec <https://github.com/Juris-M/zotero/commit/0ceb5ec9a9c23420afb57152325142ec754af304>`_
:author:
    Adomas Venčkauskas
:date:
    2017-07-22 23:28 (JST)


------

Fix auto-syncing of unchecked groups after object change

:commit:
    `2252158 <https://github.com/Juris-M/zotero/commit/225215842dbdde93d05236bbf7e5008004714c74>`_
:author:
    Dan Stillman
:date:
    2017-07-22 08:39 (JST)


------

Fix revealing parent directory of missing file

:commit:
    `6d2c72f <https://github.com/Juris-M/zotero/commit/6d2c72fb54f1ed1eaa99ab4ec7a76d4a6ce86ade>`_
:author:
    Dan Stillman
:date:
    2017-07-22 07:33 (JST)

Updates Zotero.File.getClosestDirectory() to take a path rather than an
nsIFile


------

Fix broken WebDAV orphaned-file purging after 39a8e8fb0c3

:commit:
    `b033ded <https://github.com/Juris-M/zotero/commit/b033dedddc5646ecad1980e1bc94f95d95733875>`_
:author:
    Dan Stillman
:date:
    2017-07-21 21:39 (JST)


------

Update non-English locales

:commit:
    `efe8b65 <https://github.com/Juris-M/zotero/commit/efe8b65f843d8d2a681af64721ccfa3ac8d070f1>`_
:author:
    Dan Stillman
:date:
    2017-07-21 20:53 (JST)


------

Rename/reorganize Advanced prefs buttons

:commit:
    `faecefa <https://github.com/Juris-M/zotero/commit/faecefa375d573cd83f26d51c596f76e34ae27a7>`_
:author:
    Dan Stillman
:date:
    2017-07-21 20:47 (JST)

- Move csledit and cslpreview to a Tools section of the Cite pane as
  Style Editor and Style Preview
- Rename "Open about:config" to "Config Editor"
- Hide about:memory unless devtools.errorconsole.enabled is enabled,
  which isn't particularly appropriate and maybe we can find something
  better, but about:memory doesn't really need to be visible by default

Closes #1264


------

Add locale switcher to Advanced prefs

:commit:
    `33b4082 <https://github.com/Juris-M/zotero/commit/33b40829b897bdca9501f8d446cba3a61758bc71>`_
:author:
    Dan Stillman
:date:
    2017-07-21 18:30 (JST)

Closes https://www.zotero.org/trac/ticket/1733 (!)


------

Get Zotero.locale from loaded locale, not from pref

:commit:
    `2addf6b <https://github.com/Juris-M/zotero/commit/2addf6b27b1466bf5520881fc007a31cd645076b>`_
:author:
    Dan Stillman
:date:
    2017-07-21 18:27 (JST)

It was previously set from general.useragent.locale, but that's not used
by default, meaning that date interpretation and some other things might
have been incorrect for everyone who didn't set a locale explicitly and
toggle matchOS...


------

Remove reference to Actions menu (to Report Error)

:commit:
    `2bd3aa9 <https://github.com/Juris-M/zotero/commit/2bd3aa9669f1f16e9be34233d1c3080efaec491a>`_
:author:
    gracile-fr
:date:
    2017-07-21 20:12 (JST)

"Report Errors" menu item was in Actions (gear) menu, which has been
hidden in 5.0 (cf. 82292eef77701c5f6eb19ec4b65aee0e7ebdbf30). It is now
accessible from the Help menu.
Adjust Report Error instructions accordingly.


------

Report automaticSnapshots pref to connector.

:commit:
    `40c84ec <https://github.com/Juris-M/zotero/commit/40c84ecbc0069f087c14c8f317f576aba1aa970d>`_
:author:
    Adomas Venčkauskas
:date:
    2017-07-21 17:36 (JST)

Part of zotero/zotero-connectors#151


------

Send Content-Type: text/xml header for WebDAV PROPFIND

:commit:
    `39a8e8f <https://github.com/Juris-M/zotero/commit/39a8e8fb0c34e87d012471fa005d3dea58e0201d>`_
:author:
    Dan Stillman
:date:
    2017-07-21 17:05 (JST)


------

Test for tag selector search

:commit:
    `316a6f9 <https://github.com/Juris-M/zotero/commit/316a6f91b21a2cdf491621137c7d2076d640e611>`_
:author:
    Dan Stillman
:date:
    2017-07-21 07:24 (JST)


------

Update version

:commit:
    `80c70d9 <https://github.com/Juris-M/zotero/commit/80c70d9bffda1697180f1c0e97f0ae5aadac48a1>`_
:author:
    Dan Stillman
:date:
    2017-07-21 07:25 (JST)


------

Fix tag selector search (broken in 6de7fdedf)

:commit:
    `a7be544 <https://github.com/Juris-M/zotero/commit/a7be5444ea599569ab5ebf0f6ba6d30349e56c18>`_
:author:
    Dan Stillman
:date:
    2017-07-21 05:51 (JST)


------

Update version

:commit:
    `701a3d7 <https://github.com/Juris-M/zotero/commit/701a3d73fc86a3fe6543847c78beec7274e8822c>`_
:author:
    Dan Stillman
:date:
    2017-07-20 18:39 (JST)


------

Take tag selector out of the tab order, for now

:commit:
    `6de7fde <https://github.com/Juris-M/zotero/commit/6de7fdedf985ca1fddecf7371bb444566ff868d3>`_
:author:
    Dan Stillman
:date:
    2017-07-20 15:59 (JST)

This restores the 4.0 behavior. It's not ideal, but neither is having to
tab through thousands of items to get to the items pane (unless you
toggle the tag selector closed first). Hopefully we can come up with a
better solution to make the tags accessible.


------

Update locales from Transifex

:commit:
    `c39bdaa <https://github.com/Juris-M/zotero/commit/c39bdaa25b9bb0572ced244301ffc47fb0fcbccc>`_
:author:
    Dan Stillman
:date:
    2017-07-20 15:55 (JST)


------

Fix error on connector ping before site-specific Quick Copy load

:commit:
    `cbc05ba <https://github.com/Juris-M/zotero/commit/cbc05baf0293ded03f128351c070064d26fbe6b9>`_
:author:
    Dan Stillman
:date:
    2017-07-19 18:30 (JST)


------

Tweak .gitignore

:commit:
    `e7f9877 <https://github.com/Juris-M/zotero/commit/e7f9877209b72df4a5f433ee79182e9dafea25f9>`_
:author:
    Frank Bennett
:date:
    2017-07-20 00:12 (JST)


------

Update chrome.manifest

:commit:
    `137fc64 <https://github.com/Juris-M/zotero/commit/137fc6450852b6acdaf0154f2ac0bcfb0a700bd1>`_
:author:
    Frank Bennett
:date:
    2017-07-20 00:12 (JST)


------

Adjust connector server test for ece3491e2

:commit:
    `84c1367 <https://github.com/Juris-M/zotero/commit/84c1367e7b93c629438c73f2c950b08390cfd76f>`_
:author:
    Adomas Venčkauskas
:date:
    2017-07-19 17:55 (JST)


------

Connector server: respond with collection editability status

:commit:
    `ece3491 <https://github.com/Juris-M/zotero/commit/ece3491e2114807364d3270467db06c0a5665eb5>`_
:author:
    Adomas Venčkauskas
:date:
    2017-07-18 23:13 (JST)


------

Fix Quick Copy tests after 6d265f448f

:commit:
    `cd35962 <https://github.com/Juris-M/zotero/commit/cd35962435000cbfb7bcb6eae3a8348465971414>`_
:author:
    Dan Stillman
:date:
    2017-07-19 17:36 (JST)


------

Update locales from Transifex

:commit:
    `97d46b7 <https://github.com/Juris-M/zotero/commit/97d46b79f13913740fc92888faefdff2ab66aaa7>`_
:author:
    Dan Stillman
:date:
    2017-07-19 17:08 (JST)


------

Alter Quick Copy preferences text

:commit:
    `a158e8a <https://github.com/Juris-M/zotero/commit/a158e8a71b4ecb626fa65ad8545068eb181ae2d3>`_
:author:
    Dan Stillman
:date:
    2017-07-19 16:52 (JST)

Closes #1022

Could try to explain site-specific settings, but it's somewhat
complicated (requires the Zotero Connector, uses the last active tab
regardless of drag destination), so maybe enough to explain on the
linked documentation page.


------

Sort export translators in Quick Copy settings drop-downs

:commit:
    `b3ce918 <https://github.com/Juris-M/zotero/commit/b3ce918dfbbb6fb7db53c27fad2ffafc39859164>`_
:author:
    Dan Stillman
:date:
    2017-07-19 16:39 (JST)


------

Restore site-specific Quick Copy settings

:commit:
    `6d265f4 <https://github.com/Juris-M/zotero/commit/6d265f448f94307d22b58a1305c64af006f5278f>`_
:author:
    Dan Stillman
:date:
    2017-07-19 16:38 (JST)

Using the last URL passed by a connector

Closes https://github.com/zotero/zotero-connectors/issues/145


------

Clear attachment data change marker when loading primary data

:commit:
    `2928752 <https://github.com/Juris-M/zotero/commit/2928752d1956437f2662a9f669fe94d0de3d5297>`_
:author:
    Dan Stillman
:date:
    2017-07-19 07:50 (JST)

Fixes a regression from ef7da3486a4 in which attachment data still shows
as changed after a save.


------

Simplify an array check

:commit:
    `cff84a7 <https://github.com/Juris-M/zotero/commit/cff84a71ede17542c34a120c4f4aa7579ff66f89>`_
:author:
    Dan Stillman
:date:
    2017-07-19 06:13 (JST)


------

Optimistic updates for item tags box

:commit:
    `df353bd <https://github.com/Juris-M/zotero/commit/df353bdc05d5ca0512830aa0b7ba2fe96376aea8>`_
:author:
    Dan Stillman
:date:
    2017-07-19 06:09 (JST)

Add/update/remove rows immediately and save after. If there's an error
during saving, reload the pane.


------

New state-handling approach for item tag changes

:commit:
    `ef7da34 <https://github.com/Juris-M/zotero/commit/ef7da3486a4b517a6beb45ecc6115812e99905a8>`_
:author:
    Dan Stillman
:date:
    2017-07-17 07:15 (JST)

If this works out I think we'll want to use this approach for
all data layer changes.

Previously, an unsaved change on an object would update its state
immediately, which was fine for synchronous code but breaks down if a
save involves multiple asynchronous calls, because modifying state after
the relevant data has been saved to the DB but before the `_changed`
object has been cleared would mean that new changes would be lost. Now,
changes are written to _changedData, and a get for the data first checks
_changedData before checking the state property (e.g., _tags) directly.
The changedData property is cleared as it's written, and once the object
is saved, the reload updates the state property with the new data.


------

Allow an array of strings in Zotero.Item::setTags()

:commit:
    `09a859d <https://github.com/Juris-M/zotero/commit/09a859d7e3c0fabf7377bf93a9b36baab14c40f6>`_
:author:
    Dan Stillman
:date:
    2017-07-19 06:14 (JST)

New tags will all be of type 0 (manual)


------

Fix use of multiple search translators

:commit:
    `3715c8d <https://github.com/Juris-M/zotero/commit/3715c8da1b0688f7acc5247deab21df54e730a87>`_
:author:
    Dan Stillman
:date:
    2017-07-18 20:07 (JST)

It was stopping after the first translator, which meant that some ISBN
lookups failed if the ISBN wasn't in Library of Congress.

Regression from 6da0845f4b, which hopefully didn't have a good reason
for this


------

Move Tools -> Options to Edit -> Preferences on Windows

:commit:
    `5268060 <https://github.com/Juris-M/zotero/commit/52680608023189226502ab11fa2f4e5a93c73b97>`_
:author:
    Dan Stillman
:date:
    2017-07-18 09:23 (JST)

Closes #1167


------

Fix tag selector font on Windows

:commit:
    `76030d2 <https://github.com/Juris-M/zotero/commit/76030d2c4a7e0dbc58e510ea4ec5ef5c151e7408>`_
:author:
    Dan Stillman
:date:
    2017-07-18 09:04 (JST)


------

Add connector endpoint to retrieve proxies. Closes #1265

:commit:
    `6d7dcc4 <https://github.com/Juris-M/zotero/commit/6d7dcc44bcc6cbe0f555a264c569745294596222>`_
:author:
    Adomas Venčkauskas
:date:
    2017-07-18 16:25 (JST)


------

Update version

:commit:
    `322b20f <https://github.com/Juris-M/zotero/commit/322b20fc1214e3de17ca6d096436245ca340048d>`_
:author:
    Dan Stillman
:date:
    2017-07-18 07:41 (JST)


------

Update translators

:commit:
    `94a3921 <https://github.com/Juris-M/zotero/commit/94a3921d0a2fcdf9abc7e2f08d2fc205e61cd40f>`_
:author:
    Dan Stillman
:date:
    2017-07-18 07:25 (JST)


------

Update locales from Transifex

:commit:
    `cf5a943 <https://github.com/Juris-M/zotero/commit/cf5a943ec6b5c9cf0385729a192f0826fe549ae0>`_
:author:
    Dan Stillman
:date:
    2017-07-18 07:23 (JST)


------

Fix calculation of last WebDAV orphaned-file-purge time

:commit:
    `78dd1e1 <https://github.com/Juris-M/zotero/commit/78dd1e132e3ddff023cb0663b8b531784b6d180e>`_
:author:
    Dan Stillman
:date:
    2017-07-18 05:52 (JST)

Purging was happening after every download.


------

Add "Remove All Tags…" option to item tags box context menu

:commit:
    `ba514b8 <https://github.com/Juris-M/zotero/commit/ba514b80d9bfdab0b0a0549a15b39d1bf2ee1185>`_
:author:
    Dan Stillman
:date:
    2017-07-18 05:32 (JST)


------

Increase default window size to 1000x600

:commit:
    `918ae23 <https://github.com/Juris-M/zotero/commit/918ae234187f0dfb3db1ba380947f8ea24176f48>`_
:author:
    Dan Stillman
:date:
    2017-07-18 05:28 (JST)

(Plus a little, I think)


------

Add alignment menu to note context menu that restores justification option

:commit:
    `b0c1a9a <https://github.com/Juris-M/zotero/commit/b0c1a9a613c02e2a253eb5d3df8a3a917b48877d>`_
:author:
    Dan Stillman
:date:
    2017-07-17 13:12 (JST)

(Even if it's generally a bad idea without hyphenation)

Also adds unused code that could replace the three alignment buttons in
the toolbar with a split-button menu with all four options. We could use
this if we needed more space and didn't think people would mind the
extra click when switching between left and center.


------

Update locales following merge

:commit:
    `a3fb70f <https://github.com/Juris-M/zotero/commit/a3fb70f4e9564953f5c4035987ea691c2b3f01a9>`_
:author:
    Frank Bennett
:date:
    2017-07-16 18:36 (JST)


------

Merge from upstream Zotero

:commit:
    `a49f0c9 <https://github.com/Juris-M/zotero/commit/a49f0c98b25b73fe320a8f61e3de68df53f6a292>`_
:author:
    Frank Bennett
:date:
    2017-07-16 18:22 (JST)


------

Revert -dev in build script

:commit:
    `ee081aa <https://github.com/Juris-M/zotero/commit/ee081aa94b3fcbfd3c39435588350f159978618a>`_
:author:
    Frank Bennett
:date:
    2017-07-16 16:59 (JST)


------

Fix an integration.js typo. Closes #1263

:commit:
    `f829e4d <https://github.com/Juris-M/zotero/commit/f829e4d6cc509b98dd505e8fe6e942a0e7cfdddb>`_
:author:
    Adomas Venčkauskas
:date:
    2017-07-14 19:40 (JST)


------

Update locales from Transifex

:commit:
    `7ef7a84 <https://github.com/Juris-M/zotero/commit/7ef7a841227cea84223e2b588d632ab2af3d1556>`_
:author:
    Dan Stillman
:date:
    2017-07-14 18:12 (JST)


------

Fix collection context-menu options broken in 02774ac6f

:commit:
    `0f965b0 <https://github.com/Juris-M/zotero/commit/0f965b0de6840bd313a2aadebc24114cc8274b9f>`_
:author:
    Dan Stillman
:date:
    2017-07-14 14:06 (JST)

E.g., selective sync


------

Fix restoring after closing from full-screen mode on macOS

:commit:
    `57881ff <https://github.com/Juris-M/zotero/commit/57881ff5874a619d8cae5f9447989ec07fb31de1>`_
:author:
    Dan Stillman
:date:
    2017-07-14 07:27 (JST)


------

Prevent infinite loop if search points to itself

:commit:
    `ea513ed <https://github.com/Juris-M/zotero/commit/ea513edf732979d7ec1da089a488bce54de4e6a0>`_
:author:
    Dan Stillman
:date:
    2017-07-14 07:07 (JST)


------

"Report Errors to Zotero…" -> "Report Errors…"

:commit:
    `0513cd0 <https://github.com/Juris-M/zotero/commit/0513cd0eef176f91893dfae26bbb9a6236a35f2e>`_
:author:
    Dan Stillman
:date:
    2017-07-14 06:41 (JST)


------

Update version

:commit:
    `b46a2fc <https://github.com/Juris-M/zotero/commit/b46a2fc89378aad32c5f07dc03479502c8247864>`_
:author:
    Dan Stillman
:date:
    2017-07-14 06:03 (JST)


------

Fix startup error from empty 'collection' search condition

:commit:
    `0c49350 <https://github.com/Juris-M/zotero/commit/0c49350cdfa7d85fdaacda198fd41775e690fc7c>`_
:author:
    Dan Stillman
:date:
    2017-07-14 05:10 (JST)


------

Update locales from Transifex

:commit:
    `542d68c <https://github.com/Juris-M/zotero/commit/542d68cc4c1c55104d0f4c4808d8e10b8b6fc59b>`_
:author:
    Dan Stillman
:date:
    2017-07-13 16:38 (JST)


------

Fix #1260, Windows Application (menu) key doesn't work in items pane

:commit:
    `df24917 <https://github.com/Juris-M/zotero/commit/df24917c2f8256c33c09cf39313376bc1a7c9471>`_
:author:
    Dan Stillman
:date:
    2017-07-13 16:26 (JST)


------

Log URL for snapshot save timeouts

:commit:
    `2d8132b <https://github.com/Juris-M/zotero/commit/2d8132b6c80921515cce14c9a560c53fbc093c7b>`_
:author:
    Dan Stillman
:date:
    2017-07-13 14:28 (JST)


------

Fix crash from tag name collision with Object properties in tag selector

:commit:
    `1247896 <https://github.com/Juris-M/zotero/commit/1247896d70c5c8aa3e8ff13cd4d28e8910368f81>`_
:author:
    Dan Stillman
:date:
    2017-07-13 14:16 (JST)


------

Use DOM_VK_* codes in itemTreeView keypress listener

:commit:
    `4ffbf6f <https://github.com/Juris-M/zotero/commit/4ffbf6fca55f83a190345d8c730e777276f380f4>`_
:author:
    Dan Stillman
:date:
    2017-07-13 08:54 (JST)


------

Update version

:commit:
    `d0eb1c8 <https://github.com/Juris-M/zotero/commit/d0eb1c8753590e21dcf145ddf9dc47692b9d6157>`_
:author:
    Dan Stillman
:date:
    2017-07-13 08:00 (JST)


------

Use getService() for another protocol handler call

:commit:
    `ae19ffc <https://github.com/Juris-M/zotero/commit/ae19ffcf9b86fa0ba599a86350b5319b2de892f1>`_
:author:
    Dan Stillman
:date:
    2017-07-13 07:59 (JST)

Follow-up to dd5d3a8668e -- not sure if this one matters, but probably
can't hurt


------

Fix blank window when opening ZotFile's zotero://open-pdf links

:commit:
    `dd5d3a8 <https://github.com/Juris-M/zotero/commit/dd5d3a8668e9b9b9502b3cc903b082361f73875c>`_
:author:
    Dan Stillman
:date:
    2017-07-13 07:25 (JST)

Fixes https://github.com/jlegewie/zotfile/issues/272


------

Fix id-not-an-integer warning from Show in Library

:commit:
    `752e25e <https://github.com/Juris-M/zotero/commit/752e25e2825afa3e84d4c085b9e5a2b7d346519d>`_
:author:
    Dan Stillman
:date:
    2017-07-13 04:44 (JST)


------

Fix collection-menu selection via right-click->drag->release or keyboard

:commit:
    `02774ac <https://github.com/Juris-M/zotero/commit/02774ac6fec847ab0e1db0616ad90f997da03775>`_
:author:
    Dan Stillman
:date:
    2017-07-13 04:43 (JST)


------

Fix 'too many terms in compound SELECT' sync error

:commit:
    `aad12db <https://github.com/Juris-M/zotero/commit/aad12db2ff01ef9ebd0dd3ed429c2423d618695e>`_
:author:
    Dan Stillman
:date:
    2017-07-12 17:20 (JST)


------

Fix alignment of "What's New" in About window

:commit:
    `8f2508e <https://github.com/Juris-M/zotero/commit/8f2508e167def8f6128e43ab25673e2e9642908e>`_
:author:
    Dan Stillman
:date:
    2017-07-12 16:38 (JST)


------

Update version

:commit:
    `63c6972 <https://github.com/Juris-M/zotero/commit/63c69727cd0c3f9cf9087edfe9869751aecb00f5>`_
:author:
    Dan Stillman
:date:
    2017-07-12 16:27 (JST)


------

Update locales from Transifex

:commit:
    `e841d62 <https://github.com/Juris-M/zotero/commit/e841d6236030cda78076e8bcacca33099d6f5142>`_
:author:
    Dan Stillman
:date:
    2017-07-12 16:27 (JST)


------

Fix file sync error on Windows from attachment paths with invalid characters

:commit:
    `fd2ba1d <https://github.com/Juris-M/zotero/commit/fd2ba1d5b7316f00a45d22bb4bbe3bf8f763392e>`_
:author:
    Dan Stillman
:date:
    2017-07-12 15:58 (JST)

We filter these now, but upgraded databases with bad paths could still
exist and cause errors.


------

Add unused Zotero.Prefs.resetBranch()

:commit:
    `a62161d <https://github.com/Juris-M/zotero/commit/a62161dfc15cc065fada50cd1d777d8056053892>`_
:author:
    Dan Stillman
:date:
    2017-07-12 14:20 (JST)

I wrote this for account unlinking (since nsIPrefBranch.resetBranch()
isn't implemented) but decided we didn't want to delete all prefs for
that.


------

Remove unused skipDefaultData property

:commit:
    `a7021f8 <https://github.com/Juris-M/zotero/commit/a7021f80cac10d9cf8c51f5f85ed0d129f268515>`_
:author:
    Dan Stillman
:date:
    2017-07-12 14:20 (JST)


------

Avoid log message about json.collections being unknown after e683b2be0

:commit:
    `efae707 <https://github.com/Juris-M/zotero/commit/efae7073f2b9f3ce638ca8c38085e91d47579937>`_
:author:
    Dan Stillman
:date:
    2017-07-12 14:18 (JST)


------

Fix potential error loading support links

:commit:
    `d1d6218 <https://github.com/Juris-M/zotero/commit/d1d62184be73c3616f38920007a40502c443a729>`_
:author:
    Dan Stillman
:date:
    2017-07-12 14:17 (JST)

From ZOTERO_CONFIG not being defined. I can't reproduce this, but I've
seen it in the logs.


------

Fix error on account unlink, and delete more files

:commit:
    `62fa86a <https://github.com/Juris-M/zotero/commit/62fa86af8217edadea3c1c3d7068c97deca43d40>`_
:author:
    Dan Stillman
:date:
    2017-07-12 14:16 (JST)

Delete everything from data directory except for PDF tools


------

Fix #1256, Report saving is broken

:commit:
    `d242182 <https://github.com/Juris-M/zotero/commit/d2421825c96acbc6bc325bc75f35350d425a18d6>`_
:author:
    Dan Stillman
:date:
    2017-07-11 19:14 (JST)


------

Update version to 5.0.1

:commit:
    `9bbef84 <https://github.com/Juris-M/zotero/commit/9bbef844f609349080ce62d3b9034fa3960a9122>`_
:author:
    Dan Stillman
:date:
    2017-07-11 18:22 (JST)


------

Update submodule

:commit:
    `f61cf08 <https://github.com/Juris-M/zotero/commit/f61cf08a86c20191a6679a0e43b4f75887b2ab6e>`_
:author:
    Dan Stillman
:date:
    2017-07-11 17:56 (JST)


------

Update locales from Transifex

:commit:
    `b53e5b9 <https://github.com/Juris-M/zotero/commit/b53e5b96ef3cbd576c66e6d96c945e15417117bd>`_
:author:
    Dan Stillman
:date:
    2017-07-11 17:54 (JST)


------

Zotero.Item::_collections is always an array

:commit:
    `a982bd0 <https://github.com/Juris-M/zotero/commit/a982bd056d029c65fafba797887fb5bee0eab027>`_
:author:
    Dan Stillman
:date:
    2017-07-11 17:44 (JST)


------

Fix "destFile is not defined" file sync error

:commit:
    `18f3c2c <https://github.com/Juris-M/zotero/commit/18f3c2cfb006a1028dd444784338eb0b3433e4b1>`_
:author:
    Dan Stillman
:date:
    2017-07-11 17:37 (JST)


------

Remove debug lines

:commit:
    `375b434 <https://github.com/Juris-M/zotero/commit/375b4341a620da7d0eb8fe87734af364167b9b4d>`_
:author:
    Dan Stillman
:date:
    2017-07-11 17:29 (JST)


------

Batch object deletions during syncing

:commit:
    `701a46b <https://github.com/Juris-M/zotero/commit/701a46ba84a37e54baa9130bd677f8e6db246ecb>`_
:author:
    Dan Stillman
:date:
    2017-07-11 17:28 (JST)


------

Try harder to prevent sync-in-progress messages

:commit:
    `fd7c2a6 <https://github.com/Juris-M/zotero/commit/fd7c2a6f6f163ac5500a1655e567161ddf29cfb1>`_
:author:
    Dan Stillman
:date:
    2017-07-11 15:42 (JST)


------

Fix array length check in Item.setType()

:commit:
    `c701f34 <https://github.com/Juris-M/zotero/commit/c701f34aaa935766a851963e25afb4c889a1937b>`_
:author:
    Dan Stillman
:date:
    2017-07-11 15:41 (JST)


------

Fix a potential sync error with child attachments

:commit:
    `e683b2b <https://github.com/Juris-M/zotero/commit/e683b2be07b3220a610089e765674c0429515c89>`_
:author:
    Dan Stillman
:date:
    2017-07-11 14:22 (JST)

If a standalone attachment existed in a collection and then was added to
a parent (e.g., via Create Parent Item), and attachment metadata was
also changed at the same time (e.g., due to file syncing), the
'collection item must be top level' trigger could throw on another
syncing computer. To work around this, remove collections first, then
make changes to the parentItemID columns, and then add new collections.


------

Increase snapshot save timeout to 30 seconds

:commit:
    `3272387 <https://github.com/Juris-M/zotero/commit/3272387afe2731d1e5df1d9edf9798c8c4741a44>`_
:author:
    Dan Stillman
:date:
    2017-07-10 12:29 (JST)

We should maybe have a shorter timeout in the connector to show an error
and avoid showing the save-to-server dialog, but let's err on the side
of not cancelling saves.


------

Cancel snapshot saves after 15 seconds

:commit:
    `32dedc6 <https://github.com/Juris-M/zotero/commit/32dedc6fb4ae091fdc2c1e863e6a1b643909056c>`_
:author:
    Dan Stillman
:date:
    2017-07-10 12:05 (JST)

Otherwise a save could go on forever and the connector will never show
an error, and if you quit Zotero the connector will show the
save-to-server dialog (though the connector should have its own
timeout).


------

Vacuum database automatically on successful integrity check

:commit:
    `e551777 <https://github.com/Juris-M/zotero/commit/e55177798948da38a9ba69609b4d27928bf3029e>`_
:author:
    Dan Stillman
:date:
    2017-05-30 10:25 (JST)

Firefox does this for Places, so we might as well too.


------

Update locales from Transifex

:commit:
    `6ffd7b1 <https://github.com/Juris-M/zotero/commit/6ffd7b11cb0dff2ca6274582d410fdc9d8189eec>`_
:author:
    Dan Stillman
:date:
    2017-07-10 05:40 (JST)


------

Fix Firefox 55 breakage (and remove unnecessary locale lookups)

:commit:
    `55b2dc3 <https://github.com/Juris-M/zotero/commit/55b2dc39bf6d0127579b355d2f92c919ced0f00b>`_
:author:
    Dan Stillman
:date:
    2017-07-09 19:56 (JST)

We were manually looking up the current locale in various places and
passing it to nsIStringBundleService::createBundle(), but that hasn't
even been a supported argument for years. (I assume it was a long time
ago?)


------

Allow dragging onto welcome text

:commit:
    `59edca7 <https://github.com/Juris-M/zotero/commit/59edca783e2b2cff520b2af9e986315ab8b21ea3>`_
:author:
    Dan Stillman
:date:
    2017-07-09 18:49 (JST)


------

Make About window narrower

:commit:
    `9151246 <https://github.com/Juris-M/zotero/commit/91512469d5b1a74b755bf7b8f49dea135b1ca4cb>`_
:author:
    Dan Stillman
:date:
    2017-07-09 10:31 (JST)


------

Update non-English strings

:commit:
    `2ca10b3 <https://github.com/Juris-M/zotero/commit/2ca10b3d54d492389b38c919c59717145e9bcd51>`_
:author:
    Dan Stillman
:date:
    2017-07-09 08:14 (JST)


------

Update About dialog

:commit:
    `a7e2e73 <https://github.com/Juris-M/zotero/commit/a7e2e73e51ca753fb4748947139f7e76d628775c>`_
:author:
    Dan Stillman
:date:
    2017-07-09 08:06 (JST)

- Replace Developers section with text that links to RRCHNM, the credits
page, and Get Involved.
- Remove dedicated zotero.org link
- Only show link underlines on hover


------

Update locales from Transifex

:commit:
    `73ac743 <https://github.com/Juris-M/zotero/commit/73ac74332cf7d2fad16cad8b03de14b5a348838f>`_
:author:
    Dan Stillman
:date:
    2017-07-09 06:49 (JST)


------

Update translators

:commit:
    `e5972b7 <https://github.com/Juris-M/zotero/commit/e5972b705f8d4ddf97a82aebfa9f34f8c65c3f20>`_
:author:
    Dan Stillman
:date:
    2017-07-09 06:25 (JST)


------

Additional checks for stopped sync

:commit:
    `2ba773d <https://github.com/Juris-M/zotero/commit/2ba773d612d8a9a3de315d8d21df61f6253acac2>`_
:author:
    Dan Stillman
:date:
    2017-07-08 08:05 (JST)


------

Update locales from Transifex

:commit:
    `043c0ac <https://github.com/Juris-M/zotero/commit/043c0ac6b7ee1a8d461a12d84c52c29ceb61a225>`_
:author:
    Dan Stillman
:date:
    2017-07-08 07:29 (JST)


------

Add "Delete Automatic Tags in This Library…" option to tag selector menu

:commit:
    `de3b47f <https://github.com/Juris-M/zotero/commit/de3b47fd782dc0dd19f6bb392ede8da46b8b535b>`_
:author:
    Dan Stillman
:date:
    2017-07-08 07:14 (JST)

I think it might be worth having a tag management window that lets you
view tags as a grid, sort by column (e.g., type), select ranges, delete,
consolidate, etc., but until then, this fulfills a popular request.


------

Use spread operator in flattenArguments

:commit:
    `941ae54 <https://github.com/Juris-M/zotero/commit/941ae5499c3fce34fad5981d76292bc5e73a616e>`_
:author:
    Dan Stillman
:date:
    2017-07-08 07:18 (JST)


------

Allow single string in Zotero.Utilities.pluralize()

:commit:
    `f2af774 <https://github.com/Juris-M/zotero/commit/f2af77498ba3e312d92c3765365a4f1dff1f7901>`_
:author:
    Dan Stillman
:date:
    2017-07-08 07:18 (JST)

Zotero.Utilities.pluralize(5, 'tag') will produce 'tags' automatically


------

Fix full-text sync tests after 1da18e4ca79

:commit:
    `e2d7c7e <https://github.com/Juris-M/zotero/commit/e2d7c7e999d2cddd26b30780c2f37cd41d501c97>`_
:author:
    Dan Stillman
:date:
    2017-07-07 19:23 (JST)


------

Update 2x icon styles

:commit:
    `c55cacf <https://github.com/Juris-M/zotero/commit/c55cacfb5ab26c38e0e54a572f2c26bb73afa210>`_
:author:
    Dan Stillman
:date:
    2017-07-07 18:21 (JST)


------

Log errors from Zotero.serial()

:commit:
    `3b2d7eb <https://github.com/Juris-M/zotero/commit/3b2d7eb9708c56f8e30a9eed1af69637e78b9cc4>`_
:author:
    Dan Stillman
:date:
    2017-07-07 18:20 (JST)

And output errors in concurrentCaller if not otherwise logged


------

Update deprecated openPreferences() call

:commit:
    `71fb054 <https://github.com/Juris-M/zotero/commit/71fb054efeb60358d2248d4869c38f0362d6eb16>`_
:author:
    Dan Stillman
:date:
    2017-07-07 18:20 (JST)


------

Update non-English strings

:commit:
    `cb913ff <https://github.com/Juris-M/zotero/commit/cb913ffccb3adb6f867199af20a671559a00d9d0>`_
:author:
    Dan Stillman
:date:
    2017-07-07 18:30 (JST)


------

Add "Stop Sync" button

:commit:
    `1da18e4 <https://github.com/Juris-M/zotero/commit/1da18e4ca7919098be3811690e1c8d70b388567c>`_
:author:
    Dan Stillman
:date:
    2017-07-07 18:18 (JST)

Stops all syncing (not just file syncing like in 4.0) as soon as
possible.


------

Update non-English strings

:commit:
    `7729dca <https://github.com/Juris-M/zotero/commit/7729dcafc0bee94603f73ee8fee65ee75c7095e9>`_
:author:
    Dan Stillman
:date:
    2017-07-07 16:40 (JST)


------

Add intro text to middle pane when My Library is empty

:commit:
    `b07fdc6 <https://github.com/Juris-M/zotero/commit/b07fdc633553e689242a436c773e823e4fdb759a>`_
:author:
    Dan Stillman
:date:
    2017-07-07 16:20 (JST)

This replaces the Quick Start Guide item in earlier versions.

Also increases size of My Publications intro text when the window is
wider.


------

Moving Utilities.itemToServerJSON() to the connector codebase

:commit:
    `1ddb380 <https://github.com/Juris-M/zotero/commit/1ddb38036eba228d1577968fcbef54a42e9720ff>`_
:author:
    Adomas Venčkauskas
:date:
    2017-07-06 19:37 (JST)

See Zotero.Item.toJSON() for similar functionality


------

Use 'async' configOptions property to indicate promisified translators

:commit:
    `f7c1c56 <https://github.com/Juris-M/zotero/commit/f7c1c56d7d9117e8c4c1dcac40e9518e2462cd39>`_
:author:
    Dan Stillman
:date:
    2017-07-06 04:25 (JST)

Instead of >"2017-07-05"

Addresses https://github.com/zotero/translators/issues/1353


------

Fix error in export options window if translator has no options

:commit:
    `5ff5ea8 <https://github.com/Juris-M/zotero/commit/5ff5ea88fbe8e90c78ed0a86df0e7d7393eae465>`_
:author:
    Dan Stillman
:date:
    2017-07-06 04:25 (JST)


------

Fix overlapping lines in attachment box with empty title

:commit:
    `53c3f62 <https://github.com/Juris-M/zotero/commit/53c3f62f1ebbeb4d2f57d59c76d7fd5abbc31624>`_
:author:
    Dan Stillman
:date:
    2017-07-06 00:33 (JST)


------

Make 909b4b31c80 apply to search translators too, and fix tests

:commit:
    `198bd70 <https://github.com/Juris-M/zotero/commit/198bd70b59f8ceacb1bbc048f7b8a46e74709c1f>`_
:author:
    Dan Stillman
:date:
    2017-07-05 22:15 (JST)

Addresses https://github.com/zotero/translators/issues/1353


------

Assume import translators updated after today are async

:commit:
    `909b4b3 <https://github.com/Juris-M/zotero/commit/909b4b31c80dc83fa58c74a1f3e6d692cf4f399f>`_
:author:
    Dan Stillman
:date:
    2017-07-05 21:52 (JST)

See https://github.com/zotero/translators/issues/1353 for details.

minVersion is problematic for various reasons, so this is safer.


------

Do a manual check from the repo when enabling auto translator/style updates

:commit:
    `d73fc63 <https://github.com/Juris-M/zotero/commit/d73fc63273ca69e7ac4427001bed3735bcc02a6b>`_
:author:
    Dan Stillman
:date:
    2017-07-05 18:45 (JST)


------

Fix streaming server connection when auto-sync is on with no credentials

:commit:
    `d40822c <https://github.com/Juris-M/zotero/commit/d40822c5409313f68808ed06a344c1406e891df7>`_
:author:
    Dan Stillman
:date:
    2017-07-05 18:45 (JST)


------

Update translators

:commit:
    `dc71af9 <https://github.com/Juris-M/zotero/commit/dc71af9110e2e575f6ed59870b9573dae913fef9>`_
:author:
    Dan Stillman
:date:
    2017-07-05 18:18 (JST)


------

Update locales from Transifex

:commit:
    `22e99a4 <https://github.com/Juris-M/zotero/commit/22e99a421c05d2ab57e487536a426325c1bfb34d>`_
:author:
    Dan Stillman
:date:
    2017-07-05 18:17 (JST)


------

Update translators/styles at startup and on push notifications

:commit:
    `86cf7cb <https://github.com/Juris-M/zotero/commit/86cf7cbd0768cb39a8d62895779f1c80c685f58d>`_
:author:
    Dan Stillman
:date:
    2017-07-05 07:03 (JST)

Previously, if a translator or style was fixed, people didn't get the
fix until their client checked the repository for updates, which could
take up to 24 hours. Now, in addition to checking once a day, we check
every time Zotero is started and also when we receive a notification
from the streaming server, which happens immediately after a translators
or style is updated on GitHub. To avoid DDoSing ourselves, the
notification includes a random delay (within a given period) before the
update is triggered by the client.

The streaming server connection is now made when either "Automatically
check for updated translators and styles" or "Sync automatically" is
enabled. It can be disabled via the extensions.zotero.streaming.enabled
pref.


------

Update locales from Transifex

:commit:
    `b476c7c <https://github.com/Juris-M/zotero/commit/b476c7c7c5e7dde9a55cecb693eb297cfd5a0386>`_
:author:
    Dan Stillman
:date:
    2017-07-03 16:11 (JST)


------

Update submodules

:commit:
    `7769b5d <https://github.com/Juris-M/zotero/commit/7769b5d09e986fe835b6835de79a8dbd24e70d58>`_
:author:
    Dan Stillman
:date:
    2017-07-03 16:03 (JST)


------

Fix WebSocket reconnect delay

:commit:
    `c867b3b <https://github.com/Juris-M/zotero/commit/c867b3bb8550f93ffdb97b555898cf4cce899ac1>`_
:author:
    Dan Stillman
:date:
    2017-07-02 14:44 (JST)

Only reset delay generator after regular message, not on connect,
because a subscription failure happens after a connect. Also cancel
reconnect if auto-sync is disabled during the failure delay.


------

Only skip retry for WebSocket errors between 4400 and 4499

:commit:
    `2efd712 <https://github.com/Juris-M/zotero/commit/2efd7121b8537d3953ebf4fe9028686a9f70d20b>`_
:author:
    Dan Stillman
:date:
    2017-07-02 14:32 (JST)


------

Update locales from Transifex

:commit:
    `72feaab <https://github.com/Juris-M/zotero/commit/72feaab6f4f294ee77a8d19768de44306bdde48a>`_
:author:
    Dan Stillman
:date:
    2017-07-01 20:07 (JST)


------

Clean up Sync -> Reset pane

:commit:
    `dc89cfb <https://github.com/Juris-M/zotero/commit/dc89cfb3baafee3f64002cde51b0e9446bf6261e>`_
:author:
    Dan Stillman
:date:
    2017-07-01 19:58 (JST)

- Hide radio buttons for now, since there's only one option in each
section
- Tweak text for file sync history reset


------

Add Sync.Storage.Local.updateSyncStates()

:commit:
    `88088c6 <https://github.com/Juris-M/zotero/commit/88088c68db1215bde94b92c6c91e6d7f258b5e28>`_
:author:
    Dan Stillman
:date:
    2017-07-01 19:26 (JST)

This speeds up updating of sync states, particularly after resetting
file sync history.


------

Don't calculate total file size for every uploaded attachment

:commit:
    `b72f1c2 <https://github.com/Juris-M/zotero/commit/b72f1c2a08014b74d689a99368f900d996868ddb>`_
:author:
    Dan Stillman
:date:
    2017-07-01 19:22 (JST)

This required checking the file size of every file (including auxiliary
snapshot files) in every attachment to be uploaded, and it was an
estimate anyway, because snapshots are compressed, so we kept track of
the compression ratio, but there was no particular reason to think later
files would have the same ratio... In any case, we're not currently
displaying file sync progress in 5.0 anyway, and while we should, we can
probably just show a count of attachments remaining.


------

Add .contentType and .charset options for importFromFile()

:commit:
    `9a3ff2d <https://github.com/Juris-M/zotero/commit/9a3ff2d2446e9be269a3c4187bd5d255ce36393a>`_
:author:
    Dan Stillman
:date:
    2017-07-01 19:20 (JST)

And use them in new importTextAttachment() and importHTMLAttachment()
test support functions. These can be used to avoid needing a hidden
browser for determining the character set of the imported text
documents.


------

Automatically run JS build process before tests if not running

:commit:
    `b1fad5a <https://github.com/Juris-M/zotero/commit/b1fad5a3106b047efbd7038b766bc302bfcac25c>`_
:author:
    Dan Stillman
:date:
    2017-07-01 19:28 (JST)


------

Close directory iterator in Attachments.hasMultipleFiles()

:commit:
    `b633038 <https://github.com/Juris-M/zotero/commit/b633038bf9245888908fd319ab1c5e336daf4399>`_
:author:
    Dan Stillman
:date:
    2017-07-01 07:08 (JST)

This was leaving a file descriptor to the directory open during file
syncing.


------

Don't leave file descriptor open in md5Async()

:commit:
    `22eab3e <https://github.com/Juris-M/zotero/commit/22eab3e09d57c378a91d20a5973b4654975d26ea>`_
:author:
    Dan Stillman
:date:
    2017-07-01 06:54 (JST)

This could cause "Too many open files" errors during file syncing


------

Detect full disk during data migration on Windows (hopefully)

:commit:
    `536d725 <https://github.com/Juris-M/zotero/commit/536d7254fb9c64b669f7c6e626fd93cb2314dca9>`_
:author:
    Dan Stillman
:date:
    2017-07-01 05:59 (JST)


------

Fix "not a directory" file sync error

:commit:
    `010bf3b <https://github.com/Juris-M/zotero/commit/010bf3b8f98a291b85a2157a5b4acfd285bf3c98>`_
:author:
    Dan Stillman
:date:
    2017-07-01 05:59 (JST)


------

Update non-English strings

:commit:
    `16b2e82 <https://github.com/Juris-M/zotero/commit/16b2e82f74e8fc9a58ad89d7e2a191d71f5c6ce7>`_
:author:
    Dan Stillman
:date:
    2017-06-29 17:11 (JST)


------

Move connector install option to Tools menu

:commit:
    `aca774e <https://github.com/Juris-M/zotero/commit/aca774e132b883826093c5648204448d4e9ad56d>`_
:author:
    Dan Stillman
:date:
    2017-06-29 16:50 (JST)

And rename from "Install Browser Connectors…" to "Install Browser Connector"


------

Update non-English strings

:commit:
    `2119b5a <https://github.com/Juris-M/zotero/commit/2119b5ab755c21afc077cfddab1c9a9bccfbd87e>`_
:author:
    Dan Stillman
:date:
    2017-06-28 05:26 (JST)


------

"Install Browser Extensions" -> "Install Browser Connectors"

:commit:
    `f6ac173 <https://github.com/Juris-M/zotero/commit/f6ac1732f220eae24f5bdbdce8dc369e480726c3>`_
:author:
    Dan Stillman
:date:
    2017-06-28 05:23 (JST)

And change link from /extensions to /download/connectors


------

Merge new English string

:commit:
    `a56af4a <https://github.com/Juris-M/zotero/commit/a56af4a101b9cf433270997862f853c91fd4f3c2>`_
:author:
    Dan Stillman
:date:
    2017-06-27 14:10 (JST)


------

Show error and doc prefs if style can't be found or retrieved

:commit:
    `9b54ca9 <https://github.com/Juris-M/zotero/commit/9b54ca9ca779fcaa10d1f62b371d48c8c179e085>`_
:author:
    Dan Stillman
:date:
    2017-06-27 14:09 (JST)

Previously a 404 downloading the file would prevent opening the doc
prefs window.


------

Add .SOURCE string to version in install.rdf

:commit:
    `db56acf <https://github.com/Juris-M/zotero/commit/db56acfde678a1166ec557045c714dd5458471a9>`_
:author:
    Frank Bennett
:date:
    2017-06-27 13:19 (JST)


------

Don't enforce Host header in translation server

:commit:
    `a15261b <https://github.com/Juris-M/zotero/commit/a15261b3b3015667fb6d5151391b2d28d05fc7c4>`_
:author:
    Dan Stillman
:date:
    2017-06-27 08:01 (JST)

Fixes #1251
Fixes zotero/translation-server#48


------

Update locales from Transifex

:commit:
    `b2eea91 <https://github.com/Juris-M/zotero/commit/b2eea914e415179fbbce2201298508b5466cfd4b>`_
:author:
    Dan Stillman
:date:
    2017-06-27 08:00 (JST)


------

Add "Install Browser Extensions…" menu option

:commit:
    `1d56497 <https://github.com/Juris-M/zotero/commit/1d564970dcb3989cef84ca6c562f8263336b85b9>`_
:author:
    Dan Stillman
:date:
    2017-06-27 07:49 (JST)


------

Allow Zotero.Server requests with `Host: localhost`

:commit:
    `9372979 <https://github.com/Juris-M/zotero/commit/9372979fb54d6d2c52334abfab6ce72faf6c29e1>`_
:author:
    Dan Stillman
:date:
    2017-06-26 20:52 (JST)

Previously only Host: 127.0.0.1 was allowed. (The check prevents a DNS
rebinding attack.)

This allows requests to translation-server using localhost
(zotero/translation-server#48).

Fixes #125


------

Fix permissions errors in child translators in translation-server

:commit:
    `df22169 <https://github.com/Juris-M/zotero/commit/df2216960bdee217eaf8a240221246e4dc987b55>`_
:author:
    Dan Stillman
:date:
    2017-06-26 20:19 (JST)


------

Fix a debug log line

:commit:
    `2414ec6 <https://github.com/Juris-M/zotero/commit/2414ec64721411a3ced005da5651f464c2a850b0>`_
:author:
    Adomas Venčkauskas
:date:
    2017-06-26 15:49 (JST)


------

Merge branch 'jurism-5.0-dev' into jurism-5.0

:commit:
    `f21f89e <https://github.com/Juris-M/zotero/commit/f21f89e900e0caed85b1b0f14bfa329e8d1e6f99>`_
:author:
    Frank Bennett
:date:
    2017-06-26 12:48 (JST)


------

Merge branch 'jurism-5.0' of github.com:Juris-M/zotero into jurism-5.0

:commit:
    `5ec969c <https://github.com/Juris-M/zotero/commit/5ec969ce7c63816a0c9782908d7bab399cdddc84>`_
:author:
    Frank Bennett
:date:
    2017-06-26 12:47 (JST)


------

Fix signatures on itemToCSLJSON

:commit:
    `bb2004c <https://github.com/Juris-M/zotero/commit/bb2004ca120e53c2293f37ed79952753c4a13c40>`_
:author:
    Frank Bennett
:date:
    2017-06-26 12:46 (JST)


------

Persist export format selection

:commit:
    `9a87a69 <https://github.com/Juris-M/zotero/commit/9a87a69136a172d21a0f835e8c17a59cd7e73b19>`_
:author:
    Frank Bennett
:date:
    2017-06-26 08:13 (JST)


------

Update translators

:commit:
    `af84cde <https://github.com/Juris-M/zotero/commit/af84cde2d76dcfc6a7a1abfdab18929075cb21f8>`_
:author:
    Frank Bennett
:date:
    2017-06-26 08:12 (JST)


------

Partial fix for CSL JSON export in translation-server

:commit:
    `56f9f04 <https://github.com/Juris-M/zotero/commit/56f9f04340685edc6d0e2145a655b3cc2eba46fc>`_
:author:
    Dan Stillman
:date:
    2017-06-25 17:38 (JST)

Zotero.Item doesn't exist in translation-server

Addresses zotero/translation-server#12


------

Fix JS compiling in watch mode

:commit:
    `e9a80cb <https://github.com/Juris-M/zotero/commit/e9a80cb5303ba006bdd29a6ccdf368593a8776cd>`_
:author:
    Dan Stillman
:date:
    2017-06-25 08:24 (JST)


------

Support `false` as deprecated translate() argument

:commit:
    `145a45e <https://github.com/Juris-M/zotero/commit/145a45e8e174eaaf8f9cb759efdbbeacffbfbe08>`_
:author:
    Dan Stillman
:date:
    2017-06-25 08:24 (JST)


------

Check for Zotero.Prefs.getAsync() explicitly, not with isConnector

:commit:
    `8f63a5e <https://github.com/Juris-M/zotero/commit/8f63a5e20df6d58f41b1f78ff7d253101eda8826>`_
:author:
    Dan Stillman
:date:
    2017-06-25 08:23 (JST)

translation-server doesn't have Zotero.Prefs.getAsync() and isn't a
connector


------

Update submodules

:commit:
    `5aaefff <https://github.com/Juris-M/zotero/commit/5aaefff1d6064a1b63fc6f84cdd16b7622f40a4c>`_
:author:
    Dan Stillman
:date:
    2017-06-24 14:25 (JST)


------

Update citeproc-js to 1.1.171

:commit:
    `2ab46d3 <https://github.com/Juris-M/zotero/commit/2ab46d3697dcb4a6f2d813ab13b56a94ce19ddab>`_
:author:
    Dan Stillman
:date:
    2017-06-24 14:24 (JST)


------

Fix infinite loop restoring from trash if item has itself as relation

:commit:
    `d8f8d8a <https://github.com/Juris-M/zotero/commit/d8f8d8a3f88fc8f3ad9e821660f9bc1090265593>`_
:author:
    Dan Stillman
:date:
    2017-06-24 14:22 (JST)


------

Remove some code that's unnecessary now that we're Fx52+ everywhere

:commit:
    `e89778c <https://github.com/Juris-M/zotero/commit/e89778c1ab4e3e596e3687f86fe47caf201cfc8f>`_
:author:
    Dan Stillman
:date:
    2017-06-23 17:59 (JST)


------

Fix "Generate Report from Collection" when sorting by creator or date

:commit:
    `ef1715e <https://github.com/Juris-M/zotero/commit/ef1715e9ee622bf5655558ba593b6aa6f9488e6d>`_
:author:
    Dan Stillman
:date:
    2017-06-22 18:48 (JST)


------

"A new database file has been created" -> "A new database has been created"

:commit:
    `92435f3 <https://github.com/Juris-M/zotero/commit/92435f398d9fc254a70c94a6da52f6610c3e2ad9>`_
:author:
    Dan Stillman
:date:
    2017-06-22 06:03 (JST)


------

Tweak incompatible-DB error text

:commit:
    `79b98dd <https://github.com/Juris-M/zotero/commit/79b98ddc54b70becca4766615856f19632e78b20>`_
:author:
    Dan Stillman
:date:
    2017-06-22 06:02 (JST)


------

Fix for some child items not showing up

:commit:
    `f2cc220 <https://github.com/Juris-M/zotero/commit/f2cc2204c9de6603817fce01869b051039d61d2a>`_
:author:
    Dan Stillman
:date:
    2017-06-21 19:50 (JST)

https://forums.zotero.org/discussion/66140/5-0-beta-missing-item-attachments


------

Update Travis to Firefox 54.0 and 52.0.3

:commit:
    `e825781 <https://github.com/Juris-M/zotero/commit/e8257813f135f8181a06c517ddf64cc4642b92dc>`_
:author:
    Dan Stillman
:date:
    2017-06-21 14:23 (JST)

Windows uses 52.2.0esr, but we need an unbranded build, and there don't
seem to be unbranded builds of the ESR.


------

Add build/ directory to Travis cache

:commit:
    `d2400de <https://github.com/Juris-M/zotero/commit/d2400de87082fae99f5a5d623b6d4a55ccc055a0>`_
:author:
    Dan Stillman
:date:
    2017-06-21 14:23 (JST)


------

Merge new English strings

:commit:
    `38652f9 <https://github.com/Juris-M/zotero/commit/38652f9362b470226f1dda75f939d598c156a376>`_
:author:
    Dan Stillman
:date:
    2017-06-21 12:12 (JST)


------

Update broken string in ancient-database dialog

:commit:
    `abf08de <https://github.com/Juris-M/zotero/commit/abf08deb9dac0f128ac182db52335f83d2b33c94>`_
:author:
    Dan Stillman
:date:
    2017-06-21 11:54 (JST)


------

Update translators

:commit:
    `4419348 <https://github.com/Juris-M/zotero/commit/441934893996e2ce8e70dc828240ce3742529167>`_
:author:
    Frank Bennett
:date:
    2017-06-21 08:33 (JST)


------

Better build process (#1248)

:commit:
    `b53fabb <https://github.com/Juris-M/zotero/commit/b53fabbb589f7a54e0162a59d19a115f7c3be701>`_
:author:
    Tom Najdek
:date:
    2017-06-21 08:18 (JST)

* Remove gulp, replace with custom scripts
* Symlink entire dirs where possible (fixes #1232)
* Significantly speed up subsequent builds (fixes #1238)
* Watch process now observes new/removed files, not only changed
* Add ignoreMask, exclude all files with names starting with a #
* Better logging during builds
* Update travis.yml to use new, non-gulp-based build

------

Fix error from f3b461ae1d when no duplicate items found

:commit:
    `3259b63 <https://github.com/Juris-M/zotero/commit/3259b63081bc2e88d6b142a16601c9b75f798845>`_
:author:
    Dan Stillman
:date:
    2017-06-20 18:58 (JST)


------

Fix getAsync() integer warning when highlighting item collections

:commit:
    `041f793 <https://github.com/Juris-M/zotero/commit/041f79379cf423c53073ab13911e1e313390f098>`_
:author:
    Dan Stillman
:date:
    2017-06-20 18:39 (JST)


------

Don't use DB transaction when loading Duplicates Items

:commit:
    `f3b461a <https://github.com/Juris-M/zotero/commit/f3b461ae1d7f6ce20e9efc03a446390a6f57801a>`_
:author:
    Dan Stillman
:date:
    2017-06-20 18:35 (JST)

This should help avoid some timeouts when clicking into that view.


------

Don't schedule feed checks during tests

:commit:
    `a2d874c <https://github.com/Juris-M/zotero/commit/a2d874c8bc9d0f1b8cc49460985e547200c57b59>`_
:author:
    Dan Stillman
:date:
    2017-06-20 13:51 (JST)

Tests create lots of fake feeds with invalid URLs, so auto-updating
would otherwise hang and block the explicit feed updates done by other
tests.


------

Add -e flag to runtests.sh to stop tests after a given file

:commit:
    `c11f106 <https://github.com/Juris-M/zotero/commit/c11f1069d7136b2c9c60d2cfa8445f67f8da765e>`_
:author:
    Dan Stillman
:date:
    2017-06-20 13:47 (JST)

This is useful when trying to debug an error that only happens after a
number of other tests have run -- specify -e and run tests from either
an earlier file with -s or from the beginning.


------

Refactor Connector.callMethod calls to use the promisified form

:commit:
    `dcfddac <https://github.com/Juris-M/zotero/commit/dcfddac519e6bcb9842b6279ed13525ce95563ce>`_
:author:
    Adomas Venčkauskas
:date:
    2017-06-19 18:18 (JST)


------

Temporary checkin of modded build.sh

:commit:
    `abb3983 <https://github.com/Juris-M/zotero/commit/abb398341294906dc2e014bcaa8ac9ddb46a85c9>`_
:author:
    Frank Bennett
:date:
    2017-06-19 16:25 (JST)


------

Fix legacy syntax in Juris-M code.

:commit:
    `f791618 <https://github.com/Juris-M/zotero/commit/f7916183d97eb69b6a4afb4f12bb2ad4b128a73d>`_
:author:
    Frank Bennett
:date:
    2017-06-19 16:17 (JST)


------

Update locales from upstream Zotero

:commit:
    `28de8fc <https://github.com/Juris-M/zotero/commit/28de8fc7cdbb2dff61c14866246ea72310a4c93b>`_
:author:
    Frank Bennett
:date:
    2017-06-19 16:16 (JST)


------

Don't run feeds update until after schema update promise

:commit:
    `7c020da <https://github.com/Juris-M/zotero/commit/7c020da594077710091826192793ceead632a21c>`_
:author:
    Dan Stillman
:date:
    2017-06-19 13:53 (JST)

And tweak feed scheduling in general


------

Don't initialize DB backup idle observer until after schema init

:commit:
    `1372949 <https://github.com/Juris-M/zotero/commit/13729495235260c4cb17d93071c8825d157fa003>`_
:author:
    Dan Stillman
:date:
    2017-06-19 13:49 (JST)


------

Disable reset translators/styles buttons while in progress

:commit:
    `b590c43 <https://github.com/Juris-M/zotero/commit/b590c43edbf1c32d62cf7cdbbb78d0a6817732a6>`_
:author:
    Dan Stillman
:date:
    2017-06-19 13:43 (JST)

We should have a better progress notification, but this is better than
nothing.


------

Additional prefs in tests to bypass Telemetry prompt

:commit:
    `26145c3 <https://github.com/Juris-M/zotero/commit/26145c3892b1c03204fac7040fbdb4454206c7e6>`_
:author:
    Dan Stillman
:date:
    2017-06-19 13:42 (JST)


------

Maybe fix browser test failures by preloading translators

:commit:
    `1a0f125 <https://github.com/Juris-M/zotero/commit/1a0f125d787f817740f97a95ce83cbb899e4353c>`_
:author:
    Dan Stillman
:date:
    2017-06-19 13:40 (JST)


------

Retry objects from sync queue on first sync of session and manual sync

:commit:
    `444d779 <https://github.com/Juris-M/zotero/commit/444d77958d09ebb939addf67cbf32743cd9747db>`_
:author:
    Dan Stillman
:date:
    2017-06-19 04:37 (JST)

Previously they were retried only on a backoff schedule and after a
client upgrade, but that would make it difficult to report errors
(because you'd see the error but it would then go away if you clicked
Sync again).


------

Add getKeys() method to API Client

:commit:
    `15a0f3b <https://github.com/Juris-M/zotero/commit/15a0f3bbe3f93074b2d5a046cec06b201c5a8543>`_
:author:
    Dan Stillman
:date:
    2017-06-18 21:42 (JST)


------

Restore locally deleted collections and searches that changed remotely

:commit:
    `47741e7 <https://github.com/Juris-M/zotero/commit/47741e75fa865cdd8f908a2aa32154e833f98520>`_
:author:
    Dan Stillman
:date:
    2017-06-18 18:49 (JST)

Also restore items that were in the collections


------

"Zotero Standalone" -> "Zotero" in a couple messages

:commit:
    `24b43ae <https://github.com/Juris-M/zotero/commit/24b43ae3a781d63b4cfd9d64eaf326a1d5e5dcd9>`_
:author:
    Dan Stillman
:date:
    2017-06-18 12:05 (JST)


------

On missing data dir, remove "Restart Later" for "Use Default" option

:commit:
    `6144c8f <https://github.com/Juris-M/zotero/commit/6144c8f96919211ce940cbb8a84ff104296ede34>`_
:author:
    Dan Stillman
:date:
    2017-06-18 11:30 (JST)


------

Missing data directory tweaks

:commit:
    `13283b0 <https://github.com/Juris-M/zotero/commit/13283b008d1b118707bbf8f3da424223ddaaa055>`_
:author:
    Dan Stillman
:date:
    2017-06-18 11:14 (JST)

- Fix "Locate" button
- Don't offer "Restart Later" option after selecting new location
- Show "Quit" instead of "OK"


------

Merge from upstream Zotero

:commit:
    `cf057db <https://github.com/Juris-M/zotero/commit/cf057db09455b55b2ec4df4f9f37a0f62e324f85>`_
:author:
    Frank Bennett
:date:
    2017-06-18 08:19 (JST)


------

Update jurisdiction (add QB)

:commit:
    `2a4b750 <https://github.com/Juris-M/zotero/commit/2a4b750bb6ab05051c4ec80bf452c5b42848ef06>`_
:author:
    Frank Bennett
:date:
    2017-06-17 07:12 (JST)


------

Never auto-select new groups, since they always come from syncs

:commit:
    `859c506 <https://github.com/Juris-M/zotero/commit/859c506913feb1ba14a010a69ad043d2f3e6c3c1>`_
:author:
    Dan Stillman
:date:
    2017-06-16 18:56 (JST)

Fixes test failure from 2e74cd7831


------

Don't select new feeds or groups during sync

:commit:
    `2e74cd7 <https://github.com/Juris-M/zotero/commit/2e74cd7831665a217c9f442294c99b48ec2b6924>`_
:author:
    Dan Stillman
:date:
    2017-06-16 18:40 (JST)


------

Remove Zotero_Browser tests for new Firefox windows

:commit:
    `6904183 <https://github.com/Juris-M/zotero/commit/69041832e7dbb5059c0fa9089476bb49ca0dce0c>`_
:author:
    Dan Stillman
:date:
    2017-06-16 17:52 (JST)

I'm not sure if we need the browser tests at all -- we still translate
some things via hidden browsers, and I'm not sure what we have that
tests that -- but we definitely don't need to test saving before the
Zotero pane is opened.


------

Disable full-text content processor during sync and on pref off

:commit:
    `c6cb469 <https://github.com/Juris-M/zotero/commit/c6cb46907e566cd6c28b0c509e52c8a47f1b0dea>`_
:author:
    Dan Stillman
:date:
    2017-06-16 17:49 (JST)

Turning off full-text content syncing now stops the background processor


------

Fix skipClientDateModifiedUpdate DataObject save option

:commit:
    `2f93065 <https://github.com/Juris-M/zotero/commit/2f9306598660923ed4bbaf8ed06896dbb928bea5>`_
:author:
    Dan Stillman
:date:
    2017-06-16 14:56 (JST)


------

Fix one cause of "operation timed out" during sync

:commit:
    `8de0b02 <https://github.com/Juris-M/zotero/commit/8de0b024f03f7a9852292a9bdb598a7c9c3589a5>`_
:author:
    Dan Stillman
:date:
    2017-06-16 14:50 (JST)

Remove some unnecessary transactions in Sync.Data.Local


------

Bail on error in Travis

:commit:
    `3e0ab63 <https://github.com/Juris-M/zotero/commit/3e0ab63b9bfeca636e01919896e456bd70e3e173>`_
:author:
    Dan Stillman
:date:
    2017-06-16 07:55 (JST)

I think it's more useful to see that tests failed sooner than to see all
errors from a test run, particularly since earlier failures often cause
meaningless later failures anyway. And since spurious failures are
fairly common, this will also let us restart tests more quickly without
searching for "[FAIL]" in the output while it's running.

This does mean that, if there's a legitimate test failure you
overlooked, it might be worth running tests locally after fixing it to
make sure there aren't other instances of the problem that can be fixed
at the same time.


------

Try to reduce impact of full-text content processor

:commit:
    `5c45652 <https://github.com/Juris-M/zotero/commit/5c4565288748eb2dc992be21456d2f0c35e011f5>`_
:author:
    Dan Stillman
:date:
    2017-06-16 07:22 (JST)

- Don't start checking for idle until UI is ready + 30 seconds
- Increase idle delay from 5 seconds to 30 seconds
- Increase interval from 100 ms to 200 ms


------

Add encrypted AWS_SECRET_ACCESS_KEY to Travis config

:commit:
    `0d592a9 <https://github.com/Juris-M/zotero/commit/0d592a950c709b9d717918d85592a72e566a8ca9>`_
:author:
    Dan Stillman
:date:
    2017-06-16 05:27 (JST)

Follow-up to c25d6bf4692


------

Deploy before running tests (#1246)

:commit:
    `384ce23 <https://github.com/Juris-M/zotero/commit/384ce236debb558271fd7db930c92581d04f08f4>`_
:author:
    Martynas Bagdonas
:date:
    2017-06-15 23:39 (JST)


------

Move start page URL to config

:commit:
    `97bac9f <https://github.com/Juris-M/zotero/commit/97bac9fadc3a0ad665492a9ba42abb8210a4633b>`_
:author:
    Dan Stillman
:date:
    2017-06-15 15:39 (JST)


------

Fix "o is undefined" sync error

:commit:
    `d9eb8ff <https://github.com/Juris-M/zotero/commit/d9eb8ff3c3a0deca0817e3b2012b808880a575ee>`_
:author:
    Dan Stillman
:date:
    2017-06-14 20:52 (JST)


------

Disable debug output for Zotero.Date.strToDate()

:commit:
    `1bb6217 <https://github.com/Juris-M/zotero/commit/1bb6217ec13c406e24357ec9f0abf2286dbe4b04>`_
:author:
    Dan Stillman
:date:
    2017-06-14 15:58 (JST)

Too messy, and unlikely that we need it in submitted output


------

Ignore note markup conflicts without cache when text content matches

:commit:
    `4032edc <https://github.com/Juris-M/zotero/commit/4032edcf7d9ee959ce64f0e5090a39a05054a36a>`_
:author:
    Dan Stillman
:date:
    2017-06-14 15:35 (JST)


------

Close prefs window after WebDAV Verify Server tests

:commit:
    `3ebc238 <https://github.com/Juris-M/zotero/commit/3ebc238320a7f000da31cf4edea37236c0cabd48>`_
:author:
    Dan Stillman
:date:
    2017-06-14 16:36 (JST)


------

Fix incorrect purging of files on WebDAV

:commit:
    `ccb3035 <https://github.com/Juris-M/zotero/commit/ccb30351c0b7961fe8ee2ac11378585749e6dc0e>`_
:author:
    Dan Stillman
:date:
    2017-06-14 16:18 (JST)


------

Don't repeat filenames in results from WebDAV _deleteStorageFiles()

:commit:
    `700aa53 <https://github.com/Juris-M/zotero/commit/700aa5377b838bed6bf8ed4b1c405a58137d0492>`_
:author:
    Dan Stillman
:date:
    2017-06-14 15:59 (JST)


------

Only purge orphaned WebDAV files if downloads completed successfully

:commit:
    `db6e984 <https://github.com/Juris-M/zotero/commit/db6e9841db56375767b770dc26666df427e258aa>`_
:author:
    Dan Stillman
:date:
    2017-06-14 13:41 (JST)


------

Sort groups in Libraries to Sync window

:commit:
    `d2d5896 <https://github.com/Juris-M/zotero/commit/d2d5896b0b0cc7d54c4eefbfc4e5334b8283c787>`_
:author:
    Dan Stillman
:date:
    2017-06-14 10:30 (JST)


------

Update package.json and package-lock.json

:commit:
    `7dd9cee <https://github.com/Juris-M/zotero/commit/7dd9cee0d40b07ecb09f3d4b8f75d2d048e263c0>`_
:author:
    Dan Stillman
:date:
    2017-06-14 07:04 (JST)


------

Update locales from Transifex

:commit:
    `88089e2 <https://github.com/Juris-M/zotero/commit/88089e290dc4db59070cc55894d09c836bc0f84d>`_
:author:
    Dan Stillman
:date:
    2017-06-14 07:03 (JST)


------

Merge pull request #1245 from adomasven:feature/prompt-different-drive-migration

:commit:
    `5e4d3a3 <https://github.com/Juris-M/zotero/commit/5e4d3a35b8c06ede278edd7df5c7e07ca00ee424>`_
:author:
    Dan Stillman
:date:
    2017-06-14 06:17 (JST)

Don't auto-migrate data dir if target on a different drive


------

Don't auto-migrate data dir if target on a different drive

:commit:
    `a17b486 <https://github.com/Juris-M/zotero/commit/a17b486e4b39c6d6ce5c7e177ecd9655f03191cd>`_
:author:
    Adomas Venčkauskas
:date:
    2017-06-12 20:14 (JST)

See https://forums.zotero.org/discussion/comment/277632/#Comment_277632


------

Fix typo in config.js

:commit:
    `3601cdd <https://github.com/Juris-M/zotero/commit/3601cdde70fb164ab66fd1c88603759436aa4003>`_
:author:
    Frank Bennett
:date:
    2017-06-12 19:39 (JST)


------

Merge changes from upstream Zotero master

:commit:
    `1d797b4 <https://github.com/Juris-M/zotero/commit/1d797b4e0a6ace56034f23f1c7a61c53558e6b76>`_
:author:
    Frank Bennett
:date:
    2017-06-12 15:21 (JST)


------

Update jurisdiction data

:commit:
    `2e6528c <https://github.com/Juris-M/zotero/commit/2e6528c4ea885c0d78ae43958699fa2878c15a73>`_
:author:
    Frank Bennett
:date:
    2017-06-12 14:42 (JST)


------

Updates for submodules

:commit:
    `f239ddc <https://github.com/Juris-M/zotero/commit/f239ddc74beee835501a14e3ee5c90eba889b726>`_
:author:
    Frank Bennett
:date:
    2017-06-12 07:21 (JST)


------

Merge branch 'jurism-5.0' of github.com:Juris-M/zotero into jurism-5.0

:commit:
    `854ddc3 <https://github.com/Juris-M/zotero/commit/854ddc37261e681e602f707518094b1fea9aaac1>`_
:author:
    Frank Bennett
:date:
    2017-06-11 16:23 (JST)


------

Update translators

:commit:
    `737c349 <https://github.com/Juris-M/zotero/commit/737c349021c9258d344c2e0d318580f3912348dd>`_
:author:
    Frank Bennett
:date:
    2017-06-11 16:22 (JST)


------

Better logging when revealing attachment in filesystem

:commit:
    `98544ed <https://github.com/Juris-M/zotero/commit/98544edde567ee22be20c3c68854221c1651fe62>`_
:author:
    Dan Stillman
:date:
    2017-06-09 03:10 (JST)


------

Better logging for getAsync() non-integer errors

:commit:
    `8913178 <https://github.com/Juris-M/zotero/commit/8913178cf298d24ce2f634f9e879dc065e6de4ec>`_
:author:
    Dan Stillman
:date:
    2017-06-09 03:10 (JST)


------

Merge pull request #1243 from tnajdek/master

:commit:
    `0495f29 <https://github.com/Juris-M/zotero/commit/0495f2920a36bd665fea4f92f9b6f2bb190f28eb>`_
:author:
    Dan Stillman
:date:
    2017-06-08 01:37 (JST)

Fix a problem with race condition during builds 

------

Symlink task should not have clean task as pre-requisite

:commit:
    `3a6776f <https://github.com/Juris-M/zotero/commit/3a6776f0fa5d02e9b6203449cbecbab54d14369d>`_
:author:
    Tom Najdek
:date:
    2017-06-08 01:32 (JST)


------

Fix context menu options for multi-item selection (broken in 5d16352f57)

:commit:
    `b5424b4 <https://github.com/Juris-M/zotero/commit/b5424b4a7128a89b355fd627ace219abfdcf31cd>`_
:author:
    Dan Stillman
:date:
    2017-06-08 00:50 (JST)


------

Update submodules

:commit:
    `718a0dd <https://github.com/Juris-M/zotero/commit/718a0dd5716598b94ef8b9fa1f26c226ec39efc0>`_
:author:
    Frank Bennett
:date:
    2017-06-06 21:55 (JST)


------

Upload Travis ZIPs to subdirectory of download bucket

:commit:
    `ad37741 <https://github.com/Juris-M/zotero/commit/ad37741fddc64c6fd31d2641b5f0e2eae2a2466a>`_
:author:
    Dan Stillman
:date:
    2017-06-06 17:59 (JST)


------

Update translators

:commit:
    `d81e463 <https://github.com/Juris-M/zotero/commit/d81e463507432e3b05a6b56ffdbe99a1597f5772>`_
:author:
    Dan Stillman
:date:
    2017-06-06 17:37 (JST)


------

Update citeproc-js to 1.1.170

:commit:
    `75ddd87 <https://github.com/Juris-M/zotero/commit/75ddd879bc116f60fbd4a923e223216ee660c4d9>`_
:author:
    Dan Stillman
:date:
    2017-06-06 17:35 (JST)


------

Add package-lock.json

:commit:
    `d9a8502 <https://github.com/Juris-M/zotero/commit/d9a8502e2714d9ad809a3d20549925b911833fbb>`_
:author:
    Dan Stillman
:date:
    2017-06-06 17:29 (JST)


------

Make uploaded build ZIPs publicly readable

:commit:
    `a80d29d <https://github.com/Juris-M/zotero/commit/a80d29d917fd4221ee8bc96a944af6ac9618966c>`_
:author:
    Dan Stillman
:date:
    2017-06-06 17:28 (JST)


------

Tweak build for CL

:commit:
    `6270afa <https://github.com/Juris-M/zotero/commit/6270afa464a9dbfceb279d9aa1c58748dc6a69e1>`_
:author:
    fbennett
:date:
    2017-06-06 16:57 (JST)


------

Travis deployment updates

:commit:
    `294102b <https://github.com/Juris-M/zotero/commit/294102b27db7df8716686a92473765b3d34dbc18>`_
:author:
    Dan Stillman
:date:
    2017-06-06 15:41 (JST)

Use commit hash as ZIP filename and only build on release channel


------

Merge pull request #1240 from tnajdek/master

:commit:
    `98f1ac5 <https://github.com/Juris-M/zotero/commit/98f1ac5edbd716791f19140e90b1ea37acbefad8>`_
:author:
    Dan Stillman
:date:
    2017-06-06 15:18 (JST)

Tweaks to make build work on Windows


------

Relax last-sync-time check in sync runner test

:commit:
    `cd6079d <https://github.com/Juris-M/zotero/commit/cd6079d869a325d64605f4666ffa09853f7bbe9a>`_
:author:
    Dan Stillman
:date:
    2017-06-06 15:14 (JST)


------

Upload ZIP of build files to S3 after successful Travis run

:commit:
    `dcb3d74 <https://github.com/Juris-M/zotero/commit/dcb3d740bc968609eea46a515b2b2006f61aaf5e>`_
:author:
    Dan Stillman
:date:
    2017-06-06 14:52 (JST)


------

Ignore all bluebird files when processing during the build

:commit:
    `4ca3cf1 <https://github.com/Juris-M/zotero/commit/4ca3cf1487cd37d38acef1677fb9f08c81f6939d>`_
:author:
    Tom Najdek
:date:
    2017-06-04 02:25 (JST)


------

Tweak test runner to work in MSYS environment on Windows

:commit:
    `e86bbfb <https://github.com/Juris-M/zotero/commit/e86bbfbda0454e27f0b783ade8d8a52b9bfcf8c3>`_
:author:
    Tom Najdek
:date:
    2017-06-04 01:54 (JST)


------

On Windows, copy files instead of symlinking

:commit:
    `e207124 <https://github.com/Juris-M/zotero/commit/e207124f88932a469b6f2633cdf8c76fd3a9084b>`_
:author:
    Tom Najdek
:date:
    2017-06-04 01:48 (JST)


------

Add support for glob in babel-worker ignored paths

:commit:
    `c335099 <https://github.com/Juris-M/zotero/commit/c335099465f5587e26cf1804652a8fa985ba8056>`_
:author:
    Tom Najdek
:date:
    2017-06-04 00:50 (JST)

* Also fixes an issue with handling paths on Windows


------

Translators tweak

:commit:
    `fd90e39 <https://github.com/Juris-M/zotero/commit/fd90e3970b26be8fefbfcb6c6f27e7d682044ca8>`_
:author:
    Frank Bennett
:date:
    2017-06-06 12:27 (JST)


------

Ensure build process exits with non-zero result on failure

:commit:
    `f98ccde <https://github.com/Juris-M/zotero/commit/f98ccdee46005a0a51c0f0f89fcf824e91a2253f>`_
:author:
    Tom Najdek
:date:
    2017-06-02 22:18 (JST)

* During build, error is printed out with stack and process exits
* During development, initial build behaves as above, however when
  watching files, errors are displayed but watch process does not
  exit allowing fixes without a complete rebuild.


------

Temporarily disable test for non-integer getAsync()

:commit:
    `b79ecfb <https://github.com/Juris-M/zotero/commit/b79ecfb5fea512f94b4bc4d2ebdb552b85ae6907>`_
:author:
    Dan Stillman
:date:
    2017-06-05 16:00 (JST)


------

Make non-integer id passed to getAsync() non-fatal for now

:commit:
    `71d636e <https://github.com/Juris-M/zotero/commit/71d636e8fb18a31c617544899c8df6f7f31c71f0>`_
:author:
    Dan Stillman
:date:
    2017-06-05 10:35 (JST)

Follow-up to 4e1937680f7


------

Fix report generation after 4e1937680f7

:commit:
    `653f041 <https://github.com/Juris-M/zotero/commit/653f041140b23b32e7df75c638628b3bcd2c6e43>`_
:author:
    Dan Stillman
:date:
    2017-06-05 10:33 (JST)


------

Update citeproc-js

:commit:
    `494683c <https://github.com/Juris-M/zotero/commit/494683c3469c184305f69953675dd89ae949a41b>`_
:author:
    fbennett
:date:
    2017-06-04 18:37 (JST)


------

Protect against invalid creators embedded in documents (avoid breaking extraction)

:commit:
    `35da4b0 <https://github.com/Juris-M/zotero/commit/35da4b0148dbdcf0424beaf1cd6d8a523c341917>`_
:author:
    fbennett
:date:
    2017-06-04 18:35 (JST)


------

Fix logging of unhandled promise rejections

:commit:
    `47f7f3a <https://github.com/Juris-M/zotero/commit/47f7f3a93f11dfd3f5b4718e8a22e6bdc55d275d>`_
:author:
    Dan Stillman
:date:
    2017-06-02 23:37 (JST)


------

Fix separate note window (regression from 4e1937680f)

:commit:
    `4b0e2a9 <https://github.com/Juris-M/zotero/commit/4b0e2a955421fff49f156f60acfaf2b5e4117f40>`_
:author:
    Dan Stillman
:date:
    2017-06-02 23:36 (JST)


------

Add alternative to padStart for test in Fx45

:commit:
    `898a1dc <https://github.com/Juris-M/zotero/commit/898a1dc679b40ed4de7d32e197a6995c3c5dff7f>`_
:author:
    Dan Stillman
:date:
    2017-06-02 05:44 (JST)


------

Add explicit npm i

:commit:
    `53842ad <https://github.com/Juris-M/zotero/commit/53842adefc510abc7572407d29708cc751e856ce>`_
:author:
    Dan Stillman
:date:
    2017-06-02 05:08 (JST)

(Travis might call this automatically before 'script', but we need it
before 'gulp build', and we don't want to do 'gulp build' in 'script',
because the output isn't relevant and if it fails there's no need to run
the tests.)


------

Use Node.js mode on Travis

:commit:
    `595ab59 <https://github.com/Juris-M/zotero/commit/595ab592aa4d468b3b04f869bf78118675025544>`_
:author:
    Dan Stillman
:date:
    2017-06-02 05:02 (JST)


------

Fix Firefox 54 download on Travis

:commit:
    `140217d <https://github.com/Juris-M/zotero/commit/140217d0fed02c869a9919947f2151f530ea6a8c>`_
:author:
    Dan Stillman
:date:
    2017-06-02 04:46 (JST)


------

Remove sinon-as-promised from package.json

:commit:
    `201af23 <https://github.com/Juris-M/zotero/commit/201af23484fe50c7d6cc903b37a5ffdc0e2311b3>`_
:author:
    Dan Stillman
:date:
    2017-06-02 04:44 (JST)


------

Switch to Firefox 54 Beta on Travis

:commit:
    `6c9f386 <https://github.com/Juris-M/zotero/commit/6c9f3864e7c71cca1b45321567b60a254ad60b53>`_
:author:
    Dan Stillman
:date:
    2017-06-02 04:34 (JST)


------

Run build step before running tests on Travis

:commit:
    `d889d26 <https://github.com/Juris-M/zotero/commit/d889d263943f187290e7e4af9ec337bfe556d9a8>`_
:author:
    Dan Stillman
:date:
    2017-06-02 04:34 (JST)


------

Fix some breakage from 013dc958b3

:commit:
    `05ff16c <https://github.com/Juris-M/zotero/commit/05ff16c17fa03b47ff418029e78ff910f497abae>`_
:author:
    Dan Stillman
:date:
    2017-06-02 04:33 (JST)


------

Update some Sinon reset() calls

:commit:
    `ede03f4 <https://github.com/Juris-M/zotero/commit/ede03f4366dfa96edb98ab09602c3450cc6e0c21>`_
:author:
    Dan Stillman
:date:
    2017-06-02 04:30 (JST)

In Sinon 2, reset() now resets both behavior and history, so if a stub
specifies behavior and we want to use it again, we have to call
resetHistory().


------

Enable retainLines in Babel config

:commit:
    `522391b <https://github.com/Juris-M/zotero/commit/522391bc3ecf10b4cd182964b25e93ff4b4bea41>`_
:author:
    Dan Stillman
:date:
    2017-06-02 04:23 (JST)

Addresses #1235 (maybe sufficiently, depending on how much we care about
wacky code in the builds)


------

Merge pull request #1239 from tnajdek/master

:commit:
    `04db119 <https://github.com/Juris-M/zotero/commit/04db119ae8a56d766ee86cc88cc789ac3bcb8f8c>`_
:author:
    Dan Stillman
:date:
    2017-06-02 04:38 (JST)

Enable running tests against babelized code in build/dir


------

Tweak test syntax that breaks with current version of chai-as-promised

:commit:
    `a59b78e <https://github.com/Juris-M/zotero/commit/a59b78e59eb23d443515089b803faaf239bae0b7>`_
:author:
    Tom Najdek
:date:
    2017-06-01 01:20 (JST)

* Second parameter should be an optional message, however is treated
  as a string that should be contained in the error message


------

Remove "Error:" expected in error messages.

:commit:
    `4ec6925 <https://github.com/Juris-M/zotero/commit/4ec6925220e09f616a5ad19e64bd60f4303d109b>`_
:author:
    Tom Najdek
:date:
    2017-06-01 00:52 (JST)

* "Error:" seems to have been injected into the message by Bluebird,
  but that's no longer the case


------

Modernize sinon.stub() calls

:commit:
    `063e13e <https://github.com/Juris-M/zotero/commit/063e13ef22dce93c7bbe3275d7cee0b89511007b>`_
:author:
    Tom Najdek
:date:
    2017-06-01 00:44 (JST)


------

Add a shutdown hook in Zotero.Prefs to unregister observer

:commit:
    `506b358 <https://github.com/Juris-M/zotero/commit/506b35840ed6c3d165394cafb4e9951b8af0dc6d>`_
:author:
    Tom Najdek
:date:
    2017-06-01 00:36 (JST)

* Without this, preference change observers stack, triggering multiple
  times if Zotero is re-initialized multiple times within the same
  browser instance (like in tests)


------

Re-introduce custom implementation of setTimeout

:commit:
    `aa6037c <https://github.com/Juris-M/zotero/commit/aa6037c088958387e8090b259989d940f3f04f63>`_
:author:
    Tom Najdek
:date:
    2017-06-01 00:32 (JST)

* Resolves issues with some tests failing


------

Support generators in tests via coMocha, instead of custom code

:commit:
    `289b049 <https://github.com/Juris-M/zotero/commit/289b0493771199a8b68a877dac4277535290fb2d>`_
:author:
    Tom Najdek
:date:
    2017-06-01 00:30 (JST)

* coMocha offers better error stack trace


------

Fixes and tweaks to make tests work with babelized code

:commit:
    `14bf318 <https://github.com/Juris-M/zotero/commit/14bf3184bb67bdc6c6845605e5da370ed8e282c2>`_
:author:
    Tom Najdek
:date:
    2017-06-01 00:28 (JST)

* Use mocha, chai & sinon from the npm. As of sinon 2.0
  sinon-as-promised is no longer required so it is removed
* Tweak code to re-use the same loader with the same environment
  throghout the code
* Introduce browserify step for testing tools that only provide
  node-compatible libraries (sinon, chai-as-promised)
* Introduce copy step for test data to resolve multiple issues with
  tests depending on files not being symlinks
* Re-introduce custom implementation of setTimeout to resolve issues
  with few tests
* Re-introduce custom Bluebird Promises config & monkey patch


------

Run tests from build dir

:commit:
    `748c302 <https://github.com/Juris-M/zotero/commit/748c30206f2d9d988812b81ac58600ae5558e533>`_
:author:
    Dan Stillman
:date:
    2017-05-24 14:01 (JST)


------

Remove stray code line

:commit:
    `ad2cee2 <https://github.com/Juris-M/zotero/commit/ad2cee2b22ad60e9a4395ab66e9364939f45e173>`_
:author:
    fbennett
:date:
    2017-05-31 17:25 (JST)


------

Protect against empty authors the creep through

:commit:
    `fe85f02 <https://github.com/Juris-M/zotero/commit/fe85f0257230945cbc58d1ffc2700ae878f3d5a3>`_
:author:
    fbennett
:date:
    2017-05-31 17:07 (JST)


------

Protect against empty creators in multi segments

:commit:
    `0c1ed96 <https://github.com/Juris-M/zotero/commit/0c1ed96cbf20c8f85087370c6d88cb0995a519ed>`_
:author:
    fbennett
:date:
    2017-05-31 16:48 (JST)


------

Update submodules

:commit:
    `aba2d7b <https://github.com/Juris-M/zotero/commit/aba2d7b41766e85cfac25bf029ed1b1f5cd8ef25>`_
:author:
    fbennett
:date:
    2017-05-31 16:15 (JST)


------

Merge branch 'jurism-5.0' of github.com:Juris-M/zotero into jurism-5.0

:commit:
    `b02c03c <https://github.com/Juris-M/zotero/commit/b02c03cfea4669ffeb0659d9262ec1822f42e4e5>`_
:author:
    fbennett
:date:
    2017-05-31 16:08 (JST)


------

Protect against empty creator with no multi segment

:commit:
    `996ff61 <https://github.com/Juris-M/zotero/commit/996ff611578976728fc03c89d6eba451bc72dcf7>`_
:author:
    fbennett
:date:
    2017-05-31 16:08 (JST)


------

Log Zotero.alert() calls to the terminal

:commit:
    `a55852e <https://github.com/Juris-M/zotero/commit/a55852ea1c0d61b7330c6fc30417869306b63867>`_
:author:
    Dan Stillman
:date:
    2017-05-31 13:43 (JST)


------

Fix auto-restore of automatic backup on DB corruption error

:commit:
    `61452a8 <https://github.com/Juris-M/zotero/commit/61452a835b0442c09a1c5743bfbc343e598de6b9>`_
:author:
    Dan Stillman
:date:
    2017-05-31 13:42 (JST)


------

Restore cleaner error and item-selection button for note-too-long error

:commit:
    `013dc95 <https://github.com/Juris-M/zotero/commit/013dc958b303c717ee4bbb0d5861d254fd27fb4b>`_
:author:
    Dan Stillman
:date:
    2017-05-31 13:07 (JST)


------

Don't show "Remove Item from Collection" for child items

:commit:
    `5d16352 <https://github.com/Juris-M/zotero/commit/5d16352f5733f377e4e01ecb8f8d0f96b9ccab4a>`_
:author:
    Dan Stillman
:date:
    2017-05-28 07:38 (JST)

Test forthcoming once tests are working again


------

Don't break getLocaleCollation() in Firefox <54 (after a73b2403b)

:commit:
    `aa05920 <https://github.com/Juris-M/zotero/commit/aa0592011758e05a4c0e306a0553ad6fa5a9a516>`_
:author:
    Dan Stillman
:date:
    2017-05-27 18:37 (JST)


------

Update help URLs and move to config file

:commit:
    `d6c36ae <https://github.com/Juris-M/zotero/commit/d6c36ae9a35d5d1e55a4cefd2a145034e1c6eda7>`_
:author:
    Dan Stillman
:date:
    2017-05-27 08:10 (JST)


------

Fix getLocaleCollation() in Firefox 54

:commit:
    `a73b240 <https://github.com/Juris-M/zotero/commit/a73b2403b0f775cc966141799e59a72303787e1c>`_
:author:
    Dan Stillman
:date:
    2017-05-27 18:29 (JST)


------

Avoid exit on test error

:commit:
    `df2f97d <https://github.com/Juris-M/zotero/commit/df2f97d88e67427da585140860441f40e44a3a3f>`_
:author:
    Frank Bennett
:date:
    2017-05-27 08:35 (JST)


------

Update styles

:commit:
    `ae36b1e <https://github.com/Juris-M/zotero/commit/ae36b1eb0615ad9d2e10ccac3689084f374118fa>`_
:author:
    Frank Bennett
:date:
    2017-05-27 08:24 (JST)


------

Use gfind if available (for Mac OS)

:commit:
    `24c6bc4 <https://github.com/Juris-M/zotero/commit/24c6bc4903f96f8c4e407f81a6c18f961b38ad75>`_
:author:
    Frank Bennett
:date:
    2017-05-27 08:20 (JST)


------

Additional locale service updates for Firefox 54 compatibility

:commit:
    `d5a8a34 <https://github.com/Juris-M/zotero/commit/d5a8a3420da821533ed9bce9e48f3321c20822a9>`_
:author:
    Dan Stillman
:date:
    2017-05-26 14:37 (JST)

Follow-up to 0ac37ab65a4


------

Fix crashing for some actions in duplicate items

:commit:
    `7fc188b <https://github.com/Juris-M/zotero/commit/7fc188b1722517fa29ca23cf6b61bd262062e60c>`_
:author:
    Dan Stillman
:date:
    2017-05-25 07:20 (JST)

Necessary after more strict error handling in c4411e1ad3e


------

Increase gulp.watch() interval to decrease CPU usage

:commit:
    `8f116f6 <https://github.com/Juris-M/zotero/commit/8f116f60c45dafd6ace14659828f78002f3f2bce>`_
:author:
    Dan Stillman
:date:
    2017-05-25 06:59 (JST)

This brings idle CPU usage down to 1.5% from 14% for me.


------

Restore logging of unhandled errors from Bluebird (since 9aa057edee)

:commit:
    `8bc76dd <https://github.com/Juris-M/zotero/commit/8bc76dd2dbc2282818028e859f76fe7cb5758505>`_
:author:
    Dan Stillman
:date:
    2017-05-25 06:47 (JST)


------

Convert non-standard octal escape sequences to hex in test runner

:commit:
    `1e45928 <https://github.com/Juris-M/zotero/commit/1e459287deb3eee8841aad7c6f4775782cbc3e80>`_
:author:
    Dan Stillman
:date:
    2017-05-24 14:12 (JST)


------

Add example async/await to test Babel transform

:commit:
    `aa321f3 <https://github.com/Juris-M/zotero/commit/aa321f34957ebf5bcaba81b6425d5745e85814b1>`_
:author:
    Dan Stillman
:date:
    2017-05-24 13:59 (JST)


------

Move require() into ZoteroContext and fix Bluebird module path

:commit:
    `6afc58a <https://github.com/Juris-M/zotero/commit/6afc58a62960c64154e35be8fb26bd0fd1a2edd3>`_
:author:
    Dan Stillman
:date:
    2017-05-24 13:58 (JST)


------

Update citeproc-js to 1.1.169

:commit:
    `319edae <https://github.com/Juris-M/zotero/commit/319edae7f272ea4e160247cc8f91cf717de794df>`_
:author:
    Dan Stillman
:date:
    2017-05-24 06:39 (JST)


------

Display relative path to files in build output

:commit:
    `79ed9e8 <https://github.com/Juris-M/zotero/commit/79ed9e8448690686169407695a0f13d4c3f96c4d>`_
:author:
    Dan Stillman
:date:
    2017-05-24 06:25 (JST)

Not just filenames


------

Merge pull request #1230 from tnajdek/babel

:commit:
    `9cd0c5a <https://github.com/Juris-M/zotero/commit/9cd0c5a6749a14f57450d185497b562a57251c6c>`_
:author:
    Dan Stillman
:date:
    2017-05-24 06:00 (JST)

Introduce a build system

------

Introduce a build system

:commit:
    `9aa057e <https://github.com/Juris-M/zotero/commit/9aa057edeef8285255c9ad63d5f526c9cbc21713>`_
:author:
    Tom Najdek
:date:
    2017-05-23 08:01 (JST)

* Add a multi-process, gulp-based build system to support es6 features,
  async/await, jsx and scss
* Add a package.json to support dependency management and allow starting
  the build process via npm
* Replace embedded Bluebird library with npm-installed one
* Add react, react-dom and web-library
* Introduce a custom require() loader in include.js as well as a minimal
  local require() implementation in various other places


------

Rebrand in about.xul

:commit:
    `5d2834d <https://github.com/Juris-M/zotero/commit/5d2834dc9d3bf63a280663d1d39bd7bdb366d278>`_
:author:
    fbennett
:date:
    2017-05-23 15:34 (JST)


------

Rebrand in en-US locale

:commit:
    `85301f3 <https://github.com/Juris-M/zotero/commit/85301f3f0cb204ac8d4e3bb9b30b98727fbef2e0>`_
:author:
    fbennett
:date:
    2017-05-23 15:33 (JST)


------

Avoid a warning from a storageRequest test from the item not existing

:commit:
    `c0f7f60 <https://github.com/Juris-M/zotero/commit/c0f7f6070a9929ec942ebea49f345ef48add0327>`_
:author:
    Dan Stillman
:date:
    2017-05-23 15:11 (JST)


------

Convert some object ids from strings to integers after 4e1937680

:commit:
    `e1fb28f <https://github.com/Juris-M/zotero/commit/e1fb28faa91da4b50539b3edaf3443b4cb79cc7c>`_
:author:
    Dan Stillman
:date:
    2017-05-23 15:10 (JST)


------

Throw error if non-number is passed to Zotero.DataObjects.getAsync()

:commit:
    `4e19376 <https://github.com/Juris-M/zotero/commit/4e1937680f759f5aacb1ab6db43a3f930d6856ec>`_
:author:
    Dan Stillman
:date:
    2017-05-23 15:04 (JST)

Previously, if an id was psased as a string and the id existed in the
cache, an error wouldn't be thrown, but if there id wasn't in the cache
(e.g., because it was in an unloaded library) it would. This requires an
integer in all cases.

Note that, among other things, any code that gets ids from object keys
will need to convert them to integers before passing to getAsync().


------

Update translators

:commit:
    `a550f94 <https://github.com/Juris-M/zotero/commit/a550f94b4fad1143b10db8c6330a789458c54f0c>`_
:author:
    fbennett
:date:
    2017-05-23 15:02 (JST)


------

Change repository URL

:commit:
    `1db0845 <https://github.com/Juris-M/zotero/commit/1db0845d412b53df09bff152f6a3e7913255193f>`_
:author:
    fbennett
:date:
    2017-05-23 14:40 (JST)


------

Skip edit check if skipAll is passed to object save

:commit:
    `265df6d <https://github.com/Juris-M/zotero/commit/265df6d48c5bffceeb17c56f6f00710963ba5a00>`_
:author:
    Dan Stillman
:date:
    2017-05-23 06:29 (JST)


------

Firefox 54 compatiblity for locale service

:commit:
    `0ac37ab <https://github.com/Juris-M/zotero/commit/0ac37ab65a4f04f028f7c91a0493dd964463f9ee>`_
:author:
    Dan Stillman
:date:
    2017-05-22 19:04 (JST)

Services.locale.getApplicationLocale() -> getAppLocale()
(nsILocaleService -> mozILocaleService)

It's possible this will fix some of the locale resolution problems in
Standalone:

"This is actually a meaningful change because the old one was actually
using OS locale for platforms other than Windows. The new one is using
the app locale for all platforms." [1]

[1] https://bugzilla.mozilla.org/show_bug.cgi?id=1346674#c0


------

Firefox 54 compatibility: File.createFromFileName() returns a promise

:commit:
    `1b8704f <https://github.com/Juris-M/zotero/commit/1b8704f1334002ff4d1fb27cfd88d26d082c347c>`_
:author:
    Dan Stillman
:date:
    2017-05-22 19:04 (JST)


------

Firefox 54 compatibility: rename "new" and "delete" XBL methods

:commit:
    `a3eea03 <https://github.com/Juris-M/zotero/commit/a3eea03a38da31783342da8a1fea3fed70c796b4>`_
:author:
    Dan Stillman
:date:
    2017-05-22 19:03 (JST)


------

Merge branch 'jurism-5.0' of github.com:Juris-M/zotero into jurism-5.0

:commit:
    `fa4e791 <https://github.com/Juris-M/zotero/commit/fa4e791ff90ff1fa8a2838709accc4ccf38a7354>`_
:author:
    fbennett
:date:
    2017-05-21 23:09 (JST)


------

Adjustments to port number

:commit:
    `33de9a6 <https://github.com/Juris-M/zotero/commit/33de9a625cf60a778e25df08f10819452b2fa5f0>`_
:author:
    fbennett
:date:
    2017-05-21 21:46 (JST)


------

Shift comms port from 23119 to 24119 for Juris-M

:commit:
    `d28d535 <https://github.com/Juris-M/zotero/commit/d28d53540a3865dd700221b19d1852839ef19147>`_
:author:
    fbennett
:date:
    2017-05-21 21:37 (JST)


------

Update locales from upstream Zotero

:commit:
    `c019f8b <https://github.com/Juris-M/zotero/commit/c019f8b77778382c87c4905a64a838f837231af4>`_
:author:
    fbennett
:date:
    2017-05-21 16:42 (JST)


------

Merge from upstream Zotero

:commit:
    `b00e675 <https://github.com/Juris-M/zotero/commit/b00e675a599ff4f502ee81354f9ec3fc8dd69be5>`_
:author:
    fbennett
:date:
    2017-05-21 16:40 (JST)


------

Fix refresh when opening related-item box in note editor

:commit:
    `ddc9989 <https://github.com/Juris-M/zotero/commit/ddc9989d820700d217ea74b800630f29e4c93056>`_
:author:
    Dan Stillman
:date:
    2017-05-20 01:01 (JST)


------

Make a missing related item not fatal

:commit:
    `1cbc244 <https://github.com/Juris-M/zotero/commit/1cbc2440ec45ac085f2fad51443cada58a6cab98>`_
:author:
    Dan Stillman
:date:
    2017-05-20 00:21 (JST)

Since item relations are synced with individual items, an item can exist
before the item it's related to has been downloaded.


------

Remove related-item relations when deleting item

:commit:
    `fc4eb53 <https://github.com/Juris-M/zotero/commit/fc4eb5308fb242152348d9d98bcc9301cae066fe>`_
:author:
    Dan Stillman
:date:
    2017-05-19 21:30 (JST)


------

Remove reference to 'publications' library type in URI.getLibraryPath()

:commit:
    `8edd883 <https://github.com/Juris-M/zotero/commit/8edd8830dad26713fcc2b9ea1099bafc4efda780>`_
:author:
    Dan Stillman
:date:
    2017-05-19 21:19 (JST)


------

Add Zotero.URI.getURIItemLibraryKeyFromDB()

:commit:
    `90a27f8 <https://github.com/Juris-M/zotero/commit/90a27f8d4b540eddb30ff64c2422dca17746aa40>`_
:author:
    Dan Stillman
:date:
    2017-05-19 21:09 (JST)

Allows getting libraryID and key without relying on library data being
loaded (e.g., at startup)


------

Allow functions for testing and repair in DB integrity checks

:commit:
    `5873e55 <https://github.com/Juris-M/zotero/commit/5873e554f19525defb2171627ef97ec9567c2bdb>`_
:author:
    Dan Stillman
:date:
    2017-05-19 20:08 (JST)

This can be used for things that can't be checked or repaired with SQL
alone, or that are too difficult to do that way.


------

Use COUNT(*) > 1 for DB integrity check queries

:commit:
    `caf61be <https://github.com/Juris-M/zotero/commit/caf61bec2feaf09fb4fdfdf9afccef1d84e8e840>`_
:author:
    Dan Stillman
:date:
    2017-05-19 19:33 (JST)


------

Update citeproc-js to 1.1.167

:commit:
    `cf12543 <https://github.com/Juris-M/zotero/commit/cf125435fb991252d211b60947debbeb3600c1a1>`_
:author:
    Dan Stillman
:date:
    2017-05-19 17:51 (JST)


------

Merge locales from Transifex

:commit:
    `74fe4b3 <https://github.com/Juris-M/zotero/commit/74fe4b31f981ec21835efb057810ff36c21771cf>`_
:author:
    Dan Stillman
:date:
    2017-05-18 10:38 (JST)


------

Update localized string name

:commit:
    `05dcc11 <https://github.com/Juris-M/zotero/commit/05dcc11a8d256f091ee956c5e72312800bde2dfc>`_
:author:
    Dan Stillman
:date:
    2017-05-18 10:29 (JST)

Most localizations still say "Firefox" for this string, so this will
clear those.


------

Add item sanity check to note editor

:commit:
    `d9fbccc <https://github.com/Juris-M/zotero/commit/d9fbccca67fe2b98a36b3f303f8404b4a569bac0>`_
:author:
    Dan Stillman
:date:
    2017-05-18 10:25 (JST)

When refreshing the note editor, store the associated itemID on the
textbox, and check it when saving to make sure it's for the expected
note. This might prevent weird situations (which I can't reproduce, but
there was a report in the forums [1]) where something goes wrong and the
note doesn't refresh when selecting a new item, and then one note's
content is saved over another's.

[1] https://forums.zotero.org/discussion/65708/


------

Crash app if there's an error selecting an item

:commit:
    `c4411e1 <https://github.com/Juris-M/zotero/commit/c4411e1ad3edb644e863c1dc857690361ec09177>`_
:author:
    Dan Stillman
:date:
    2017-05-18 10:29 (JST)


------

Fix wrong localization arg passing

:commit:
    `182cf67 <https://github.com/Juris-M/zotero/commit/182cf67a97756481477d9faa433310b986072a0a>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-16 00:26 (JST)


------

Unsaved conflict from upstream merge

:commit:
    `29d14f3 <https://github.com/Juris-M/zotero/commit/29d14f3a0bcb7daa424d18931c09a175fb4bd57c>`_
:author:
    fbennett
:date:
    2017-05-14 19:51 (JST)


------

Test for e1986b460e (export with empty attachment path)

:commit:
    `f12ae67 <https://github.com/Juris-M/zotero/commit/f12ae67c47d7a8e407f8ad8b7371ee8a657cf83c>`_
:author:
    Dan Stillman
:date:
    2017-05-14 18:26 (JST)


------

Use proper alerts for export errors

:commit:
    `7e95f8f <https://github.com/Juris-M/zotero/commit/7e95f8fc51d4d62580496baf946fb10298cf5938>`_
:author:
    Dan Stillman
:date:
    2017-05-14 18:07 (JST)


------

Fix failed export due to missing attachment path

:commit:
    `e1986b4 <https://github.com/Juris-M/zotero/commit/e1986b460e6a38c191c87229f77019ad174e2248>`_
:author:
    Dan Stillman
:date:
    2017-05-14 18:06 (JST)


------

Update csl files

:commit:
    `5966c31 <https://github.com/Juris-M/zotero/commit/5966c3187c75568b167a66cde026fee93e6bae42>`_
:author:
    fbennett
:date:
    2017-05-14 14:37 (JST)


------

Locale updates from upstream Zotero

:commit:
    `040999d <https://github.com/Juris-M/zotero/commit/040999d534b02536ec70ad204fc16af21b81ba41>`_
:author:
    fbennett
:date:
    2017-05-14 14:36 (JST)


------

Merge changes from upstream Zotero

:commit:
    `7cbb2de <https://github.com/Juris-M/zotero/commit/7cbb2de6b24dc9534d3d1168d2aa0f8b6ecfdf79>`_
:author:
    fbennett
:date:
    2017-05-14 14:32 (JST)


------

Fix clobbering of firstName field when multiple words entered in lastName field

:commit:
    `32f0c2c <https://github.com/Juris-M/zotero/commit/32f0c2cfaa4d1b15cec0062c96bfd557bc55c03e>`_
:author:
    fbennett
:date:
    2017-05-14 10:42 (JST)


------

Revert changes protecting against missing-collection sync errors

:commit:
    `93e77bb <https://github.com/Juris-M/zotero/commit/93e77bb960287296cf964c9f8f8ffb4935f3be78>`_
:author:
    fbennett
:date:
    2017-05-14 08:52 (JST)


------

Move variants with headline values when deleting creators

:commit:
    `943ad5f <https://github.com/Juris-M/zotero/commit/943ad5f89ae5c63a7f12786eff1d5578096b8f90>`_
:author:
    fbennett
:date:
    2017-05-14 08:51 (JST)


------

UI fixes for read-only notes

:commit:
    `eb42152 <https://github.com/Juris-M/zotero/commit/eb42152c420c3c8017c5be97105ffe21949a76aa>`_
:author:
    Dan Stillman
:date:
    2017-05-13 08:59 (JST)

- Don't show toolbar in read-only note editor
- Get rid of "undefined" button in CR window
- Better padding/alignment in CR window


------

Better debug logging for CR error

:commit:
    `be7cc45 <https://github.com/Juris-M/zotero/commit/be7cc45c0ecc38c4b129d42e40c228d8c0b96bea>`_
:author:
    Dan Stillman
:date:
    2017-05-13 06:53 (JST)


------

Remove accidental 'false' in 20121b9b9

:commit:
    `a92d469 <https://github.com/Juris-M/zotero/commit/a92d4694669aef828381d59bf9650995f8f3310d>`_
:author:
    Dan Stillman
:date:
    2017-05-12 19:15 (JST)


------

Fix tag selector tests (broken in 5963c02db)

:commit:
    `20121b9 <https://github.com/Juris-M/zotero/commit/20121b9b975424fdb7a32a806289d1983a040cb2>`_
:author:
    Dan Stillman
:date:
    2017-05-12 19:13 (JST)


------

Fix "Display All Tags in This Library" (broken in fe186333b)

:commit:
    `5963c02 <https://github.com/Juris-M/zotero/commit/5963c02dbb99829c33a7bbd556d62b732abfadbe>`_
:author:
    Dan Stillman
:date:
    2017-05-12 18:37 (JST)


------

Better approach to opening files after on-demand downloads

:commit:
    `9de6a55 <https://github.com/Juris-M/zotero/commit/9de6a55bce956b3b65941f632be379d8dc5e8179>`_
:author:
    Dan Stillman
:date:
    2017-05-11 14:25 (JST)

Follow-up to 44507ce20b


------

Don't show Modified if attachment is missing

:commit:
    `b3acb12 <https://github.com/Juris-M/zotero/commit/b3acb12973dde64acb9484c650f50e5336c9b47a>`_
:author:
    Dan Stillman
:date:
    2017-05-11 14:07 (JST)


------

Prevent conflicting file downloads on double double-click

:commit:
    `44507ce <https://github.com/Juris-M/zotero/commit/44507ce20b278c97f243f3d05e15e69749180bde>`_
:author:
    Dan Stillman
:date:
    2017-05-11 14:05 (JST)


------

Fix access date without time coming from sync

:commit:
    `60810ea <https://github.com/Juris-M/zotero/commit/60810ea0a06f5c82ef279749d74f8bda2efeb7db>`_
:author:
    Dan Stillman
:date:
    2017-05-11 13:44 (JST)


------

Fix attachment download progress pies

:commit:
    `a207e38 <https://github.com/Juris-M/zotero/commit/a207e388db28c5c51091283403eafe946887de36>`_
:author:
    Dan Stillman
:date:
    2017-05-11 11:48 (JST)


------

Avoid error. Differs from Zotero. Maybe not a good idea. But seems relatively safe.

:commit:
    `1c755c6 <https://github.com/Juris-M/zotero/commit/1c755c6548bfe5952e7c126c094e9c49ec0e6576>`_
:author:
    fbennett
:date:
    2017-05-10 16:44 (JST)


------

Display connection error when linking sync account

:commit:
    `5b5da41 <https://github.com/Juris-M/zotero/commit/5b5da4140bf9c59a7c5d8701a4c53fb9651693a7>`_
:author:
    Dan Stillman
:date:
    2017-05-10 15:32 (JST)


------

Fix whitespace and description in build_typeSchemaData.html

:commit:
    `b60fdac <https://github.com/Juris-M/zotero/commit/b60fdacd3ffec0ebe1dfe59f18e8630e61941018>`_
:author:
    Dan Stillman
:date:
    2017-05-09 07:51 (JST)


------

Load polyfill in tests for Object.values() support in Fx45

:commit:
    `12e7046 <https://github.com/Juris-M/zotero/commit/12e70460dcd360dd2771a09c8256e8c6757f50ed>`_
:author:
    Dan Stillman
:date:
    2017-05-09 07:45 (JST)


------

Remove unneeded connector files, update connectorTypeSchemaData.js

:commit:
    `e1f09d4 <https://github.com/Juris-M/zotero/commit/e1f09d4655b777cd5a58a568bb4cee1267251050>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-08 20:38 (JST)

Addresses zotero/zotero-connectors#121


------

Make itemFromCSLJSON independent of Zotero.Item existance.

:commit:
    `dbeecb9 <https://github.com/Juris-M/zotero/commit/dbeecb9b0a15d17ffda1065521e2442d2827a787>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-07 23:05 (JST)

Addresses !zotero/zotero-connectors#121"


------

Fix doc.prefs.noteType handling with NaN values

:commit:
    `746171a <https://github.com/Juris-M/zotero/commit/746171ab7844e66eed1f3e1f81addd8ab7832a35>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-08 15:23 (JST)


------

Update submodules

:commit:
    `12e7b7b <https://github.com/Juris-M/zotero/commit/12e7b7b851c6d636f46c4ca488a257ea45f23db4>`_
:author:
    Dan Stillman
:date:
    2017-05-08 13:14 (JST)


------

Update locales from Transifex

:commit:
    `6fa84a5 <https://github.com/Juris-M/zotero/commit/6fa84a58df734326417291ee412e6048bfb83bb9>`_
:author:
    Dan Stillman
:date:
    2017-05-08 13:12 (JST)


------

Remove extra argument in removeAttribute()

:commit:
    `c0a4771 <https://github.com/Juris-M/zotero/commit/c0a47713f3768fc5458e571384b7e323b5bf6bf9>`_
:author:
    Dan Stillman
:date:
    2017-05-08 12:45 (JST)


------

Optimize items list refreshing

:commit:
    `4273f14 <https://github.com/Juris-M/zotero/commit/4273f14fe1ce9531eedafaab547436285d12f3ee>`_
:author:
    Dan Stillman
:date:
    2017-05-08 12:36 (JST)

When refreshing, keep the previous list intact, removing only the items
that aren't in the new list and sorting only the newly added items.


------

Update citeproc-js to 1.1.165

:commit:
    `5685710 <https://github.com/Juris-M/zotero/commit/56857101ea292c2eac4e00a179fcd028c7f19467>`_
:author:
    fbennett
:date:
    2017-05-08 06:55 (JST)


------

Update locales from upstream Zotero

:commit:
    `bbfb833 <https://github.com/Juris-M/zotero/commit/bbfb8338ce1ca43465a663956b8ea6b8e71718e7>`_
:author:
    fbennett
:date:
    2017-05-07 23:07 (JST)


------

Update from upstream Zotero

:commit:
    `a3145eb <https://github.com/Juris-M/zotero/commit/a3145eb113161f1bd3c75b80a52b4eb5ca7a79c7>`_
:author:
    fbennett
:date:
    2017-05-07 23:04 (JST)


------

Fix entering date without time into Accessed

:commit:
    `e0e2222 <https://github.com/Juris-M/zotero/commit/e0e22225bcbce9c2ce2d929391461e7350ee5349>`_
:author:
    Dan Stillman
:date:
    2017-05-06 06:57 (JST)

https://forums.zotero.org/discussion/65560/5-0-beta-accessed-field-changes-dates


------

Potential bugfixery for #1218

:commit:
    `b679ada <https://github.com/Juris-M/zotero/commit/b679adad45f889cbcf561a0d1fa66470abffd0cc>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-05 20:51 (JST)


------

Update citeproc-js to 1.1.165

:commit:
    `7a51f5e <https://github.com/Juris-M/zotero/commit/7a51f5e3cc040d929de73cbec2f21c3a87b6f526>`_
:author:
    Dan Stillman
:date:
    2017-05-05 18:20 (JST)


------

Update locales from Transifex

:commit:
    `4ef3910 <https://github.com/Juris-M/zotero/commit/4ef39107f3119fce21ebc78f04560c8a0f38278d>`_
:author:
    Dan Stillman
:date:
    2017-05-05 18:14 (JST)


------

A couple more changes to document prefs dialog

:commit:
    `b80cdb2 <https://github.com/Juris-M/zotero/commit/b80cdb2915cad5312a8874a67fe0b8afb2ae6ac9>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-05 16:51 (JST)


------

Remove debugging

:commit:
    `43d12ee <https://github.com/Juris-M/zotero/commit/43d12ee3b7e56121f8f28624f44a5e8d87c2e2f5>`_
:author:
    Dan Stillman
:date:
    2017-05-05 16:27 (JST)


------

Still process downloads if uploads fail for a library

:commit:
    `40da5f6 <https://github.com/Juris-M/zotero/commit/40da5f61a0e4428ec9b54b22882f76355bcee359>`_
:author:
    Dan Stillman
:date:
    2017-05-05 16:26 (JST)


------

Better debug output for objects in sync queue skipped for uploading

:commit:
    `021cfa8 <https://github.com/Juris-M/zotero/commit/021cfa8b3b853ebfc4b9f850eccf8859d6db9b5c>`_
:author:
    Dan Stillman
:date:
    2017-05-05 14:38 (JST)


------

Clean up some comments and debug lines

:commit:
    `2f0391f <https://github.com/Juris-M/zotero/commit/2f0391fb9ca3eeda7563a890f479a249f736a4af>`_
:author:
    Dan Stillman
:date:
    2017-05-05 14:05 (JST)


------

Remove objects from sync queue if missing from response

:commit:
    `a1bd2ba <https://github.com/Juris-M/zotero/commit/a1bd2bace5913d05ac6b832da3cbd07b5dc642d4>`_
:author:
    Dan Stillman
:date:
    2017-05-05 14:02 (JST)

While objects in the sync queue that fail to save should remain in the
queue, objects that just don't exist remotely need to be removed, or
else they'll be retried forever.


------

Use coroutine() in Zotero.Sync.Data.Engine::_downloadObjects()

:commit:
    `ad9c2ed <https://github.com/Juris-M/zotero/commit/ad9c2ed36c24497c8e1f25e1bee8ec50e6cf243c>`_
:author:
    Dan Stillman
:date:
    2017-05-05 13:29 (JST)


------

Fix background/stopOnError options for sync engine tests

:commit:
    `7a839e1 <https://github.com/Juris-M/zotero/commit/7a839e19a67180abbd019f58b818720607ef9cba>`_
:author:
    Dan Stillman
:date:
    2017-05-05 13:26 (JST)


------

Add Zotero.Utilities.pluralize()

:commit:
    `b30e168 <https://github.com/Juris-M/zotero/commit/b30e168c2146ce4d5243b377303aa9ff26d469be>`_
:author:
    Dan Stillman
:date:
    2017-05-05 13:19 (JST)

This makes it a little easier to use the proper plural form of a word.
Currently this only supports English forms and is used only in debug
output. For proper plural form support, use PluralForm.jsm.


------

Use Set for arrayUnique

:commit:
    `397ea58 <https://github.com/Juris-M/zotero/commit/397ea5875abd44894ef33abc24b5320f83a98a58>`_
:author:
    Dan Stillman
:date:
    2017-05-05 13:18 (JST)


------

Prevent items in group libraries from being added to My Publications

:commit:
    `2eef170 <https://github.com/Juris-M/zotero/commit/2eef1702e0b0c959fb897ada874a300494ea214f>`_
:author:
    Dan Stillman
:date:
    2017-05-05 10:18 (JST)

And remove existing group items that have been added


------

Ignore drags to tag selector background

:commit:
    `3561864 <https://github.com/Juris-M/zotero/commit/35618645429b426adbb54262665bcf344bbaff2f>`_
:author:
    Dan Stillman
:date:
    2017-05-05 02:51 (JST)

This was causing tags to be created with the text of all tags.


------

Make file sync timestamp comparison a little more lenient

:commit:
    `697937a <https://github.com/Juris-M/zotero/commit/697937a72c08907224b187b0b00f8ef662295b48>`_
:author:
    Dan Stillman
:date:
    2017-05-04 15:04 (JST)

There was a report [1] of slow file syncing that showed all file
timestamps being reported as ending with 020 (e.g., 1436492361020). The
previous code assumed that systems without millisecond precision would
report as whole seconds, so the timestamp checks weren't matching and it
was moving on to hash-based checks (which seemed to be taking a very
long time, but that's another matter). This changes the comparison so
that, as long as both timestamps floor to the same whole second, they'll
be considered equal.

[1] https://forums.zotero.org/discussion/65515/5-0-beta-sync-problem


------

Fix bad grammar in file format notice

:commit:
    `c443559 <https://github.com/Juris-M/zotero/commit/c443559c9cc88475863c8f6c68cb397188311497>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-03 23:05 (JST)


------

Update citeproc instances in Integration on Styles.reinit

:commit:
    `8f19d1f <https://github.com/Juris-M/zotero/commit/8f19d1f82688d3194242dacb47bd3412ffc21b10>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-03 20:35 (JST)

Closes zotero/zotero-word-for-windows-integration#34


------

Write sessionID into the doc on new session creation

:commit:
    `37fa0c2 <https://github.com/Juris-M/zotero/commit/37fa0c203fb74a6245f6d98702a0350e340f02bc>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-03 20:34 (JST)


------

Remove obsolete styles related code

:commit:
    `6336a30 <https://github.com/Juris-M/zotero/commit/6336a30cb94f679e2d57efeb6ecf6782483b884e>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-03 20:00 (JST)


------

Merge pull request #1222 from adomasven/feature/document-preferences-cleanup

:commit:
    `7d79865 <https://github.com/Juris-M/zotero/commit/7d79865023828b87e744ef5cc59ed98e3ebfc224>`_
:author:
    Adomas Ven
:date:
    2017-05-03 19:09 (JST)

Document preferences cleanup

------

Reduce text in document preferences, increase style list height

:commit:
    `5a55a82 <https://github.com/Juris-M/zotero/commit/5a55a825942d4fb15548b0a9940eef174818a83e>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-02 23:23 (JST)

Closes zotero/zotero-word-for-windows-integration#30


------

Fix missing paren from 5b0b8744351

:commit:
    `b2d91af <https://github.com/Juris-M/zotero/commit/b2d91af90d06c281ff37a9e34fb648afe61fc614>`_
:author:
    Dan Stillman
:date:
    2017-05-03 17:47 (JST)


------

Simplify deleteCacheObjectVersions() query

:commit:
    `2588a0a <https://github.com/Juris-M/zotero/commit/2588a0a651fdf434fdccbcd87146184e59c9dea5>`_
:author:
    Dan Stillman
:date:
    2017-05-03 16:54 (JST)


------

Purge old objects in sync cache after upload

:commit:
    `5b0b874 <https://github.com/Juris-M/zotero/commit/5b0b874435146b7b0aae2ee1372a7823bfc0949e>`_
:author:
    Dan Stillman
:date:
    2017-05-03 16:43 (JST)


------

Fix syncing of related item removal

:commit:
    `aa1fc01 <https://github.com/Juris-M/zotero/commit/aa1fc01b310b2d4880e841f0eea45c23b42e1c7d>`_
:author:
    Dan Stillman
:date:
    2017-05-03 09:15 (JST)


------

Additional debugging for sync issue

:commit:
    `5f819b7 <https://github.com/Juris-M/zotero/commit/5f819b7baa2b29f026bc1e381072e920de9cc4a9>`_
:author:
    Dan Stillman
:date:
    2017-05-03 06:29 (JST)


------

Debugging for sync issue

:commit:
    `4502b5e <https://github.com/Juris-M/zotero/commit/4502b5e9902dd07f2e5c4acd965fb65b4a0d66ad>`_
:author:
    Dan Stillman
:date:
    2017-05-03 05:56 (JST)


------

Remove store references in document option. Closes #1216

:commit:
    `3c19bbf <https://github.com/Juris-M/zotero/commit/3c19bbffe477a8075874c6f1408f0f283b6db670>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-02 22:29 (JST)


------

Fix test breakage from a76493f60

:commit:
    `5e3c7bf <https://github.com/Juris-M/zotero/commit/5e3c7bf63d3b5c00fed03c1da97fe5bb338b7db3>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-02 21:09 (JST)


------

Fix noteType type issues when talking to js-ctypes libs

:commit:
    `a76493f <https://github.com/Juris-M/zotero/commit/a76493f60dd41dacf1adefb06c807c18d2c387ff>`_
:author:
    Adomas Venčkauskas
:date:
    2017-05-02 20:44 (JST)

Reported https://forums.zotero.org/discussion/65496/zotero-5-185-bug-cant-insert-field


------

integrationTests.js -> integrationTest.js

:commit:
    `32b1769 <https://github.com/Juris-M/zotero/commit/32b1769f2f5a21ffcfa24772455e3475ce4b19a8>`_
:author:
    Dan Stillman
:date:
    2017-04-28 17:12 (JST)


------

Fix error with citations not in library (since f3ceb7f66)

:commit:
    `9e1533c <https://github.com/Juris-M/zotero/commit/9e1533c32dedaca74c533811b24d232eb23cb0b2>`_
:author:
    Dan Stillman
:date:
    2017-04-28 17:07 (JST)


------

Recover from a remotely missing parent collection

:commit:
    `fe88530 <https://github.com/Juris-M/zotero/commit/fe88530120f6834ca7e8babe4e154d69cb1967ca>`_
:author:
    Dan Stillman
:date:
    2017-04-28 16:18 (JST)


------

Don't update various primary fields unnecessarily during save

:commit:
    `2db41b0 <https://github.com/Juris-M/zotero/commit/2db41b0adc136df9b026a0890dd31409ec91505d>`_
:author:
    Dan Stillman
:date:
    2017-04-28 11:25 (JST)


------

Schema update step to remove linked files from My Publications

:commit:
    `7bd8f47 <https://github.com/Juris-M/zotero/commit/7bd8f47dac5e2223b177bd4d69774b4180e7e13f>`_
:author:
    Dan Stillman
:date:
    2017-04-28 04:25 (JST)


------

Disallow inPublications for linked-file attachments

:commit:
    `9bd01af <https://github.com/Juris-M/zotero/commit/9bd01af2a5c72a2ac62002113d69b279a2e5f5c7>`_
:author:
    Dan Stillman
:date:
    2017-04-28 04:33 (JST)


------

Don't show Show/Hide button in My Publications for linked files

:commit:
    `d715197 <https://github.com/Juris-M/zotero/commit/d715197b2f8470dada38cdbb3ab7bf95824c5e21>`_
:author:
    Dan Stillman
:date:
    2017-04-27 16:57 (JST)


------

Revert accidental stopOnError change in 2bf53824

:commit:
    `8dacf44 <https://github.com/Juris-M/zotero/commit/8dacf4455d4c72d290ee146ddceecece956ce8f9>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-27 17:46 (JST)


------

Log errors from syncRunner concurrent caller

:commit:
    `2bf5382 <https://github.com/Juris-M/zotero/commit/2bf5382431699620f0a9ae51a725a031e4429e3f>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-27 17:40 (JST)


------

Fix "text is not defined" error during full-text content sync

:commit:
    `d527c34 <https://github.com/Juris-M/zotero/commit/d527c340c68ac79e6f3615eb5eaf2f24baed15b6>`_
:author:
    Dan Stillman
:date:
    2017-04-26 15:44 (JST)


------

Merge pull request #1218 from adomasven/feature/JSON-pref-docs

:commit:
    `696e828 <https://github.com/Juris-M/zotero/commit/696e828a02128b02eeff9899fd43e51962f12a6a>`_
:author:
    Dan Stillman
:date:
    2017-04-23 11:54 (JST)

Feature/json pref docs

------

Fix broken integration test in a8d0110e

:commit:
    `7661f71 <https://github.com/Juris-M/zotero/commit/7661f71d6c40705eef5a04dddf977f62a5399cc4>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-21 17:11 (JST)


------

Fix indexing of synced full-text content

:commit:
    `21a3bf8 <https://github.com/Juris-M/zotero/commit/21a3bf8aa5932fd6f80c1b2591903e0ae34d4860>`_
:author:
    Dan Stillman
:date:
    2017-04-21 15:59 (JST)


------

Restore Jurism-M code line to forestall extraneous showEditor()

:commit:
    `7f8d7ab <https://github.com/Juris-M/zotero/commit/7f8d7abfcd12c8748d913decf13eb2a9d6a4be9f>`_
:author:
    fbennett
:date:
    2017-04-21 07:38 (JST)


------

Merge pull request #1219 from adomasven:fix/htmlSpecialChars

:commit:
    `b077e1c <https://github.com/Juris-M/zotero/commit/b077e1cd8c19969bec8dbba889a27c0ae760d3e1>`_
:author:
    Dan Stillman
:date:
    2017-04-21 02:13 (JST)

Do not return empty string only for `0` arg to #htmlSpecialChars


------

Add a deprecation warning to non-string params for #htmlSpecialChars

:commit:
    `a8d0110 <https://github.com/Juris-M/zotero/commit/a8d0110e075464ceb2ff2fdc55822e2747ab4948>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-20 19:33 (JST)

Revert change from ff74e0ff


------

Prepare 5.0 to handle JSON doc prefs

:commit:
    `bbec11e <https://github.com/Juris-M/zotero/commit/bbec11e3eb9679f02b01496e410c25d081f17874>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-20 21:29 (JST)


------

Fix DocumentData serialization hairiness due to #htmlSpecialChars

:commit:
    `e272465 <https://github.com/Juris-M/zotero/commit/e272465f6c8e97f7b8637532922fc6b9a365f293>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-20 19:39 (JST)

Add tests


------

Collapse My Publications when first opened

:commit:
    `d472752 <https://github.com/Juris-M/zotero/commit/d4727521011d2299dc4bccbb669abf0961f1ae23>`_
:author:
    Dan Stillman
:date:
    2017-04-20 10:48 (JST)

Child items marked as visible are technically search matches, so we have
to take extra steps to keep the parents from being auto-expanded.


------

Fix width of note link toolbar

:commit:
    `850a9bb <https://github.com/Juris-M/zotero/commit/850a9bb309617969155fdc1fa3b829b3fb729d96>`_
:author:
    Dan Stillman
:date:
    2017-04-20 08:35 (JST)


------

Load object data when looking up integration items

:commit:
    `f3ceb7f <https://github.com/Juris-M/zotero/commit/f3ceb7f66e0caa2e46448e92323c2390b13e855c>`_
:author:
    Dan Stillman
:date:
    2017-04-19 17:24 (JST)

Item data may not have been loaded for a library when requesting an item
from a document (e.g., for Refresh), so we need to load all data for
requested items to avoid unloaded-data errors. (Data isn't loaded if
it's already been loaded, so hopefully this doesn't slow things down too
much.)


------

Clear inPublications in PATCH JSON with false, not empty string

:commit:
    `ab2bedc <https://github.com/Juris-M/zotero/commit/ab2bedc0dff63dfd721f2df03f7a48d22c16c4b1>`_
:author:
    Dan Stillman
:date:
    2017-04-19 16:18 (JST)


------

Add settings table flag to auto-repair database on startup

:commit:
    `c03a0df <https://github.com/Juris-M/zotero/commit/c03a0df226f0fcb9544d708d8cd38682806e717f>`_
:author:
    Dan Stillman
:date:
    2017-04-18 16:33 (JST)

This will allow the DB Repair Tool to only recreate the file and leave
schema knowledge to the client.

Addresses #895


------

Retry library sync on 409 error

:commit:
    `698eb33 <https://github.com/Juris-M/zotero/commit/698eb3358a2fb7ae6dc14db5290475cb66c43e3a>`_
:author:
    Dan Stillman
:date:
    2017-04-18 14:44 (JST)

Closes #928


------

Do not return empty string for falsy arguments in Utilities.htmlSpecialChars

:commit:
    `ff74e0f <https://github.com/Juris-M/zotero/commit/ff74e0ff00832f9f2c80b869525fcc12a2d3ccf9>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-18 22:21 (JST)


------

Merge branch 'jurism-5.0' of github.com:Juris-M/zotero into jurism-5.0

:commit:
    `2c6c4d2 <https://github.com/Juris-M/zotero/commit/2c6c4d2887b49a1b22bf80bcbbe7b63fea5d78b5>`_
:author:
    fbennett
:date:
    2017-04-18 17:39 (JST)


------

Fix JM-specific bugs in integration following Zotero merge

:commit:
    `1e905e2 <https://github.com/Juris-M/zotero/commit/1e905e207d08db47994fbec553a2c3228f8eb891>`_
:author:
    fbennett
:date:
    2017-04-18 17:38 (JST)


------

Update locales from upstream Zotero

:commit:
    `9845802 <https://github.com/Juris-M/zotero/commit/98458029a06d79f3d02da854bc40888b21a9cb86>`_
:author:
    fbennett
:date:
    2017-04-18 10:55 (JST)


------

Merge changes from upstream Zotero

:commit:
    `97b5132 <https://github.com/Juris-M/zotero/commit/97b51328b2bc9eb7eaa3c26122b3e70be32de8bb>`_
:author:
    fbennett
:date:
    2017-04-18 10:52 (JST)


------

Don't include items in My Publications in Unfiled Items

:commit:
    `de7b56b <https://github.com/Juris-M/zotero/commit/de7b56b8a1706e317dd9c644bbe09faaae3c99ef>`_
:author:
    Dan Stillman
:date:
    2017-04-18 10:34 (JST)


------

Remove stray console.log() calls in citeproc-js

:commit:
    `2160b1c <https://github.com/Juris-M/zotero/commit/2160b1cb8747b05b6b133019cd380031594e4af0>`_
:author:
    Dan Stillman
:date:
    2017-04-18 02:56 (JST)

This is breaking bibliography output for some citations.


------

Close #932, Disable file dragging into My Publications

:commit:
    `8a7d405 <https://github.com/Juris-M/zotero/commit/8a7d405e4d8c0b996a2583a53d6118fefffdad6d>`_
:author:
    Dan Stillman
:date:
    2017-04-16 16:35 (JST)

Already disabled for collections pane, now for items pane


------

Restore ability to paste images in notes, for now

:commit:
    `d0b1a45 <https://github.com/Juris-M/zotero/commit/d0b1a45c61761c7ab3dcad535b4e63d8c740079b>`_
:author:
    Dan Stillman
:date:
    2017-04-16 15:40 (JST)

Allow this to continue working until we have a better solution that
keeps data URIs out of note markup and is counted against file quota.
Syncing most notes with embedded images will still result in a
note-too-long error.

Closes #1209


------

Update tests after citeproc-js upgrade to match output

:commit:
    `b3277de <https://github.com/Juris-M/zotero/commit/b3277de5aef7b637eb189f43caab70542ef22be8>`_
:author:
    Dan Stillman
:date:
    2017-04-15 17:34 (JST)


------

Unescape HTML in API upload errors

:commit:
    `58f4dc3 <https://github.com/Juris-M/zotero/commit/58f4dc3bb5132c8472f8ac84c44b106e33f9733f>`_
:author:
    Dan Stillman
:date:
    2017-04-15 11:54 (JST)


------

Make 404 handling for uploaded objects permanent

:commit:
    `0920e25 <https://github.com/Juris-M/zotero/commit/0920e25393e90f07eaeffc3a5bf282803e0957ab>`_
:author:
    Dan Stillman
:date:
    2017-04-15 11:49 (JST)

Related to https://github.com/zotero/dataserver/commit/aafda6d835


------

Update locales from Transifex

:commit:
    `e4bc715 <https://github.com/Juris-M/zotero/commit/e4bc715dc1cb885f7cbcab1fc5f769876efeba0c>`_
:author:
    Dan Stillman
:date:
    2017-04-15 11:00 (JST)


------

Update submodules

:commit:
    `a2f11f5 <https://github.com/Juris-M/zotero/commit/a2f11f5338db770319d8e0116f2572b526147cf6>`_
:author:
    Dan Stillman
:date:
    2017-04-15 10:59 (JST)


------

Update citeproc-js to 1.1.160

:commit:
    `287a0b5 <https://github.com/Juris-M/zotero/commit/287a0b587bfcca5c1e02f1209987986620984b97>`_
:author:
    Dan Stillman
:date:
    2017-04-15 10:57 (JST)


------

Update whitespace chars in cleanISBN/cleanISSN tests for Firefox 52+

:commit:
    `e397d12 <https://github.com/Juris-M/zotero/commit/e397d12d42bb239974caf2fdb0b63f9d816f97dc>`_
:author:
    Dan Stillman
:date:
    2017-04-14 15:31 (JST)

Farewell, Mongolian Vowel Separator


------

Make sure styles are loaded before opening doc-prefs dialog

:commit:
    `de269b3 <https://github.com/Juris-M/zotero/commit/de269b30219a3405aeaccd09088945285bc5b3a9>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-14 20:30 (JST)


------

Remove dependency on zoteroIntegration.idl

:commit:
    `4900157 <https://github.com/Juris-M/zotero/commit/49001572fd5bae61aad01a518782f0ad4875a442>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-14 18:43 (JST)


------

Move document plugin interface description into integrationTests

:commit:
    `0de22b1 <https://github.com/Juris-M/zotero/commit/0de22b132efd92d4660e26f24f1772f2ec57106d>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-14 18:43 (JST)


------

Fix link opening in standalone note windows

:commit:
    `e1c183b <https://github.com/Juris-M/zotero/commit/e1c183b59719a35eb8554ed30da0108452698074>`_
:author:
    Dan Stillman
:date:
    2017-04-13 17:54 (JST)


------

Reduce indentation in waitForWindow() support function

:commit:
    `9c91018 <https://github.com/Juris-M/zotero/commit/9c91018964c141c1309b58855c4757505de59df8>`_
:author:
    Dan Stillman
:date:
    2017-04-13 17:28 (JST)


------

Update Zotero.Styles initialization to match translators

:commit:
    `18bb18b <https://github.com/Juris-M/zotero/commit/18bb18ba5161245ce37398a997b7633a69e45cce>`_
:author:
    Dan Stillman
:date:
    2017-04-13 14:35 (JST)


------

Fix bibliographyTest breakage after d5cf33a798

:commit:
    `9b53570 <https://github.com/Juris-M/zotero/commit/9b535709684c1945904feb49082569579b8d4cd0>`_
:author:
    Dan Stillman
:date:
    2017-04-13 17:19 (JST)

d5cf33a798 adds a `yield` to bibliography.js, which runs in modal
windows (e.g., Create Bib), but there's a weird interaction between
Bluebird and modal dialogs that can result in hangs -- presumably
something to do with things being queued on the event loop but the modal
dialog preventing other code from running? This was breaking
bibliographyTest, but it seemed to work fine for me in normal usage,
waiting properly for a running styles initialization to finish. It's
possible this problem is limited to tests, but in the past, at least, I
apparently decided that this was a general problem with `yield` in modal
dialogs [1]. (See also: [2].) In any case, calling `yield
Zotero.Styles.init()` from the Create Bib window was hanging the test,
so for now do a synchronous check for style initialization to avoid it,
and we should make sure that `yield` actually works in other contexts.

[1] https://github.com/zotero/zotero/commit/99dd1c069776
[2] https://github.com/zotero/zotero/commit/c2dd531cec4


------

NodeList doesn't have forEach in Firefox 45

:commit:
    `ed3b18b <https://github.com/Juris-M/zotero/commit/ed3b18ba8c62ef22e71c5c724e1d7287a812b933>`_
:author:
    Dan Stillman
:date:
    2017-04-13 14:21 (JST)


------

Don't break Zotero

:commit:
    `b7aab8b <https://github.com/Juris-M/zotero/commit/b7aab8b8d24a331f56588936db75de2f7bbcd85d>`_
:author:
    Dan Stillman
:date:
    2017-04-13 13:21 (JST)


------

Fix test breakage after 5ff2a59f87

:commit:
    `6d18b46 <https://github.com/Juris-M/zotero/commit/6d18b461654adfb55b4568a222ac422c4bcda121>`_
:author:
    Dan Stillman
:date:
    2017-04-13 13:13 (JST)

And remove all instances of `publicationsLibraryID`


------

Move My Publications into My Library

:commit:
    `5ff2a59 <https://github.com/Juris-M/zotero/commit/5ff2a59f87aad99671b4a4508a2daf93903b816d>`_
:author:
    Dan Stillman
:date:
    2017-04-12 13:56 (JST)

Instead of My Publications being a separate library, have it be a
special collection inside My Library. Top-level items can be dragged
into it as before, and child items can be toggled off and on with a
button in the item pane. Newly added child items won't be shown by
default.

For upgraders, items in the My Publications library will be moved into
My Library, which might result in their being duplicated if the items
weren't removed from My Library. The client will then upload those new
items into My Library.

The API endpoint will continue to show items in the separate My
Publications library until My Publications items are added to My
Library, so the profile page will continue to show them.


------

Remove obsolete quicksearch refresh in ItemTreeView::notify()

:commit:
    `e311279 <https://github.com/Juris-M/zotero/commit/e311279947df220e40d9974885ff44606226385b>`_
:author:
    Dan Stillman
:date:
    2017-04-12 18:44 (JST)


------

Better debug output when setting .synced on an item

:commit:
    `3c3ff32 <https://github.com/Juris-M/zotero/commit/3c3ff3285405e28809b75fb4cb293b68e577204c>`_
:author:
    Dan Stillman
:date:
    2017-04-12 18:41 (JST)


------

Remove unused laststoragesync response from test

:commit:
    `4da0c4c <https://github.com/Juris-M/zotero/commit/4da0c4c1fc3583bdd73e5d75ae76522f31d09610>`_
:author:
    Dan Stillman
:date:
    2017-04-12 13:16 (JST)


------

Add .regularOnly and .expandAll flags to ItemTreeView

:commit:
    `b014068 <https://github.com/Juris-M/zotero/commit/b0140686f337907f3b971b37afb595701cf215f8>`_
:author:
    Dan Stillman
:date:
    2017-03-31 13:21 (JST)


------

Don't wait for transaction when selecting item

:commit:
    `6c1ba0a <https://github.com/Juris-M/zotero/commit/6c1ba0aeeee79df0b3d55a9aee68407989857a25>`_
:author:
    Dan Stillman
:date:
    2017-03-31 12:08 (JST)


------

Add Document.addEditBibliography to integration.js

:commit:
    `7657c90 <https://github.com/Juris-M/zotero/commit/7657c9044d9db6aa1b5bd66263eb9de0a7bce7ab>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-11 22:16 (JST)

See zotero/zotero-word-for-windows-integration#28 for background


------

Merge pull request #1202 from adomasven/fix/doc-pref-window-unloaded-styles

:commit:
    `2a5dbaa <https://github.com/Juris-M/zotero/commit/2a5dbaa20404e485b5b60f2ac313fa16452c31b2>`_
:author:
    Adomas Ven
:date:
    2017-04-12 17:52 (JST)

Fix document preferences dialog failing when styles unloaded.

------

Add tests for style from untrusted source prompt

:commit:
    `ea535bc <https://github.com/Juris-M/zotero/commit/ea535bceb0aabc7276a6cef91a8debf3bcc08dc5>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-12 17:40 (JST)


------

Prompt if style in document is not from official source

:commit:
    `3e69da7 <https://github.com/Juris-M/zotero/commit/3e69da7e4c12f7a0e2b5f35ac5bfdf6b7eed4e9c>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-12 17:47 (JST)


------

Add integrationTests.js

:commit:
    `02c43c3 <https://github.com/Juris-M/zotero/commit/02c43c3643c5059d2a42de8543bd3e488d2a1ba6>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-06 20:19 (JST)

Contains a dummy doc plugin, which is useful for:
- Testing integration.js functionality
- Serving as succint documentation for development of new integration
  plugins


------

Don't show response text on HTTP error if empty

:commit:
    `747290b <https://github.com/Juris-M/zotero/commit/747290be38c835d9ee37bc6ed4cbc338c011835d>`_
:author:
    Dan Stillman
:date:
    2017-04-11 17:18 (JST)


------

429 and Retry-After support for API requests

:commit:
    `5d6478e <https://github.com/Juris-M/zotero/commit/5d6478e5075d8f7fb681d9a8b11ba3716c2aeb42>`_
:author:
    Dan Stillman
:date:
    2017-04-11 17:17 (JST)


------

Fetch a style if it is not installed on document preferences load

:commit:
    `269a250 <https://github.com/Juris-M/zotero/commit/269a250b4f950bf917c3a680f1d2c5aad2c75cd5>`_
:author:
    Adomas Venčkauskas
:date:
    2017-03-31 20:27 (JST)


------

Fix document preferences dialog failing when styles unloaded.

:commit:
    `d5cf33a <https://github.com/Juris-M/zotero/commit/d5cf33a798a08ea5ad56ac777fc199d0f9c1daf0>`_
:author:
    Adomas Venčkauskas
:date:
    2017-03-21 19:47 (JST)

Closes #1084


------

Add jm-sh builder

:commit:
    `70df696 <https://github.com/Juris-M/zotero/commit/70df6968280f5bca7bfa339ac45603b5fbd80e04>`_
:author:
    Frank Bennett
:date:
    2017-04-08 15:40 (JST)


------

Fixes for modules

:commit:
    `3f1f2af <https://github.com/Juris-M/zotero/commit/3f1f2af6e124d042976389aed92345199a78c443>`_
:author:
    Frank Bennett
:date:
    2017-04-08 15:40 (JST)


------

Show UnexpectedStatusException response without prefix during sync

:commit:
    `64414e4 <https://github.com/Juris-M/zotero/commit/64414e49be29b5ecba22b53def158d2508b21de6>`_
:author:
    Dan Stillman
:date:
    2017-04-08 11:45 (JST)


------

Always include server response in Zotero.HTTP.request() errors

:commit:
    `a64c680 <https://github.com/Juris-M/zotero/commit/a64c6808e5208865a3d7f53c2f3b5ba4d914c027>`_
:author:
    Dan Stillman
:date:
    2017-04-08 11:34 (JST)


------

Fix duplicated error message when logging UnexpectedStatusException

:commit:
    `3df66cc <https://github.com/Juris-M/zotero/commit/3df66ccbe47692c3250401af2ed2794d40e726c6>`_
:author:
    Dan Stillman
:date:
    2017-04-08 11:32 (JST)

Not sure what's causing this. (Bluebird?)

Also add stack to custom HTTP exceptions.


------

Promise cleanup in Zotero.Attachment.importFromURL()

:commit:
    `c0a2ec8 <https://github.com/Juris-M/zotero/commit/c0a2ec8a47abbb745b289f52a4ee58570106be99>`_
:author:
    Dan Stillman
:date:
    2017-04-08 12:33 (JST)

Use `new Zotero.Promise` instead of `defer()` and `coroutine()` instead
of chained promises


------

Fix breakage from 406f50a3

:commit:
    `4540edb <https://github.com/Juris-M/zotero/commit/4540edb622257c6f177d9aebb08216ee85792827>`_
:author:
    Dan Stillman
:date:
    2017-04-08 12:11 (JST)


------

Address file import bugs

:commit:
    `5818935 <https://github.com/Juris-M/zotero/commit/5818935a321c7fcf152848a6e8617dbc31ed6dbd>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-07 20:35 (JST)

I don't know why why, but wbp.saveDocument() destroys the
document object which is passed into it. This means that further access
of the document is impossible and raises errors, which we were not
handling properly and not returning on attachment saving.

I've added error handling and changed removed code which tries to access
the document after the Zotero.Utilities.Internal.saveDocument() call.

Addresses https://forums.zotero.org/discussion/64745/5-0-beta-apparently-stuck-at-saving-to


------

Restore progress for attachments indication in connectors

:commit:
    `406f50a <https://github.com/Juris-M/zotero/commit/406f50a3fdc305fc759b96c68f8d6a7de46e3fa3>`_
:author:
    Adomas Venčkauskas
:date:
    2017-04-07 19:25 (JST)

78b1d2e regression


------

Mark local collection as unsynced if missing remotely in item request

:commit:
    `d8fed09 <https://github.com/Juris-M/zotero/commit/d8fed095789226a69ca177963e9568b996ffdb81>`_
:author:
    Dan Stillman
:date:
    2017-04-07 13:57 (JST)

We should figure out when this happens, but in the meantime, recover
from it if it does.


------

Update csl locales

:commit:
    `dffd293 <https://github.com/Juris-M/zotero/commit/dffd293398fe88b4157a44fb3dce5f3a0d83826d>`_
:author:
    Frank Bennett
:date:
    2017-04-06 21:52 (JST)


------

Fix .gitmodules entry for csl locales

:commit:
    `4fc919c <https://github.com/Juris-M/zotero/commit/4fc919cd10ed3a7f651b675f3e7aa35c88442760>`_
:author:
    Frank Bennett
:date:
    2017-04-06 21:52 (JST)


------

Fix dragging in links on Linux

:commit:
    `172f36d <https://github.com/Juris-M/zotero/commit/172f36d05098aba54684a3401add07a7164d9371>`_
:author:
    Dan Stillman
:date:
    2017-04-06 03:24 (JST)


------

Set fieldMode on multi creators in modifyCreator()

:commit:
    `59eff24 <https://github.com/Juris-M/zotero/commit/59eff24dd80a291a778ca069db301998c8d61021>`_
:author:
    fbennett
:date:
    2017-04-03 14:58 (JST)


------

Locale updates from upstream Zotero

:commit:
    `9b11b25 <https://github.com/Juris-M/zotero/commit/9b11b25728fa8000e69939fcf91370b96c7aeb71>`_
:author:
    fbennett
:date:
    2017-04-03 14:04 (JST)


------

Merge changes from upstream Zotero

:commit:
    `2ba81ff <https://github.com/Juris-M/zotero/commit/2ba81ff765d8fa6e21068524a5ae0d48bd5cd789>`_
:author:
    fbennett
:date:
    2017-04-03 14:01 (JST)


------

Maybe fix noteeditor test failures for real

:commit:
    `c43823a <https://github.com/Juris-M/zotero/commit/c43823ad6077b4885470ccab06d10eb220bec404>`_
:author:
    Dan Stillman
:date:
    2017-04-02 03:29 (JST)


------

Allow setting note text with createDataObject('item') test function

:commit:
    `7609ef3 <https://github.com/Juris-M/zotero/commit/7609ef35bc586c645ca6d4efbe753c7d5541ad24>`_
:author:
    Dan Stillman
:date:
    2017-04-02 03:28 (JST)


------

Fix onInit() in styled textbox if already initialized

:commit:
    `4867fc7 <https://github.com/Juris-M/zotero/commit/4867fc7e0361fc15c3668e1c2de6500f038bda21>`_
:author:
    Dan Stillman
:date:
    2017-04-02 03:27 (JST)


------

Don't show context menu on right-click on tag selector background

:commit:
    `4edcf58 <https://github.com/Juris-M/zotero/commit/4edcf5839b21d022a379d773c517ab114636b80b>`_
:author:
    Dan Stillman
:date:
    2017-04-02 00:24 (JST)


------

Reload primary data after tag rename instead of updating .synced

:commit:
    `6174641 <https://github.com/Juris-M/zotero/commit/6174641cfa1b36d0952d5a95b2e43ad5300b5ddf>`_
:author:
    Dan Stillman
:date:
    2017-04-01 16:13 (JST)

Follow-up to bb489a45c3 to mirror what Tags.removeFromLibrary() does


------

Upload modified items after tag rename

:commit:
    `bb489a4 <https://github.com/Juris-M/zotero/commit/bb489a45c36148b551763d3b1630ae7e288597f4>`_
:author:
    Dan Stillman
:date:
    2017-04-01 15:54 (JST)

The web library will probably still display the old tag in addition to
the new one, at least until browser restart. We'll have to deal with
that separately.

Closes #1205


------

Update locales from Transifex

:commit:
    `9637770 <https://github.com/Juris-M/zotero/commit/9637770c1626cf054764f6aab4dda4cc17f89d1a>`_
:author:
    Dan Stillman
:date:
    2017-03-28 15:28 (JST)


------

Update submodules

:commit:
    `9bdb907 <https://github.com/Juris-M/zotero/commit/9bdb9077518e095c64e34d7eb10c5b2017154848>`_
:author:
    Dan Stillman
:date:
    2017-03-28 15:28 (JST)


------

Avoid XML Parsing Error in Firefox console for ping requests

:commit:
    `cac0110 <https://github.com/Juris-M/zotero/commit/cac01100a6f9dbb4a6b9612cd415ad0ffca1da0b>`_
:author:
    Dan Stillman
:date:
    2017-03-28 15:17 (JST)


------

Increase timeout to hopefully prevent noteeditor tag test from failing

:commit:
    `09d4960 <https://github.com/Juris-M/zotero/commit/09d4960e1f2faa18128fa4313acefdc8fecc088b>`_
:author:
    Dan Stillman
:date:
    2017-03-28 09:44 (JST)


------

Remove instance of legacy shorthand function syntax

:commit:
    `7b7b268 <https://github.com/Juris-M/zotero/commit/7b7b26872715a8277458877fb74a9f89273891e4>`_
:author:
    Dan Stillman
:date:
    2017-03-28 09:43 (JST)


------

Fix renaming and clearing of colored tags

:commit:
    `3a8357c <https://github.com/Juris-M/zotero/commit/3a8357cb95c42e342a08d8761def2f8e50b428e7>`_
:author:
    Dan Stillman
:date:
    2017-03-28 09:42 (JST)


------

Drastically speed up tag selector refresh with many tags

:commit:
    `fe18633 <https://github.com/Juris-M/zotero/commit/fe186333be019af1eb3f7b406f25d2b3002b3217>`_
:author:
    Dan Stillman
:date:
    2017-03-28 09:33 (JST)

When refreshing, if fewer than 100 tags to show, just create them from
scratch instead of updating the full set. Otherwise, remove the full set
from DOM and add it back in after updates to avoid reflows (from #1204).

There are various things that could be done to optimize this further
(avoiding unnecessary sorting during full refreshes, calculating a hash
of the full set and not updating it every time), but we should probably
just replace it with @tnajdek's React version first.

Closes #1204


------

Fix classic Add Citation dialog after 820755e15

:commit:
    `8edd4b0 <https://github.com/Juris-M/zotero/commit/8edd4b052366f1ccc368fe274cba754cae341dd4>`_
:author:
    Dan Stillman
:date:
    2017-03-27 17:38 (JST)


------

Missing line from 499d4e3065

:commit:
    `bd28701 <https://github.com/Juris-M/zotero/commit/bd287013fe142fc7deed123721afe173d275c1a7>`_
:author:
    Dan Stillman
:date:
    2017-03-27 15:12 (JST)


------

Handle missing deleted.txt in unpacked source directory

:commit:
    `499d4e3 <https://github.com/Juris-M/zotero/commit/499d4e30652a60d998b24eaad28994daaa6914fb>`_
:author:
    Dan Stillman
:date:
    2017-03-27 15:02 (JST)

Unpacked directories aren't actually supported anymore, but fix obvious
breakage if they were.


------

Remove fallback code for symlinked Standalone dev build

:commit:
    `4477e42 <https://github.com/Juris-M/zotero/commit/4477e42cf953583a748a099719a5a426c8986779>`_
:author:
    Dan Stillman
:date:
    2017-03-27 15:07 (JST)

No longer possible


------

Ignore clicks in tag selector not on tags

:commit:
    `3a48439 <https://github.com/Juris-M/zotero/commit/3a48439c1d3b76622a469698975dd2fb401e7f4f>`_
:author:
    Dan Stillman
:date:
    2017-03-27 07:11 (JST)


------

Always invalidate items tree after sort

:commit:
    `d357382 <https://github.com/Juris-M/zotero/commit/d357382dd1d6343b417133fd01b256be3e073533>`_
:author:
    Dan Stillman
:date:
    2017-03-26 18:20 (JST)


------

Merge branch 'master' of https://github.com/zotero/zotero into jurism-5.0-dev

:commit:
    `0cd6442 <https://github.com/Juris-M/zotero/commit/0cd6442c7b35b6ec780120dc8ceb420fc79c9ba1>`_
:author:
    fbennett
:date:
    2017-03-25 21:57 (JST)


------

Fixes report printing. Closes #1179.

:commit:
    `bc4afb6 <https://github.com/Juris-M/zotero/commit/bc4afb6d8549e4a7953de972217711cbbe4d3b2a>`_
:author:
    Adomas Venčkauskas
:date:
    2017-03-25 00:51 (JST)

Page Setup seems to have moved into the print dialog in Firefox a while
ago


------

Fix updating of tag selector after filtering the middle pane

:commit:
    `edb53c3 <https://github.com/Juris-M/zotero/commit/edb53c31df34307cf58849ed6224a0296e27a27c>`_
:author:
    Dan Stillman
:date:
    2017-03-24 18:20 (JST)

Adds a 'refresh' event to libraryTreeView


------

Rework libraryTreeView event handling

:commit:
    `820755e <https://github.com/Juris-M/zotero/commit/820755e152117cffb9b7202ecbb7f3bb9780f5b9>`_
:author:
    Dan Stillman
:date:
    2017-03-24 18:18 (JST)

Changes `libraryTreeView::addEventListener('load')` and similar to
`libraryTreeView::onLoad.addListener(listener, once)`, etc. `once` is an
optional boolean that, when true, causes the listener to fire once and
then be removed. This is implicit for 'load'.

'load' maintains its special behavior of running immediately if the
treeview has already been loaded.

Also adds `waitForLoad()` and `waitForSelect()` functions that return
promises on event completion, since most uses of those events were just
resolving deferreds.


------

Move waitForTagSelector() into support.js

:commit:
    `1a4b712 <https://github.com/Juris-M/zotero/commit/1a4b7121d3b4cc1020a376c37751fa97ea9cf563>`_
:author:
    Dan Stillman
:date:
    2017-03-24 13:51 (JST)


------

Pass chunk size to data generator

:commit:
    `f4eb8ed <https://github.com/Juris-M/zotero/commit/f4eb8ed3bbae33c79c2b1c446403f061c419dd09>`_
:author:
    Dan Stillman
:date:
    2017-03-21 18:05 (JST)

TODO: Add text fields for controlling number of items and chunk size

(Chunk size should be small for testing UI interactions and performance
but large for generating lots of data.)


------

Fix error from empty strings in data generator

:commit:
    `d9b5fd7 <https://github.com/Juris-M/zotero/commit/d9b5fd78c90e334be86799be818a6256469e96d2>`_
:author:
    Dan Stillman
:date:
    2017-03-21 17:58 (JST)


------

Update word plugin status after installation. Closes #1200

:commit:
    `8bc5d37 <https://github.com/Juris-M/zotero/commit/8bc5d37dd1ee4d8293e2b13d2f2a759831a2fcf8>`_
:author:
    Adomas Venčkauskas
:date:
    2017-03-21 02:22 (JST)


------

Replace old-style object properties in word-processor-plugin-installer

:commit:
    `2d93b07 <https://github.com/Juris-M/zotero/commit/2d93b072204bafa7ccc8bfe4f06e18131b8ae00c>`_
:author:
    Adomas Venčkauskas
:date:
    2017-03-17 21:27 (JST)


------

Adds a -debugger command-line flag to start the devtools server

:commit:
    `eaf8d36 <https://github.com/Juris-M/zotero/commit/eaf8d3696359dcea0edaa2fd9bc1e4cf5d985014>`_
:author:
    Dan Stillman
:date:
    2017-03-18 06:08 (JST)

Follow-up to https://github.com/zotero/zotero-standalone-build/commit/22cfe2404

The devtools must be included in the build by passing the -t flag to
build.sh in zotero-standalone-build.

After starting Zotero with the flag, connect from a Firefox instance
with remote debugging enabled by choosing "Connect…" from the Web
Developer menu and connecting to port 6100.


------

Use data.detailedCookies in /connector/saveSnapshot

:commit:
    `dd921f3 <https://github.com/Juris-M/zotero/commit/dd921f340c9c02fc8428da3660d9ea635d1fd0b1>`_
:author:
    Adomas Venčkauskas
:date:
    2017-03-17 00:06 (JST)


------

Fix error showing some WebDAV verification errors

:commit:
    `a347389 <https://github.com/Juris-M/zotero/commit/a3473896a5aba4067b7808c984a2f2c6354d34b3>`_
:author:
    Dan Stillman
:date:
    2017-03-14 08:02 (JST)


------

Add loadPrefPane(paneName) support function

:commit:
    `640aaa1 <https://github.com/Juris-M/zotero/commit/640aaa15576e23bc85aefe8872c11896c5e7de75>`_
:author:
    Dan Stillman
:date:
    2017-03-14 07:59 (JST)

E.g., loadPrefPane('sync') to open the prefs and select the
'zotero-pane-sync' pane


------

Merge branch 'master' of https://github.com/zotero/zotero into jurism-5.0-dev

:commit:
    `f86debb <https://github.com/Juris-M/zotero/commit/f86debbd1cff85790b407b563d2cba8db7edf31d>`_
:author:
    fbennett
:date:
    2017-03-12 10:41 (JST)


------

Bump source version 5.0

:commit:
    `1fb3257 <https://github.com/Juris-M/zotero/commit/1fb32579cc50de8ad98e27212ccde513ff200167>`_
:author:
    fbennett
:date:
    2017-03-11 08:08 (JST)


------

Repairs for document cite extraction

:commit:
    `d337459 <https://github.com/Juris-M/zotero/commit/d3374595ea397cb26c85f70bf42e21d3bd3a0222>`_
:author:
    fbennett
:date:
    2017-03-11 08:07 (JST)


------

Script to generate random item data

:commit:
    `b732a82 <https://github.com/Juris-M/zotero/commit/b732a82d556501e772c6ff3a19d21491732c7bca>`_
:author:
    Dan Stillman
:date:
    2017-03-09 17:45 (JST)

For building up a big library and testing UI interaction during writes

To use, load chrome://zotero/content/tools/data_generator.html in
Firefox (for now).

Could be improved a bit to add other kinds of data (collections,
child items, relations)


------

Clean up a few data layer lines

:commit:
    `f9ea0af <https://github.com/Juris-M/zotero/commit/f9ea0af4cf74f44127092546abbebd042b10cf7e>`_
:author:
    Dan Stillman
:date:
    2017-03-09 17:12 (JST)


------

Fix (some) crashes switching collections while items are being added

:commit:
    `b1fc6ac <https://github.com/Juris-M/zotero/commit/b1fc6ac67cbb284f619a71cccb2e66c943147651>`_
:author:
    Dan Stillman
:date:
    2017-03-09 17:04 (JST)

The items list is generated from the database (via search), but new
items may have been added to the database but not yet been registered,
causing unloaded-data errors during sorting. Avoid that by not showing
unregistered items when generating the items list.

Additional protections are necessary -- it's still possible to get
errors, and maybe a crash, if an item has been registered but not yet
fully loaded -- but this addresses the most common one.


------

Create temporary table for search without transaction

:commit:
    `1711ba4 <https://github.com/Juris-M/zotero/commit/1711ba4dd4ec0387f94ea74f4ac4ee8326ea2caf>`_
:author:
    Dan Stillman
:date:
    2017-03-09 15:01 (JST)


------

Remove Promise.prototype.finally calls from translate.js not in ES6

:commit:
    `580cc32 <https://github.com/Juris-M/zotero/commit/580cc32f6fd4d5d54e16de534fff4f1392ff7c7f>`_
:author:
    Adomas Venčkauskas
:date:
    2017-03-07 19:34 (JST)

We could monkey-patch a finally function in connectors as described in
this gist https://gist.github.com/jish/e9bcd75e391a2b21206b , but it
appears to silence propogation of unhandled rejections
and it could later come back to bite us in the butt.
Native and proper support for finally is, however, planned in ES7.


------

Update Collection::getChildItems() when erasing item

:commit:
    `e9fd7f2 <https://github.com/Juris-M/zotero/commit/e9fd7f2dd159409f39cc8fb6765c83f9dfb3cb5e>`_
:author:
    Dan Stillman
:date:
    2017-03-07 15:54 (JST)

Fixes #1188


------

Fix Quick Copy drag with export format

:commit:
    `dd5ae0f <https://github.com/Juris-M/zotero/commit/dd5ae0f49c3760db88061844c8a5bdea509c50f1>`_
:author:
    Dan Stillman
:date:
    2017-03-07 13:52 (JST)


------

Fix file sync error on Windows for old filenames containing colons

:commit:
    `9e59500 <https://github.com/Juris-M/zotero/commit/9e5950061962c0675e3820630c9320e7459e7191>`_
:author:
    Dan Stillman
:date:
    2017-03-07 12:04 (JST)

OS.Path.basename() stops at colons on Windows, so calling it on the full
path produces unexpected results.


------

Add Juris-M logo source to repo

:commit:
    `18419a6 <https://github.com/Juris-M/zotero/commit/18419a63f3b04843975df9b62fc347b0c6e35506>`_
:author:
    fbennett
:date:
    2017-03-06 08:43 (JST)


------

Merge changes from upstream Zotero master

:commit:
    `6c3b56d <https://github.com/Juris-M/zotero/commit/6c3b56d0a23ec24f4e8729363cc0475bc6b5ee2e>`_
:author:
    fbennett
:date:
    2017-03-05 22:46 (JST)


------

Fix cross-library collection drag on Linux, probably

:commit:
    `59fb9d0 <https://github.com/Juris-M/zotero/commit/59fb9d022607e767b167c4ebfbd2403b5fd363a1>`_
:author:
    Dan Stillman
:date:
    2017-03-05 06:38 (JST)


------

Check linked collections in both directions

:commit:
    `c180bce <https://github.com/Juris-M/zotero/commit/c180bce0f0753f0080ab9e6cfe2ce4100b570998>`_
:author:
    Dan Stillman
:date:
    2017-03-05 06:05 (JST)


------

Set 'copy' cursor feedback on cross-library collection drag

:commit:
    `d0d7aec <https://github.com/Juris-M/zotero/commit/d0d7aec4b0306cf846e5fcf59ed9373a1864a2e3>`_
:author:
    Dan Stillman
:date:
    2017-03-04 18:17 (JST)


------

Fix dragging collections between libraries

:commit:
    `704e8ff <https://github.com/Juris-M/zotero/commit/704e8ffeea7555499fe7a09d4edd84bf86e54fd9>`_
:author:
    Dan Stillman
:date:
    2017-03-04 18:17 (JST)


------

Remove errant HTML tag

:commit:
    `1b81004 <https://github.com/Juris-M/zotero/commit/1b81004a935937ec6c6448e2489ce5ff1876c81a>`_
:author:
    Dan Stillman
:date:
    2017-03-04 06:39 (JST)


------

Fix potential error dragging attachment with missing file

:commit:
    `9ea82bb <https://github.com/Juris-M/zotero/commit/9ea82bb6cd4c15082614e84a1090556da43b4b3b>`_
:author:
    Dan Stillman
:date:
    2017-03-04 06:39 (JST)


------

Asyncify various functions to fix cross-library drag-and-drop error

:commit:
    `fe9fc8b <https://github.com/Juris-M/zotero/commit/fe9fc8bc5a4a34eb45855ff62451422f51022629>`_
:author:
    Dan Stillman
:date:
    2017-03-04 06:33 (JST)

When dragging an item to another library, we have to check if there's a
linked item in the target library, but items might not yet be laoded in
the other library, so item.getLinkedItem() can fail with "Item [n] not
yet loaded].

Fixing required asyncifying the follow functions:

- Zotero.Item::getLinkedItem()
- Zotero.Collection::getLinkedCollection()
- Zotero.URI.getURIItem()
- Zotero.URI.getURICollection()
- Various integration functions


------

Bind function to context to preserve assignments inside event

:commit:
    `28033c7 <https://github.com/Juris-M/zotero/commit/28033c720c2dac3fe61500261a4d7ac69974d776>`_
:author:
    fbennett
:date:
    2017-03-03 23:27 (JST)


------

Remove stray diff comment line

:commit:
    `9008377 <https://github.com/Juris-M/zotero/commit/90083773edba13032b33bbeb5642bf62eb5f459d>`_
:author:
    fbennett
:date:
    2017-03-03 23:25 (JST)


------

Fix (still) broken debug reporting for connectors (regression ef0d9afe8)

:commit:
    `182b9a9 <https://github.com/Juris-M/zotero/commit/182b9a937bb180151d92d74b09f85798c60fa83d>`_
:author:
    Adomas Venčkauskas
:date:
    2017-03-03 22:02 (JST)


------

Fix various error propagation issues during translation

:commit:
    `7c25093 <https://github.com/Juris-M/zotero/commit/7c25093ca2286b39afe38d4a0a937ded444adc5e>`_
:author:
    Dan Stillman
:date:
    2017-03-03 18:09 (JST)

As noted in 27cb099c82, import translators should be rewritten to return
a promise from doImport() and wait for promises from successive
item.complete() calls. They should then be marked as minVersion: "5.0"
to be handled properly by this new code.

(But this tries to account, albeit with somewhat worse behavior, for
translators that haven't been rewritten and sandboxes without Promise
(which is currently the case with child sandboxes in the client).)

(Oh, and I haven't tested this at all in the connectors.)


------

Update locales from upstream

:commit:
    `a96afad <https://github.com/Juris-M/zotero/commit/a96afadf4de52a2dcf87e5428aa811554fdf95c2>`_
:author:
    fbennett
:date:
    2017-03-03 13:03 (JST)


------

Merge changes from upstream Zotero

:commit:
    `dffcbd7 <https://github.com/Juris-M/zotero/commit/dffcbd76694c7d98b80e732e874dd86921f957cd>`_
:author:
    fbennett
:date:
    2017-03-03 12:59 (JST)


------

Fix sequencing of citation updates

:commit:
    `faec11c <https://github.com/Juris-M/zotero/commit/faec11c59742513e6e9e145d343a8d58314ba656>`_
:author:
    fbennett
:date:
    2017-03-03 08:29 (JST)


------

Update citeproc-js to 1.1.157

:commit:
    `50c22b1 <https://github.com/Juris-M/zotero/commit/50c22b13f0b5a8e0df2279d5d67e98aca2e7c03e>`_
:author:
    fbennett
:date:
    2017-03-03 08:18 (JST)


------

Protect against crash when collection is removed during empty-trash

:commit:
    `48aeb99 <https://github.com/Juris-M/zotero/commit/48aeb99d45c3676e3cfa00bf8b3f8b0d34f3a27d>`_
:author:
    fbennett
:date:
    2017-03-03 07:38 (JST)


------

Firefox 52 compatibility

:commit:
    `7ccf781 <https://github.com/Juris-M/zotero/commit/7ccf781add1eedcb57c3b4073672e6d9cb8d1224>`_
:author:
    Dan Stillman
:date:
    2017-03-03 05:30 (JST)


------

Add debugging for display error reported in forums

:commit:
    `8812fd4 <https://github.com/Juris-M/zotero/commit/8812fd4401d77b138b2544420cde603f28bcda88>`_
:author:
    Dan Stillman
:date:
    2017-03-03 05:29 (JST)

https://forums.zotero.org/discussion/64662/5-0-beta-no-items-displayed-in-center-pane


------

Don't allow setting 0 for feed item TTL

:commit:
    `6539fc4 <https://github.com/Juris-M/zotero/commit/6539fc44e3cecb7484c3a0567ddbcb6f0b46bcc6>`_
:author:
    Adomas Venčkauskas
:date:
    2017-03-03 00:53 (JST)


------

Update locales from Transifex

:commit:
    `3d0c7d3 <https://github.com/Juris-M/zotero/commit/3d0c7d3c43ae9441179204941467e68a7e6e1a2f>`_
:author:
    Dan Stillman
:date:
    2017-03-02 17:49 (JST)


------

Don't restart until after clearing storage settings when changing user

:commit:
    `945dc28 <https://github.com/Juris-M/zotero/commit/945dc2825bc8369a59ec191261129d3ad48ff2f5>`_
:author:
    Dan Stillman
:date:
    2017-03-02 13:36 (JST)

Possible that this was working previously, but no particular reason to
think that quitZotero() shouldn't be synchronous.


------

If userID is set, migrate any item relations with local user key

:commit:
    `3a5490a <https://github.com/Juris-M/zotero/commit/3a5490a1ef7cff1d9a82405224a22bee6c73b55b>`_
:author:
    Dan Stillman
:date:
    2017-03-02 15:31 (JST)

DB update to go along with 0d8643087a


------

Update relations using local user key when first setting sync user

:commit:
    `0d86430 <https://github.com/Juris-M/zotero/commit/0d8643087a3b39c929328288e5b8269a76ad971e>`_
:author:
    Dan Stillman
:date:
    2017-03-02 13:34 (JST)

In case items are merged before the first sync


------

Fix updating of notes list when child note is changed or moved to trash

:commit:
    `ba91a2e <https://github.com/Juris-M/zotero/commit/ba91a2ea526fa0b1e0594b4b70916f3a282f56a1>`_
:author:
    Dan Stillman
:date:
    2017-03-01 15:35 (JST)


------

Always show items-loading message switching collections in citation dialogs

:commit:
    `82b789e <https://github.com/Juris-M/zotero/commit/82b789e083b227f267ef9e6e6fd971a47bbf7098>`_
:author:
    Dan Stillman
:date:
    2017-02-28 17:33 (JST)

Previously it only showed if library data hadn't been loaded, but
sorting can also take a little time when switching between collections.


------

Fix Edit Bibliography window

:commit:
    `737f54a <https://github.com/Juris-M/zotero/commit/737f54a70c703d57dc842f8fbf23b269a10a4790>`_
:author:
    Dan Stillman
:date:
    2017-02-28 17:33 (JST)


------

Fix translation error when firstName is null for fieldMode 1

:commit:
    `6c58389 <https://github.com/Juris-M/zotero/commit/6c58389563607fea62b9b8fdc6d207c47f60e628>`_
:author:
    Dan Stillman
:date:
    2017-02-28 13:34 (JST)

Some translators (e.g., CrossRef) return firstName: null with fieldMode:
1, which was causing an error


------

Increase size of browser window during tests

:commit:
    `a35d903 <https://github.com/Juris-M/zotero/commit/a35d903e77c7332779e1106e4b02acdd7a62d68e>`_
:author:
    Dan Stillman
:date:
    2017-02-27 18:54 (JST)

Makes it easier to manually increase Zotero pane before a timeout while
debugging (though the page should just be made bigger by default)


------

Fix potential incorrect placement of new subcollections

:commit:
    `d0a1ac9 <https://github.com/Juris-M/zotero/commit/d0a1ac967763c114ad924542e5f3d2581a8c4f21>`_
:author:
    Dan Stillman
:date:
    2017-02-27 18:51 (JST)

For one particular complicated collection structure, new collections
could be placed in the wrong place until a restart.


------

Additional test for updateSynced()

:commit:
    `18877a9 <https://github.com/Juris-M/zotero/commit/18877a97483794db1ed7c675236653860c4d3610>`_
:author:
    Dan Stillman
:date:
    2017-02-27 17:11 (JST)

Addresses #1187


------

Merge branch 'jurism-5.0-dev' into jurism-5.0

:commit:
    `2dbf0e2 <https://github.com/Juris-M/zotero/commit/2dbf0e2f76b4e89ee33da87c7bb230462372a709>`_
:author:
    fbennett
:date:
    2017-02-27 17:07 (JST)


------

Fix bug in updateSync.

:commit:
    `8a9950b <https://github.com/Juris-M/zotero/commit/8a9950b58826e0fc32e115129adaf78e6fa6c5a1>`_
:author:
    fbennett
:date:
    2017-02-27 17:06 (JST)


------

Update jurisdictions.

:commit:
    `1100d56 <https://github.com/Juris-M/zotero/commit/1100d56a9610636e85c351073bf0337d23994c32>`_
:author:
    fbennett
:date:
    2017-02-27 17:06 (JST)


------

Merge pull request #1187 from fbennett/patch-1

:commit:
    `e7ef1b4 <https://github.com/Juris-M/zotero/commit/e7ef1b4b1f712ec5ff46927de64902862374cb81>`_
:author:
    Dan Stillman
:date:
    2017-02-27 17:00 (JST)

Probable typo in dataObject.js

------

Probable typo in dataObject.js

:commit:
    `6b2bf34 <https://github.com/Juris-M/zotero/commit/6b2bf347327547de416ed3f2156302080cdce610>`_
:author:
    Frank Bennett
:date:
    2017-02-27 16:36 (JST)

This line just crashed on me during a sync operation in Juris-M 5.0. It looks like a typo.

------

Fix startup error on Windows DB upgrades caused by b2b751e0a0

:commit:
    `fa680bb <https://github.com/Juris-M/zotero/commit/fa680bbbf5efa5e11941a81ef1b07dd15e034f59>`_
:author:
    Dan Stillman
:date:
    2017-02-26 20:12 (JST)


------

Fix error when DB backup can't be opened

:commit:
    `b2b751e <https://github.com/Juris-M/zotero/commit/b2b751e0a099fcb030d0ff25f37acf320fbf3b60>`_
:author:
    Dan Stillman
:date:
    2017-02-26 08:09 (JST)


------

Update locales from upstream master

:commit:
    `09b025d <https://github.com/Juris-M/zotero/commit/09b025db4be44109c25abd56a00808c6cf56bf65>`_
:author:
    fbennett
:date:
    2017-02-25 11:04 (JST)


------

Merge changes from upstream master

:commit:
    `e403a66 <https://github.com/Juris-M/zotero/commit/e403a66e8d64a08cd3aba78bd6503ce06deb0fde>`_
:author:
    fbennett
:date:
    2017-02-25 11:01 (JST)


------

Fix displayTitle for untitled legislation, avoid sync crash on missing collections (DUBIOUS)

:commit:
    `ae6eeb0 <https://github.com/Juris-M/zotero/commit/ae6eeb018dc09b4fd5790b36da434ba8bf16fa95>`_
:author:
    fbennett
:date:
    2017-02-25 10:57 (JST)


------

Fix constraint failure in cachedLanguages.js

:commit:
    `857f652 <https://github.com/Juris-M/zotero/commit/857f652483a5c90455f6272e4e867417e47b83ac>`_
:author:
    fbennett
:date:
    2017-02-25 10:55 (JST)


------

Align orderIndex to Zotero expectations in system.sql

:commit:
    `fc1432f <https://github.com/Juris-M/zotero/commit/fc1432fcca5429644bea9a509abf8555afdbc4d1>`_
:author:
    fbennett
:date:
    2017-02-25 10:54 (JST)


------

Handle paginated results in Zotero.Sync.APIClient.getGroups()

:commit:
    `cb5e1fa <https://github.com/Juris-M/zotero/commit/cb5e1fa431378e88fa2d0e136c46191af6288bc0>`_
:author:
    Dan Stillman
:date:
    2017-02-25 08:41 (JST)


------

Add Zotero.Sync.APIClient.getPaginatedResults()

:commit:
    `a9dda10 <https://github.com/Juris-M/zotero/commit/a9dda10a7dbd2f8a1834d56606fed750edf2013a>`_
:author:
    Dan Stillman
:date:
    2017-02-25 08:39 (JST)

Function that automatically follows Link headers and makes additional
requests as necessary, feeding the XMLHTTPRequest object from each
request to a reducer function.


------

Fix incorrect tests due to the bug fixed in b21729edd17

:commit:
    `5762610 <https://github.com/Juris-M/zotero/commit/57626101acadbc99169ce90b968a76ca19bdd3e7>`_
:author:
    Dan Stillman
:date:
    2017-02-24 17:50 (JST)


------

Remove obsolete Zotero.Libraries.isFilesEditable test after 88184b341

:commit:
    `3ba2b40 <https://github.com/Juris-M/zotero/commit/3ba2b40c4cf9b674bd887883a07432de81b15a43>`_
:author:
    Dan Stillman
:date:
    2017-02-24 17:29 (JST)


------

Fix typo in debug line

:commit:
    `0a1629e <https://github.com/Juris-M/zotero/commit/0a1629e9862f45467d096f8bb025406fc12d9506>`_
:author:
    Dan Stillman
:date:
    2017-02-24 16:32 (JST)


------

Add archived group handling to sync runner

:commit:
    `80a0826 <https://github.com/Juris-M/zotero/commit/80a0826eb61c3844e67d501e0533cfc9424051bd>`_
:author:
    Dan Stillman
:date:
    2017-02-24 16:31 (JST)

- Archive remotely missing that user chooses to keep
- Ignore archived groups that don't existing remotely
- Unarchive groups that become available again


------

Add collections pane context-menu option to remove archived libraries

:commit:
    `2fe756c <https://github.com/Juris-M/zotero/commit/2fe756c1c9d29202e995191ec9fcdcd10d70ead8>`_
:author:
    Dan Stillman
:date:
    2017-02-24 16:29 (JST)


------

Add 'archived' property to Zotero.Library objects

:commit:
    `9ac458e <https://github.com/Juris-M/zotero/commit/9ac458e05c35e83c6659996e45d487900f7e3250>`_
:author:
    Dan Stillman
:date:
    2017-02-24 14:13 (JST)

Set when a user loses access to a library but chooses to keep it as a
read-only library.


------

Setting a library's 'editable' to false should do same for 'filesEditable'

:commit:
    `88184b3 <https://github.com/Juris-M/zotero/commit/88184b341bb897761dbd1c29e73c5b0f06ce1f77>`_
:author:
    Dan Stillman
:date:
    2017-02-24 14:10 (JST)


------

Check database values in Zotero.Library#editable tests

:commit:
    `74d1cc1 <https://github.com/Juris-M/zotero/commit/74d1cc193a69bb33fc259b695c373a2351ffeca7>`_
:author:
    Dan Stillman
:date:
    2017-02-24 14:09 (JST)


------

Fix Zotero.Sync.Data.Local._libraryHasUnsyncedFiles()

:commit:
    `b21729e <https://github.com/Juris-M/zotero/commit/b21729edd17c8bebea266abec89008e40b0fc617>`_
:author:
    Dan Stillman
:date:
    2017-02-24 16:21 (JST)

Always returned true


------

Fix error deleting selected library

:commit:
    `f7074a7 <https://github.com/Juris-M/zotero/commit/f7074a75b5592e5f7a9d06fd49cfc2b02c5f8508>`_
:author:
    Dan Stillman
:date:
    2017-02-24 15:34 (JST)


------

Fix renaming attachment from right-hand pane

:commit:
    `1633a73 <https://github.com/Juris-M/zotero/commit/1633a73c3ed8b09575f78a895bd1e708dc082c5b>`_
:author:
    Dan Stillman
:date:
    2017-02-24 10:17 (JST)


------

Fix file sync error if local item version is greater than remote item

:commit:
    `9073239 <https://github.com/Juris-M/zotero/commit/9073239292a04f04820b2ed14f39921b97f42bbb>`_
:author:
    Dan Stillman
:date:
    2017-02-24 08:07 (JST)

This can happen because objects are uploaded in batches, but the version
number from the last batch is used for all objects (since
APIClient.uploadObjects() handles batching internally).


------

Show the right HTTP method in WebDAV errors

:commit:
    `6329e22 <https://github.com/Juris-M/zotero/commit/6329e22a2056848a35663f713669098661335db5>`_
:author:
    Dan Stillman
:date:
    2017-02-24 05:21 (JST)

Could probably QI UnexpectedStatusException.channel to nsIHTTPChannel
and get requestMethod, but this is easier.


------

Disable some incomplete locales (below 50% or so)

:commit:
    `bc940c2 <https://github.com/Juris-M/zotero/commit/bc940c296741eebcaacb80a02d2c7c6426b9b229>`_
:author:
    Dan Stillman
:date:
    2017-02-24 04:38 (JST)

https://groups.google.com/d/topic/zotero-dev/ygqCU5vYn3k/discussion


------

Fix word processor integration installation error

:commit:
    `01f18cb <https://github.com/Juris-M/zotero/commit/01f18cba901cb5362496a0f8413a503898c9467c>`_
:author:
    Dan Stillman
:date:
    2017-02-24 05:10 (JST)


------

Fix error importing from file (regression from 32bebeb1cd0)

:commit:
    `bb38c97 <https://github.com/Juris-M/zotero/commit/bb38c974bf6410f7e253ad5047239b74c8d8bd2b>`_
:author:
    Dan Stillman
:date:
    2017-02-23 11:46 (JST)


------

Use same directory for OS.File.moveAtomic() temp file

:commit:
    `383eac4 <https://github.com/Juris-M/zotero/commit/383eac465731aba582379eace47a72c8ec8ce9bd>`_
:author:
    Dan Stillman
:date:
    2017-02-23 09:53 (JST)

Using the main temp directory was causing writes to fail when storage
was on another filesystem.


------

Fix importing from clipboard

:commit:
    `32bebeb <https://github.com/Juris-M/zotero/commit/32bebeb1cd0739becf470798b952fff8adc76cb0>`_
:author:
    Dan Stillman
:date:
    2017-02-22 19:22 (JST)

Since there's no filename to show in the progress popup, show the
translator label (e.g., "BibTeX") instead.


------

Use OS.File.move() for data-dir migration on Windows, and make automatic

:commit:
    `0964277 <https://github.com/Juris-M/zotero/commit/0964277a37e285003d9874b83bac6725f953b773>`_
:author:
    Dan Stillman
:date:
    2017-02-22 18:56 (JST)

Previously on Windows, where we don't have /bin/mv, we were recursing
into the data directory and copying files individually, which is very
slow, so automatic migration was disabled. Instead, try moving
directories with OS.File.move() with the `noCopy` flag. Moving
directories is technically unsupported by OS.File, but probably only
because of the possibility of a cross-volume copy (which is only
implemented for some platforms), and using `noCopy` hopefully prevents
that. If someone does have their data directory or storage directory on
a different volume, the migration might be quite slow, but leaving a
data directory behind in the Firefox profile directory (where it can be
easily misplaced with a seemingly unrelated Firefox reset) is worse.


------

Fix dragging attachment onto item on Linux (since 1a49018bd)

:commit:
    `1ff1fab <https://github.com/Juris-M/zotero/commit/1ff1fabb315ffb6f12e77df5e689434161792911>`_
:author:
    Dan Stillman
:date:
    2017-02-22 08:17 (JST)


------

Merge pull request #1180 from adomasven/fix/savePage-no-translator

:commit:
    `3c5912f <https://github.com/Juris-M/zotero/commit/3c5912f68d4f91bf09549e3f95863e422abc03db>`_
:author:
    Dan Stillman
:date:
    2017-02-22 06:40 (JST)


------

Default to first translator for /connector/savePage if not provided

:commit:
    `01df8f5 <https://github.com/Juris-M/zotero/commit/01df8f59e56808d1ddf00d065ca46fb674cf4b18>`_
:author:
    Adomas Venčkauskas
:date:
    2017-02-21 21:26 (JST)


------

Don't select sibling on attachment removal if attachment was unselected

:commit:
    `333675d <https://github.com/Juris-M/zotero/commit/333675d8ea0569dcbb6355ce53e46c94568e50f0>`_
:author:
    Dan Stillman
:date:
    2017-02-21 15:21 (JST)

Fixes #1173


------

Fix "Item collection [n] not found" error after deleting collection

:commit:
    `60b2e16 <https://github.com/Juris-M/zotero/commit/60b2e16746f49d7265022d194e561633c17ec743>`_
:author:
    Dan Stillman
:date:
    2017-02-21 14:38 (JST)


------

Remove unused properties

:commit:
    `90603c3 <https://github.com/Juris-M/zotero/commit/90603c33b44678a889bf605bd51e63bb5497a57c>`_
:author:
    Dan Stillman
:date:
    2017-02-21 14:04 (JST)


------

Fix handling of old-style 'condition'/'savedSearch' conditions

:commit:
    `64d73cf <https://github.com/Juris-M/zotero/commit/64d73cf2d0a97b7571b98bccf1be0107df8f785a>`_
:author:
    Dan Stillman
:date:
    2017-02-21 14:02 (JST)

Strip library id prefix in addCondition() and _loadConditions(), so the
internal code can always expect just a key.


------

Fix setting of libraryID in createDataObject() support function

:commit:
    `d32f234 <https://github.com/Juris-M/zotero/commit/d32f23471efd4ad0556c1f85c0328d5661ca0dc1>`_
:author:
    Dan Stillman
:date:
    2017-02-21 14:03 (JST)

When another property was also set, setting libraryID would fail.


------

Allow opening multiple URLs via View Online

:commit:
    `e465cf0 <https://github.com/Juris-M/zotero/commit/e465cf058eb99b646c29d7ae0c9ae9f70accf4fa>`_
:author:
    Dan Stillman
:date:
    2017-02-21 08:49 (JST)


------

Don't save full-text cache files for linked files to linked directory

:commit:
    `5c50bb0 <https://github.com/Juris-M/zotero/commit/5c50bb00cfc936013ebd907c09d1437124f9c111>`_
:author:
    Dan Stillman
:date:
    2017-02-21 07:51 (JST)

Regression from 80f888f374. Not entirely sure what I was trying to fix there.


------

Revert "temporary" build param. Oops.

:commit:
    `5c6abff <https://github.com/Juris-M/zotero/commit/5c6abff9e69ec884dcdf7c6288b21e8c0a0fda56>`_
:author:
    fbennett
:date:
    2017-02-20 15:25 (JST)


------

Fix failure of field updates in merge pane

:commit:
    `4c126d3 <https://github.com/Juris-M/zotero/commit/4c126d397fef76e05270408331d57e494d5f9428>`_
:author:
    fbennett
:date:
    2017-02-20 15:22 (JST)


------

Apply creator id mapping in multi upgrade only if generated by upgrade code in Zotero schema

:commit:
    `18198c0 <https://github.com/Juris-M/zotero/commit/18198c008076d3e192caec6564aac6e4cba45eeb>`_
:author:
    fbennett
:date:
    2017-02-20 15:21 (JST)


------

Temporary checkout of branch param

:commit:
    `face09c <https://github.com/Juris-M/zotero/commit/face09ce308d5d939bea76a5d24107e0f3a33c23>`_
:author:
    fbennett
:date:
    2017-02-20 10:31 (JST)


------

update chai

:commit:
    `e8ca529 <https://github.com/Juris-M/zotero/commit/e8ca529a8f1005c82e170a737b1d8788ddefa382>`_
:author:
    fbennett
:date:
    2017-02-20 10:24 (JST)


------

Update locales

:commit:
    `7c62763 <https://github.com/Juris-M/zotero/commit/7c6276316d04741e9b22d5e394ed82aee9d86fae>`_
:author:
    fbennett
:date:
    2017-02-20 10:21 (JST)


------

Merge from upstream master

:commit:
    `3bf7571 <https://github.com/Juris-M/zotero/commit/3bf7571e64572d1831789e4888f4f1231766cc19>`_
:author:
    fbennett
:date:
    2017-02-20 10:19 (JST)


------

Small bugfixes and rearrangements

:commit:
    `a1b47fc <https://github.com/Juris-M/zotero/commit/a1b47fca31a0b8d67ef5e2a8d665097b9c9a16f3>`_
:author:
    fbennett
:date:
    2017-02-20 10:10 (JST)


------

Add indexes to multilingual tables for use in delete operations.

:commit:
    `6174f91 <https://github.com/Juris-M/zotero/commit/6174f91b3b57cb614de0337199a8ec474b646a8b>`_
:author:
    fbennett
:date:
    2017-02-19 13:02 (JST)


------

Remove stale methods

:commit:
    `7fd44bb <https://github.com/Juris-M/zotero/commit/7fd44bbf2d523ac4f337359b076df348e40d4d91>`_
:author:
    fbennett
:date:
    2017-02-19 10:41 (JST)


------

Yield async DB read/write ops

:commit:
    `c716a28 <https://github.com/Juris-M/zotero/commit/c716a28fce1074e6c11a526f337ec74a3f64cf79>`_
:author:
    fbennett
:date:
    2017-02-19 10:41 (JST)


------

Fix old-style 'collection' condition for My Library in saved searches

:commit:
    `bb0fa73 <https://github.com/Juris-M/zotero/commit/bb0fa7389971ba7f979809ba7971d48a01edf0ac>`_
:author:
    Dan Stillman
:date:
    2017-02-19 04:19 (JST)


------

Merge pull request #1172 from adomasven/fix/clean-authors

:commit:
    `07ea9da <https://github.com/Juris-M/zotero/commit/07ea9dae849fbae9415aa12d6b7694d40f1f629c>`_
:author:
    Dan Stillman
:date:
    2017-02-19 02:52 (JST)

Get a better last name if current guess starts with weird symbols

------

Move the common code for word plugin installer to main repo

:commit:
    `e8ac639 <https://github.com/Juris-M/zotero/commit/e8ac639273a6224d7db714f6b797b160f9d21765>`_
:author:
    Adomas Venčkauskas
:date:
    2017-02-12 05:52 (JST)

From https://github.com/zotero/zotero-word-for-mac-integration/blob/master/resource/installer_common.jsm

Removes some very old code to handle Gecko 2.1<
Does not affect existing plugins/installers in any way, but sets us up
to unifiy the installer once word plugins are updated.


------

Get a better last name if current guess starts with weird symbols

:commit:
    `bf1c52a <https://github.com/Juris-M/zotero/commit/bf1c52a5fd4e910486297d7e10310b3f3c8390c8>`_
:author:
    Adomas Venčkauskas
:date:
    2017-02-12 00:56 (JST)


------

Add missing alt-field change memo method

:commit:
    `78d2609 <https://github.com/Juris-M/zotero/commit/78d260980b6d4ef40e2e7f21f49e7eea855aa989>`_
:author:
    fbennett
:date:
    2017-02-18 12:48 (JST)


------

Bump system schema version

:commit:
    `d95379b <https://github.com/Juris-M/zotero/commit/d95379b7702df479447125b817391860048217fe>`_
:author:
    fbennett
:date:
    2017-02-18 12:47 (JST)


------

Fix bugs in sync encoding

:commit:
    `cddc04e <https://github.com/Juris-M/zotero/commit/cddc04ea8838a334f95ea36ec23b130a5836e7eb>`_
:author:
    fbennett
:date:
    2017-02-17 17:25 (JST)


------

Remove Juris-M blob from toolbar

:commit:
    `690e3e7 <https://github.com/Juris-M/zotero/commit/690e3e71b1daf4445af2870f5f8635e308f421d5>`_
:author:
    fbennett
:date:
    2017-02-17 17:24 (JST)


------

On 404 from ZFS upload, mark attachment item for upload

:commit:
    `058a4b1 <https://github.com/Juris-M/zotero/commit/058a4b1593b64ba9d142ecb20a183fdf049db746>`_
:author:
    Dan Stillman
:date:
    2017-02-17 10:11 (JST)

This shouldn't happen, but reported here:

https://forums.zotero.org/discussion/64386/5-0-beta-persistent-sync-errors

Possibly the same cause as this:

https://forums.zotero.org/discussion/64438/5-0-beta-persistent-sync-error


------

If parent item is missing remotely, mark as unsynced and add to queue

:commit:
    `34c90fd <https://github.com/Juris-M/zotero/commit/34c90fd156eb83486459ec0370626a7c7006ff96>`_
:author:
    Dan Stillman
:date:
    2017-02-17 08:01 (JST)

This shouldn't happen, but there've been some reports of it.


------

Fix format of object data added back to upload queue after failure

:commit:
    `cbed716 <https://github.com/Juris-M/zotero/commit/cbed716424acca3552acf9fc36aa3a616a57fac4>`_
:author:
    Dan Stillman
:date:
    2017-02-17 07:59 (JST)


------

Include 'skipNotifier' in 'skipAll' when saving objects

:commit:
    `ddb7d31 <https://github.com/Juris-M/zotero/commit/ddb7d3107d1c1c2a302f36820c098a74e09ac5a2>`_
:author:
    Dan Stillman
:date:
    2017-02-17 07:58 (JST)


------

Fix firstCreator for unsaved items

:commit:
    `bb665a5 <https://github.com/Juris-M/zotero/commit/bb665a56b67d237a7c9a21344eae8fb33d0d910c>`_
:author:
    Dan Stillman
:date:
    2017-02-16 13:13 (JST)

Necessary when editing embedded citations that don't exist in library


------

Update citeproc-js to 1.1.155

:commit:
    `9d8f804 <https://github.com/Juris-M/zotero/commit/9d8f8046ff84e4390df9e9f842dc4623d9da3e4a>`_
:author:
    fbennett
:date:
    2017-02-16 10:28 (JST)


------

Mark trashed items as unsynced and update parents (including note list)

:commit:
    `3830aa1 <https://github.com/Juris-M/zotero/commit/3830aa11252562dd42e5722241cb5fb805193bfa>`_
:author:
    Dan Stillman
:date:
    2017-02-16 03:15 (JST)

Regression from 3a0e0cb0886


------

Update locales from Transifex

:commit:
    `41538eb <https://github.com/Juris-M/zotero/commit/41538ebca6233eaadc2892da1fed437011909ffc>`_
:author:
    Dan Stillman
:date:
    2017-02-16 03:13 (JST)


------

Fix bugs in jurisdiction default and set/display

:commit:
    `de87020 <https://github.com/Juris-M/zotero/commit/de87020292b279dd01c40bc5baee3c08615538f4>`_
:author:
    fbennett
:date:
    2017-02-14 21:37 (JST)


------

Fix upgrade bug to dropped creator variants

:commit:
    `62d65b8 <https://github.com/Juris-M/zotero/commit/62d65b881ee1226f2a8eef0a4c1d5c07e769ca96>`_
:author:
    fbennett
:date:
    2017-02-14 21:37 (JST)


------

More fixes for jurisdiction edit/display

:commit:
    `b1f9e90 <https://github.com/Juris-M/zotero/commit/b1f9e90d58f2410843afaacd5defddab1c8d7dc6>`_
:author:
    fbennett
:date:
    2017-02-14 19:33 (JST)


------

Increment multilingual schema

:commit:
    `0b3be8a <https://github.com/Juris-M/zotero/commit/0b3be8aea14c828c8fd8f13d5b7427373a1ad941>`_
:author:
    fbennett
:date:
    2017-02-14 19:31 (JST)


------

Cherry-pick change from jurism branch

:commit:
    `604c5c7 <https://github.com/Juris-M/zotero/commit/604c5c7e552ecf259bbd1e049772fe0193b229aa>`_
:author:
    fbennett
:date:
    2017-02-14 19:31 (JST)


------

Fix jurisdiction display in item tree

:commit:
    `b1b661f <https://github.com/Juris-M/zotero/commit/b1b661f7c600ac61af6c751f25c0933b36370a03>`_
:author:
    fbennett
:date:
    2017-02-14 10:28 (JST)


------

Fix bug in top-level jurisdiction reverse lookup

:commit:
    `d6e8151 <https://github.com/Juris-M/zotero/commit/d6e8151a56daaefcf0c05b286498845c235ddc2f>`_
:author:
    fbennett
:date:
    2017-02-14 08:11 (JST)


------

Updating install.rdf to version 4.0.29.12m99beta1

:commit:
    `e83057a <https://github.com/Juris-M/zotero/commit/e83057ae3c8f3a92472c82b352d8c559a1c0febf>`_
:author:
    fbennett
:date:
    2017-02-11 21:47 (JST)


------

Increment patch level, reset beta level

:commit:
    `e586e36 <https://github.com/Juris-M/zotero/commit/e586e360e8d0aa5638a3454621f35ebf0f7ead89>`_
:author:
    fbennett
:date:
    2017-02-11 21:46 (JST)


------

Updating install.rdf to version 4.0.29.12m96beta2

:commit:
    `4cd8276 <https://github.com/Juris-M/zotero/commit/4cd8276d9eed1602241b099c550d183f516bc791>`_
:author:
    fbennett
:date:
    2017-02-11 21:33 (JST)


------

Updating install.rdf to version 4.0.29.12m96beta1

:commit:
    `f9e8621 <https://github.com/Juris-M/zotero/commit/f9e8621ec69114b062a239b8b5d7aa85bc6162ff>`_
:author:
    fbennett
:date:
    2017-02-11 21:29 (JST)


------

Fix subjurisdiction searches

:commit:
    `1255292 <https://github.com/Juris-M/zotero/commit/12552922fc306ce0311f854504d38d011ca54f4b>`_
:author:
    fbennett
:date:
    2017-02-11 20:57 (JST)


------

Return a raw jurisdiction ID or name by default, not "default"

:commit:
    `a56c230 <https://github.com/Juris-M/zotero/commit/a56c230deeb8fad1ee41c17ee0aa882853c84ba3>`_
:author:
    fbennett
:date:
    2017-02-11 20:56 (JST)


------

Update to full set of jurisdiction data

:commit:
    `e6c8d6f <https://github.com/Juris-M/zotero/commit/e6c8d6fe40c1279691065877498cc465524bccdf>`_
:author:
    fbennett
:date:
    2017-02-11 17:54 (JST)


------

Update citeproc-js to 1.1.154

:commit:
    `3f8eb7a <https://github.com/Juris-M/zotero/commit/3f8eb7a0d2cfa8f405a57457fdf8349d57925e63>`_
:author:
    fbennett
:date:
    2017-02-11 17:53 (JST)


------

Allow resizing of classic citation dialog.

:commit:
    `110f2a3 <https://github.com/Juris-M/zotero/commit/110f2a3448a60fc7f357a7d253068ef31a73b061>`_
:author:
    fbennett
:date:
    2017-02-11 15:02 (JST)

Commit from pull request submitted by Karl Hegbloom:
  https://github.com/Juris-M/zotero/pull/23


------

Fix glitch that crept in during merge

:commit:
    `f502cc5 <https://github.com/Juris-M/zotero/commit/f502cc5514b355b04566e7f8f646e16032a06afb>`_
:author:
    fbennett
:date:
    2017-02-11 14:41 (JST)


------

Update locales from upstream master

:commit:
    `9749482 <https://github.com/Juris-M/zotero/commit/9749482cfd4046a6d2890699d62f7554a174a7a9>`_
:author:
    fbennett
:date:
    2017-02-11 13:50 (JST)


------

Update CSL styles

:commit:
    `dbf1431 <https://github.com/Juris-M/zotero/commit/dbf1431752c69c20606f30ee66387e615111a5fb>`_
:author:
    fbennett
:date:
    2017-02-11 13:45 (JST)


------

Merge from upstream master

:commit:
    `84f26a3 <https://github.com/Juris-M/zotero/commit/84f26a3bf909b6df09e8008e266d6cc774d8bed4>`_
:author:
    fbennett
:date:
    2017-02-11 13:44 (JST)


------

Fix emptying from trash (broken in 7ede52355d)

:commit:
    `469d689 <https://github.com/Juris-M/zotero/commit/469d689f3769a221a8c8b081f187f57bb8a44634>`_
:author:
    Dan Stillman
:date:
    2017-02-11 04:11 (JST)

Zotero.Items.eraseTx() doesn't exist -- use Zotero.Items.erase() instead


------

Retain style properties when pasting content from Word/Office

:commit:
    `12735fa <https://github.com/Juris-M/zotero/commit/12735faa926d3ccaa9999c98ade0fb8b46622967>`_
:author:
    Dan Stillman
:date:
    2017-02-10 13:40 (JST)


------

Preload names of all parent jurisdictions on an item

:commit:
    `22618ec <https://github.com/Juris-M/zotero/commit/22618ecc93ec21827ba420ee1192f0400c2b2045>`_
:author:
    fbennett
:date:
    2017-02-10 12:19 (JST)


------

Update to jurisdictions to include Vietnam for testing

:commit:
    `f6fe0f6 <https://github.com/Juris-M/zotero/commit/f6fe0f6e5e4fd643e9f8495351d2f55e198cce1d>`_
:author:
    fbennett
:date:
    2017-02-10 10:58 (JST)


------

Set default jurisdiction

:commit:
    `cc59f36 <https://github.com/Juris-M/zotero/commit/cc59f36abc24d84d99ade91c23216bcd4e8cbbce>`_
:author:
    fbennett
:date:
    2017-02-10 10:57 (JST)


------

Update citeproc-js to 1.1.152

:commit:
    `266653a <https://github.com/Juris-M/zotero/commit/266653a841554a00c3b4055297aef1b83f200c76>`_
:author:
    fbennett
:date:
    2017-02-10 10:57 (JST)


------

Change to preloadAbbreviations function signature

:commit:
    `72bfdbe <https://github.com/Juris-M/zotero/commit/72bfdbec64bb287ac4af7ff2aaf8008dae8be1cd>`_
:author:
    fbennett
:date:
    2017-02-10 10:56 (JST)


------

Fix test failure after 27cb099c825

:commit:
    `0570c2e <https://github.com/Juris-M/zotero/commit/0570c2edc7d47762e3281fe4ea36f284c4f9b1e2>`_
:author:
    Dan Stillman
:date:
    2017-02-09 16:17 (JST)

Attachments are now saved before the connector server responds, because they're
no longer started out-of-band in saveItems(). This is necessary to prevent
transaction badness during imports, but it may not be what we want for the
connector, so we may want to revisit this after further testing.


------

Drastically speed up moving items to the trash

:commit:
    `3a0e0cb <https://github.com/Juris-M/zotero/commit/3a0e0cb0886bdcd105ec03d8bac12fff5079e2f7>`_
:author:
    Dan Stillman
:date:
    2017-02-09 11:53 (JST)

E.g., moving 3,600 items to the trash now takes 4 seconds instead of 62

Instead of saving each item, update internal state and database directly
(which is more brittle but worth it). Also avoid unnecessary sorting
after removing an item from the items tree.


------

Update ProgressWindow constructor call after c00db272f

:commit:
    `58edb31 <https://github.com/Juris-M/zotero/commit/58edb3143ed83867a503eb4738442b2de20bcd33>`_
:author:
    Dan Stillman
:date:
    2017-02-09 11:23 (JST)


------

Don't select items added via import

:commit:
    `ed047f0 <https://github.com/Juris-M/zotero/commit/ed047f06df3226ca9d998cb56d5020b0a1b15f02>`_
:author:
    Dan Stillman
:date:
    2017-02-09 11:19 (JST)


------

Make sure 'collections' passed to Translate is an array

:commit:
    `a4572c9 <https://github.com/Juris-M/zotero/commit/a4572c94420c73ea154ab9ebfa9ad1e1ae078db7>`_
:author:
    Dan Stillman
:date:
    2017-02-09 04:58 (JST)


------

Allow asynchronous item saving in import translators

:commit:
    `27cb099 <https://github.com/Juris-M/zotero/commit/27cb099c8251b902f3dc7dafc06da48da1c0cf1e>`_
:author:
    Dan Stillman
:date:
    2017-02-09 04:44 (JST)

This allows for imported items to be saved individually instead of being
saved in a batch after processing the entire imported file (which for
large imports would hang the UI, even if the actual saving was
asynchronous). This also fixes the progress meter during asynchronous
saves.

To take advantage of this, import translators will need to return a
promise when available (using the native Promise object) from doImport()
and wait for optional promises from item.complete().

The logic here can probably be streamlined further. (E.g., we might be
able to say that item.complete() always returns a promise.) It's
complicated by the fact that, at the moment, Promise isn't available in
child sandboxes, though this can probably be fixed.

Tests forthcoming, but they require a translator that supports this,
which needs to be committed separately.

View with -w for a cleaner diff.


------

Allow altering text in a ProgressWindow line in OO mode

:commit:
    `3e35764 <https://github.com/Juris-M/zotero/commit/3e35764405a1a9ff823d24a3c0909e17657fcf45>`_
:author:
    Dan Stillman
:date:
    2017-02-09 04:32 (JST)

And fix progress meter display


------

Fix additional file sync error with no remote stored hash

:commit:
    `12ad749 <https://github.com/Juris-M/zotero/commit/12ad74908740abc8f64a6d5394f1c3af06fd2732>`_
:author:
    Dan Stillman
:date:
    2017-02-09 04:12 (JST)

Follow-up to c9694e93b0


------

Fix handling of some old-style URLs in zotero:// protocol handler

:commit:
    `1ea80c4 <https://github.com/Juris-M/zotero/commit/1ea80c4352ba787d96615a994fc7ca4c07a14eff>`_
:author:
    Dan Stillman
:date:
    2017-02-08 14:20 (JST)


------

Repairs for jurisdiction UI and data

:commit:
    `ea683d6 <https://github.com/Juris-M/zotero/commit/ea683d6a0df5f2641a69a65b6358c7c6964e1418>`_
:author:
    fbennett
:date:
    2017-02-08 11:05 (JST)


------

Add text color buttons to notes, and move direction to context menu

:commit:
    `fe063fa <https://github.com/Juris-M/zotero/commit/fe063faf0051520fcd784ee5b8be23f23df2d4c8>`_
:author:
    Dan Stillman
:date:
    2017-02-04 05:31 (JST)

And reduce button spacing slightly to accommodate

Closes #1151


------

Update empty state of parent collection when deleting subcollection

:commit:
    `55e9a0e <https://github.com/Juris-M/zotero/commit/55e9a0ee3508b1c0099c92f15f8b540d2768d05e>`_
:author:
    Dan Stillman
:date:
    2017-02-03 15:17 (JST)


------

Fix csledit

:commit:
    `a57ea28 <https://github.com/Juris-M/zotero/commit/a57ea28d42d6229eea39a5d77ef336e567fece93>`_
:author:
    Dan Stillman
:date:
    2017-02-03 14:53 (JST)

Closes #1149

(There's an additional change in #1149, but as far as I can tell it's
not necessary for csledit.xul.)


------

Remove temporary debugging buttons in prefs

:commit:
    `3a2fb29 <https://github.com/Juris-M/zotero/commit/3a2fb2938dd87d8ea31a6c7d9754ad34ac9e2da5>`_
:author:
    Dan Stillman
:date:
    2017-02-03 14:06 (JST)


------

Fix moving items between collections

:commit:
    `1a49018 <https://github.com/Juris-M/zotero/commit/1a49018bdcaa8c1704374ad568946a6ae89df231>`_
:author:
    Dan Stillman
:date:
    2017-02-03 14:04 (JST)

`mozSourceNode` seems to no longer be set in `dataTransfer` objects
during drags, so we now store it in `Zotero.DragDrop`.


------

Don't unload object on save error if not new

:commit:
    `76bc61e <https://github.com/Juris-M/zotero/commit/76bc61e8827d43b44c719c6956a16e99d97f8fbe>`_
:author:
    Dan Stillman
:date:
    2017-02-03 12:34 (JST)


------

Return array copy in ItemFields.getItemTypeFields()/getTypeFieldsFromBase()

:commit:
    `79a07ca <https://github.com/Juris-M/zotero/commit/79a07cad9eee0d2276ed96376635a82eb3e81fa4>`_
:author:
    Dan Stillman
:date:
    2017-02-03 08:42 (JST)


------

Require DB transaction in Zotero.Collection.prototype.removeItems()

:commit:
    `7ede523 <https://github.com/Juris-M/zotero/commit/7ede52355dce104f06a7be2c53de6aec5de7dc75>`_
:author:
    Dan Stillman
:date:
    2017-02-03 08:39 (JST)

For consistency with Zotero.Collection.prototype.addItems()


------

Don't select last item in list when item is removed from collection

:commit:
    `f98de97 <https://github.com/Juris-M/zotero/commit/f98de97e4da4d76423dddee93c1c1406e9faf599>`_
:author:
    Dan Stillman
:date:
    2017-02-03 08:37 (JST)


------

Fix translation error reporting in connectors

:commit:
    `9ecfc31 <https://github.com/Juris-M/zotero/commit/9ecfc31fd435bba759b3f77fb3adc1ecf53fe1a4>`_
:author:
    Adomas Venčkauskas
:date:
    2017-02-03 04:16 (JST)

Closes zotero/zotero-connectors#101


------

Update TinyMCE to 4.5.2

:commit:
    `0998c1d <https://github.com/Juris-M/zotero/commit/0998c1d1daa61bd14b7c01367a221e7e40362bfd>`_
:author:
    Dan Stillman
:date:
    2017-02-02 14:23 (JST)


------

Don't localize "OpenURL"

:commit:
    `0b9b758 <https://github.com/Juris-M/zotero/commit/0b9b75802975bb88a2180c794e0ea2a451edec54>`_
:author:
    Dan Stillman
:date:
    2017-02-02 07:07 (JST)


------

Use entity_encoding: 'raw' in notes

:commit:
    `bd8debb <https://github.com/Juris-M/zotero/commit/bd8debb2df92da80524be25f7323cf1c9d352a7f>`_
:author:
    Dan Stillman
:date:
    2017-02-02 06:56 (JST)

This (and some other things) will help avoid changes in uploaded notes, which
cause loss of cursor position and other problems after local notes are updated
with the server version.

A side effect is that multiple spaces won't be converted to `&nbsp;`, so
anything consuming note content will have to use `white-space: pre`.

(Notes in reports appear to be substituting `&nbsp;` as necessary,
though I'm not sure where that's happening.)


------

Address debug reporting in connector (zotero/zotero-connectors#97)

:commit:
    `ef0d9af <https://github.com/Juris-M/zotero/commit/ef0d9afe8e96517288b76097fb82e9682a6cb487>`_
:author:
    Adomas Venčkauskas
:date:
    2017-02-01 07:46 (JST)


------

Fix broken date class (regression 38b0fb2)

:commit:
    `21a7a49 <https://github.com/Juris-M/zotero/commit/21a7a49a1b9d080c7c21ef340f9229509cf6e73f>`_
:author:
    Adomas Venčkauskas
:date:
    2017-02-01 07:02 (JST)


------

Zotero.Promise.coroutine not supported in connector shared code (broken ef1ff8b)

:commit:
    `38b0fb2 <https://github.com/Juris-M/zotero/commit/38b0fb26500807631a0541975a3b099b1d686a4d>`_
:author:
    Adomas Venčkauskas
:date:
    2017-02-01 07:00 (JST)


------

Update translate error report with promisified info (broken c3dcaf9)

:commit:
    `c4d39ba <https://github.com/Juris-M/zotero/commit/c4d39ba79fcb12dec38821bc075c4b0c96477666>`_
:author:
    Adomas Venčkauskas
:date:
    2017-02-01 06:15 (JST)


------

More report note fixes

:commit:
    `26eebcf <https://github.com/Juris-M/zotero/commit/26eebcfc4476af1095fab55fa21f9f14d8b4591e>`_
:author:
    Dan Stillman
:date:
    2017-02-01 03:56 (JST)

Restore handling of plaintext notes from before 835003dd6d3, and search
for a wider set of HTML indicators to avoid showing markup when no <p>
tags.


------

Don't modify options object passed to DataObject.save()

:commit:
    `4871374 <https://github.com/Juris-M/zotero/commit/4871374673a33eaf272462167888c8e7c03ebf80>`_
:author:
    Dan Stillman
:date:
    2017-01-31 06:07 (JST)


------

Parse note content in reports as HTML instead of XML

:commit:
    `835003d <https://github.com/Juris-M/zotero/commit/835003dd6d3f5f3059d3b7cfff13d80b3454d2c2>`_
:author:
    Dan Stillman
:date:
    2017-01-31 15:23 (JST)

And remove raw-markup fallback when not XML


------

Fix #1163, Unable to open zotero urls from tinymce

:commit:
    `ae47ae2 <https://github.com/Juris-M/zotero/commit/ae47ae28bdb5801649fde73fed68fc351d6b44e7>`_
:author:
    Dan Stillman
:date:
    2017-01-31 04:01 (JST)


------

Fix mangled output from Zotero.Utilities.getAsyncInputStream()

:commit:
    `b073c3e <https://github.com/Juris-M/zotero/commit/b073c3e68092edeab61a6afad9819b0f1b4e0ae2>`_
:author:
    Dan Stillman
:date:
    2017-01-31 03:33 (JST)

Proper fix (as opposed to 5236d01791f) for
https://forums.zotero.org/discussion/64022/5-0-beta-generate-report-is-often-garbled


------

Ensure modified item stays visible

:commit:
    `10111db <https://github.com/Juris-M/zotero/commit/10111dbd98c140620b9fb97d40895f0d0e74149a>`_
:author:
    Dan Stillman
:date:
    2017-01-29 23:18 (JST)

There seems to be a bug here where, if the item is off-screen when
modified, it doesn't become visible, but it now does stay visible when
it's on-screen to begin with.


------

Fix 412 after choosing local file on file conflict

:commit:
    `48a81e3 <https://github.com/Juris-M/zotero/commit/48a81e3b4606b26232f5d8312688c150529cb796>`_
:author:
    Dan Stillman
:date:
    2017-01-29 21:50 (JST)


------

Add option to Zotero.ProgressWindow to not close on click

:commit:
    `c00db27 <https://github.com/Juris-M/zotero/commit/c00db272fade0d094fe19716724a8deb4442faa6>`_
:author:
    Dan Stillman
:date:
    2017-01-28 11:05 (JST)

ProgressWindow now takes an options object instead of a window (which is now an
available option, along with 'closeOnClick')


------

Fix importing of files using relative paths

:commit:
    `4d56191 <https://github.com/Juris-M/zotero/commit/4d56191f0cea1628579e219af74cacbd05cc3b9c>`_
:author:
    Dan Stillman
:date:
    2017-01-28 10:51 (JST)


------

Update translators

:commit:
    `a33c53d <https://github.com/Juris-M/zotero/commit/a33c53dcdbab4a826e7d93b63a9eef52f7c434bf>`_
:author:
    Dan Stillman
:date:
    2017-01-28 07:46 (JST)


------

Make ZFS file syncing always enabled for publications library for now

:commit:
    `22d4603 <https://github.com/Juris-M/zotero/commit/22d460312c350123422c0a077d9a92060caf6c44>`_
:author:
    Dan Stillman
:date:
    2017-01-28 04:14 (JST)

At least until we have a better interface for setting library-specific
sync settings

Previously, if My Library file syncing was disabled or set to WebDAV, My
Publications files wouldn't be uploaded.


------

Fix error in recursiveCollections mode with huge number of subcollections

:commit:
    `2797479 <https://github.com/Juris-M/zotero/commit/27974791b0cf909315744b94dd16feaaaa3e1459>`_
:author:
    Dan Stillman
:date:
    2017-01-28 02:00 (JST)


------

Fix truncated reports with multi-byte characters

:commit:
    `e6d7ae8 <https://github.com/Juris-M/zotero/commit/e6d7ae8e2f7538b7c0e6a9c2e82e5a1b52f5632c>`_
:author:
    Dan Stillman
:date:
    2017-01-27 12:32 (JST)


------

Fix misplaced line in e23452363b

:commit:
    `31ed9bd <https://github.com/Juris-M/zotero/commit/31ed9bd70b9c1e89abd6f7be7413c5fdb03fe804>`_
:author:
    Dan Stillman
:date:
    2017-01-27 08:29 (JST)


------

Automatically use remote version when two items in trash are in conflict

:commit:
    `aec9b2a <https://github.com/Juris-M/zotero/commit/aec9b2a5311ac6a030287e02a43c7f8caf5acacc>`_
:author:
    Dan Stillman
:date:
    2017-01-27 08:07 (JST)


------

Handle auto-hyphenated ISBN during item conflict

:commit:
    `e234523 <https://github.com/Juris-M/zotero/commit/e23452363b8d068d76ca8c0f12d777824b072a4e>`_
:author:
    Dan Stillman
:date:
    2017-01-27 05:02 (JST)

Always keep the hyphenated version, and don't consider it a visible conflict


------

Fix "Show in Library" in item context menu

:commit:
    `3a1bec1 <https://github.com/Juris-M/zotero/commit/3a1bec1ab30df1aeb1107de6a60f624890662c40>`_
:author:
    Dan Stillman
:date:
    2017-01-26 16:57 (JST)


------

Fix extended characters in reports (since 5236d01791)

:commit:
    `2553206 <https://github.com/Juris-M/zotero/commit/255320656ffd0899fbeac9e86bcb3a5cf8a507f2>`_
:author:
    Dan Stillman
:date:
    2017-01-26 15:52 (JST)


------

Fix error generating reports

:commit:
    `3415aae <https://github.com/Juris-M/zotero/commit/3415aae908cd334d2a5c76fc451505495f443056>`_
:author:
    Dan Stillman
:date:
    2017-01-25 05:42 (JST)

9b247ebba7c follow-up


------

Don't show incorrect instructions for adding Locate engines

:commit:
    `50b7dd3 <https://github.com/Juris-M/zotero/commit/50b7dd39a036615236661135bb635e83e8d44f18>`_
:author:
    Dan Stillman
:date:
    2017-01-24 17:50 (JST)

Not currently possible in 5.0

https://github.com/zotero/zotero-connectors/issues/92


------

Update locales from Transifex

:commit:
    `1344219 <https://github.com/Juris-M/zotero/commit/13442198db334338585c1f19839a4847e0d86bb6>`_
:author:
    Dan Stillman
:date:
    2017-01-24 17:48 (JST)


------

Rename "Full Sync" to "Reset Data Sync History", and don't start sync

:commit:
    `cfa15a3 <https://github.com/Juris-M/zotero/commit/cfa15a3e3ca89f22920dabf1a4bb95feb2dd8a81>`_
:author:
    Dan Stillman
:date:
    2017-01-24 17:38 (JST)

This allows generating debug output for full sync of a single library.

Also clarify some dialog text


------

Enable 45 ESR for Travis, since it's still used on Windows

:commit:
    `134e77b <https://github.com/Juris-M/zotero/commit/134e77b432eb25aabdc184716bfd236f8af50acf>`_
:author:
    Dan Stillman
:date:
    2017-01-24 16:53 (JST)


------

Update submodules

:commit:
    `c3ba734 <https://github.com/Juris-M/zotero/commit/c3ba7340c6a02ce6e395b45b23b4a953c6c5bc4a>`_
:author:
    Dan Stillman
:date:
    2017-01-24 16:51 (JST)


------

Allow number or name for translator type in buildDummyTranslator()

:commit:
    `a43f9d1 <https://github.com/Juris-M/zotero/commit/a43f9d16ac0279034c80c1c4a65b5d6e3b38417d>`_
:author:
    Dan Stillman
:date:
    2017-01-23 22:58 (JST)

This reverts c6b78da69d6, which changed it to expect numbers when I
noticed the type being undefined in debug output, but apparently the
only tests where the type actually mattered passed it as a name.

At some point we should just change all tests to pass as a name.


------

Fix item key search (broken by a01f2765e4)

:commit:
    `edb08e1 <https://github.com/Juris-M/zotero/commit/edb08e179c817993d33344bfd62aeac1ca6917a7>`_
:author:
    Dan Stillman
:date:
    2017-01-23 22:46 (JST)


------

Fix quick search and quick format bar (broken in 9b247ebba7c)

:commit:
    `a01f276 <https://github.com/Juris-M/zotero/commit/a01f2765e4cc5387c1380011059c17e84e1c8d91>`_
:author:
    Dan Stillman
:date:
    2017-01-23 22:25 (JST)

As evidenced by majorly failing tests


------

Temporary prefs buttons to debug slow DB issue

:commit:
    `249f9c6 <https://github.com/Juris-M/zotero/commit/249f9c6495ae717da9768972311d9e98b1aaf102>`_
:author:
    Dan Stillman
:date:
    2017-01-23 21:20 (JST)


------

Fix translatorType in dummy translators in tests

:commit:
    `c6b78da <https://github.com/Juris-M/zotero/commit/c6b78da69d660e2a15bc5729309c64a091211893>`_
:author:
    Dan Stillman
:date:
    2017-01-23 21:02 (JST)


------

Fix push sync for group libraries

:commit:
    `41413b1 <https://github.com/Juris-M/zotero/commit/41413b1ab23f3e57210c500192bfc5831f1d298e>`_
:author:
    Dan Stillman
:date:
    2017-01-23 20:45 (JST)


------

Make sure translator file ends with newline when saving

:commit:
    `cddc84f <https://github.com/Juris-M/zotero/commit/cddc84ffe33e6b03bdb805f4d45a6353a4ef32d3>`_
:author:
    Dan Stillman
:date:
    2017-01-23 19:57 (JST)

Fixes https://github.com/zotero/scaffold/issues/37


------

Fix file upload error when remote attachment has no stored hash

:commit:
    `c9694e9 <https://github.com/Juris-M/zotero/commit/c9694e93b02ea3bec41fb17d258b5b69a43a8186>`_
:author:
    Dan Stillman
:date:
    2017-01-23 05:30 (JST)


------

Disable script run time warning in tests

:commit:
    `90a3013 <https://github.com/Juris-M/zotero/commit/90a301380279850a84f7d0bdabb83e6ac42b2655>`_
:author:
    Dan Stillman
:date:
    2017-01-21 20:37 (JST)


------

Fix item keys in report ids

:commit:
    `b3c28dc <https://github.com/Juris-M/zotero/commit/b3c28dc79e55ad8c4e495bea1e3c7cf94589c0c8>`_
:author:
    Dan Stillman
:date:
    2017-01-21 20:36 (JST)


------

Fix mangled large reports

:commit:
    `5236d01 <https://github.com/Juris-M/zotero/commit/5236d01791f36f2758675d437ebe22ad168d7f4a>`_
:author:
    Dan Stillman
:date:
    2017-01-21 20:33 (JST)

https://forums.zotero.org/discussion/64022/5-0-beta-generate-report-is-often-garbled

Records are being truncated, though I'm not sure why. But just read the input
stream into a string for now.


------

Fix error trying to generate report for many items

:commit:
    `9b247eb <https://github.com/Juris-M/zotero/commit/9b247ebba7cfb11e7b8547cff03a1be223414adc>`_
:author:
    Dan Stillman
:date:
    2017-01-21 17:38 (JST)

When adding many search conditions (e.g., when matching many items with the
`key` condition), the query can fail due to either the bound parameter limit or
the expression tree size limit.

To avoid this, add support for an 'inlineFilter' property on search conditions
when using the 'is' or 'isNot' operator. 'inlineFilter' is a function that
returns a quoted value suitable for direct embedding in the SQL statement, or
false if not valid. Multiple consecutive conditions for the same 'inlineFilter'
field are combined into an `IN (x, y, z)` condition.


------

Merge new English strings

:commit:
    `dcd1da7 <https://github.com/Juris-M/zotero/commit/dcd1da70af223f41aa1b827387d0cc69ef828e69>`_
:author:
    Dan Stillman
:date:
    2017-01-20 07:21 (JST)


------

"Import"/"Import from Clipboard" shortcut key changes

:commit:
    `cc51600 <https://github.com/Juris-M/zotero/commit/cc516005c01591661b5e744ce95d8d85fd1e96c4>`_
:author:
    Dan Stillman
:date:
    2017-01-20 05:20 (JST)

- Add Cmd/Ctrl-Shift-I for "Import…"
- Cmd/Ctrl-Shift-V apparently pastes without formatting, so don't override it.
  Instead, add a shortcut key to the menu option, defaulting to
  Cmd-Option-Shift-I/Ctrl-Alt-Shift-I
- The I in both is now localizable


------

Fix attachment content search

:commit:
    `362e18c <https://github.com/Juris-M/zotero/commit/362e18c7471fc15cf6c7a1f0e10f2bb04f8e5367>`_
:author:
    Dan Stillman
:date:
    2017-01-20 03:32 (JST)

And always convert ids from GROUP_CONCAT() to integers in search code.


------

Use Firefox 50.1.0 for Travis

:commit:
    `751ab9d <https://github.com/Juris-M/zotero/commit/751ab9df081b1c2010b0443fae227585e9dfdd08>`_
:author:
    Dan Stillman
:date:
    2017-01-20 02:38 (JST)


------

Fix #1157, Note content lost when typing during sync

:commit:
    `c95e422 <https://github.com/Juris-M/zotero/commit/c95e42240f8266df95a75c59ef8c0d0e72522af3>`_
:author:
    Dan Stillman
:date:
    2017-01-20 01:58 (JST)

Someday, I will say this is fixed and it actually will be fixed.


------

Update submodules

:commit:
    `e0d92ec <https://github.com/Juris-M/zotero/commit/e0d92ecd94e929f66800aa4fdfb4ed5ef612a010>`_
:author:
    Dan Stillman
:date:
    2017-01-19 19:48 (JST)


------

Skip a case of item selection during syncing

:commit:
    `318f665 <https://github.com/Juris-M/zotero/commit/318f6656f4c535c872382e8d3793a382291232ad>`_
:author:
    Dan Stillman
:date:
    2017-01-19 12:25 (JST)


------

Don't allow deleting libraries other than feeds with Cmd/Ctrl-Delete

:commit:
    `57b4428 <https://github.com/Juris-M/zotero/commit/57b44287f8c5f090b55ec4827de714fc3290549c>`_
:author:
    Dan Stillman
:date:
    2017-01-17 21:12 (JST)


------

Fix a couple issues with bundled file timestamps

:commit:
    `b62139e <https://github.com/Juris-M/zotero/commit/b62139ed0a66d29b5f648ecad595bb2154a7bd85>`_
:author:
    Dan Stillman
:date:
    2017-01-18 11:48 (JST)


------

Fix test for invalid id passed to DataObjects.getAsync()

:commit:
    `2237c71 <https://github.com/Juris-M/zotero/commit/2237c71dcbaf52b8b51543febe419ea2f88234bf>`_
:author:
    Dan Stillman
:date:
    2017-01-17 18:18 (JST)


------

Limit depth to 1 when outputting data objects

:commit:
    `33deefb <https://github.com/Juris-M/zotero/commit/33deefbf74dd96c082d0950c2f927a8befbe88fc>`_
:author:
    Dan Stillman
:date:
    2017-01-17 16:58 (JST)

This prevents descending into the global object cache that's accessible
from every data object.


------

Add Zotero.isClient

:commit:
    `1cf2585 <https://github.com/Juris-M/zotero/commit/1cf2585b41cf3550609bf977efd3aa2b5c98418d>`_
:author:
    Dan Stillman
:date:
    2017-01-17 16:58 (JST)

To replace Zotero.isStandalone


------

Add maxDepth as the third argument to Zotero.debug()

:commit:
    `786f5ef <https://github.com/Juris-M/zotero/commit/786f5efa3069c5274caf598eb3972a69c27ca79c>`_
:author:
    Dan Stillman
:date:
    2017-01-17 16:31 (JST)

varDump(), which is used by Zotero.debug(), defaults to 5


------

Fix Zotero.Date methods within translator sandbox

:commit:
    `a017fe6 <https://github.com/Juris-M/zotero/commit/a017fe6666eb870b622424731a98a2c13da462b5>`_
:author:
    Dan Stillman
:date:
    2017-01-17 16:23 (JST)

Only a few methods are imported, so some of the changes in 7bdcc17ed
have to be reverted.


------

Fix more info link in update prompt

:commit:
    `b00d136 <https://github.com/Juris-M/zotero/commit/b00d1366b00fecc4d656017b72b7e7011f152084>`_
:author:
    Dan Stillman
:date:
    2017-01-16 16:56 (JST)


------

Merge pull request #1156 from gracile-fr/master

:commit:
    `8a759dc <https://github.com/Juris-M/zotero/commit/8a759dcae360100d7ab8851a73c5e46191792fe9>`_
:author:
    Dan Stillman
:date:
    2017-01-17 15:33 (JST)

Amend short form of French months (continuing #64)

------

Amend short form of French months (continuing #64)

:commit:
    `695cb95 <https://github.com/Juris-M/zotero/commit/695cb9583aa1c5548ebd8e959ca2845884dba5fc>`_
:author:
    gracile-fr
:date:
    2017-01-16 23:54 (JST)

The Firefox French language pack contains some mistakes regarding
the short form of months. As a consequence, French month parsing
didn't work.

Please note that these values aren't even the correct abbreviations
but only the three or four first letters of the correct abbreviations.
See the French CSL locale for the correct abbreviations.


------

Fix error refreshing document with item replaced by merge

:commit:
    `aa78387 <https://github.com/Juris-M/zotero/commit/aa783878dee10ebb9f0649593ac52354d51947c7>`_
:author:
    Dan Stillman
:date:
    2017-01-16 06:47 (JST)


------

Update locales from Transifex

:commit:
    `3d83f5f <https://github.com/Juris-M/zotero/commit/3d83f5ff7009befa6ff71ea963d4e00c5b416bdb>`_
:author:
    Dan Stillman
:date:
    2017-01-16 05:45 (JST)


------

About pane updates

:commit:
    `e5ba761 <https://github.com/Juris-M/zotero/commit/e5ba7612bc1b8da7677fdafe7d13cb62549eebd7>`_
:author:
    Dan Stillman
:date:
    2017-01-16 05:19 (JST)

- Make version copyable
- Include "What's new" link to changelog
- Update some links and descriptions

To-do:

- Replace dev credits with a nice statement like in the Firefox About pane


------

Preload external abbreviations for quickCopy and bib export

:commit:
    `9d0be2b <https://github.com/Juris-M/zotero/commit/9d0be2be9dd52eca372d4da0ef7ee43563b2e900>`_
:author:
    fbennett
:date:
    2017-01-15 23:40 (JST)


------

Tidy up logfile chatter

:commit:
    `d9514c8 <https://github.com/Juris-M/zotero/commit/d9514c8ed0532cf2013bb7c02c38d3202679e236>`_
:author:
    fbennett
:date:
    2017-01-15 23:38 (JST)


------

Update citeproc-js to 1.1.145

:commit:
    `fdc19d0 <https://github.com/Juris-M/zotero/commit/fdc19d0cc21cfdc0fb159e4db56ae7ab382c29f2>`_
:author:
    fbennett
:date:
    2017-01-15 23:37 (JST)


------

Tidy up some install-time logfile chatter

:commit:
    `a6912c3 <https://github.com/Juris-M/zotero/commit/a6912c36ab20e74e95033ca1aae9d3e30cd456fa>`_
:author:
    fbennett
:date:
    2017-01-15 23:37 (JST)


------

Fix CSL Preview pane

:commit:
    `23f84d7 <https://github.com/Juris-M/zotero/commit/23f84d796fcf6b56d7c1cbb9221b1c4513499db5>`_
:author:
    Dan Stillman
:date:
    2017-01-15 16:46 (JST)

CSL Editor is being fixed in #1149


------

Fix debug output logging (broken by f44264cd4)

:commit:
    `008bcff <https://github.com/Juris-M/zotero/commit/008bcff8a0c2ba807cc6232b6f1115567eb59526>`_
:author:
    Dan Stillman
:date:
    2017-01-15 08:39 (JST)


------

Compatibility fixes for Bluebird >=3.4.2

:commit:
    `3d569f1 <https://github.com/Juris-M/zotero/commit/3d569f117326ab9bf880cfe877b83d4f1f0ad754>`_
:author:
    Dan Stillman
:date:
    2017-01-15 08:01 (JST)

Before 3.4.2, `yield` in a Bluebird `coroutine()` released Zalgo if an
already-resolved promise (e.g., from `Promise.resolve()`) was yielded,
continuing immediately instead of on the next turn of the event loop. We
apparently relied on that broken behavior in a few places, particularly from
`Zotero.DB.waitForTransaction()`. All the transaction-queueing stuff probably
needs to be reevaluated in general, but for now, mirror the previous possibly
ill-advised behavior by checking explicitly for a transaction before yielding
on `waitForTransaction()` (as well as the result of a 'load' event from
`libraryTreeView`).


------

Use coroutine() for Zotero.Schema::_updateSchema()

:commit:
    `7e30afb <https://github.com/Juris-M/zotero/commit/7e30afb2a56b8c4296548fd6782619ae0719c612>`_
:author:
    Dan Stillman
:date:
    2017-01-14 11:16 (JST)


------

Throw clearer error if invalid type is passed to File.getContentsAsync()

:commit:
    `56d9372 <https://github.com/Juris-M/zotero/commit/56d937214611642f9ff176ea99b9c925ea2386ea>`_
:author:
    Dan Stillman
:date:
    2017-01-13 20:51 (JST)


------

Fix passing file: URI to Zotero.File.getContentsAsync()

:commit:
    `f2440eb <https://github.com/Juris-M/zotero/commit/f2440eb826d103f50a62ee8b8152f34a1328b524>`_
:author:
    Dan Stillman
:date:
    2017-01-13 20:48 (JST)


------

Add HTML-based console viewer for easier real-time debug output

:commit:
    `f44264c <https://github.com/Juris-M/zotero/commit/f44264cd4d757c46f4177e537f454d066a4272f1>`_
:author:
    Dan Stillman
:date:
    2017-01-15 07:03 (JST)

Since 1) debug output logging via the prefs isn't necessarily possible
for startup errors in Standalone, 2) real-time output is prohibitively
slow and has a miniscule scrollback buffer on Windows unless you use a
Cygwin or Git terminal, and 3) copying/pasting/emailing was annoying
anyway, make -ZoteroDebug open a popup window that shows errors and
debug output and allows submitting straight to the server with a Debug
ID.

This should replace the existing debug output viewer as well, but that's
less of a priority.

-ZoteroDebugText or the debug.log pref can still be used to dump to the
terminal.


------

Update Bluebird to 3.4.7

:commit:
    `9c0befc <https://github.com/Juris-M/zotero/commit/9c0befceeb2dfd10154b0cb6498dfd2b8f308b16>`_
:author:
    Dan Stillman
:date:
    2017-01-13 16:03 (JST)


------

Don't connect to streaming server until UI is ready

:commit:
    `12de046 <https://github.com/Juris-M/zotero/commit/12de04607b658dc0759bfd1cdbf23fdea591683c>`_
:author:
    Dan Stillman
:date:
    2017-01-13 15:42 (JST)


------

Fix startup error loading Zotero service

:commit:
    `bc03408 <https://github.com/Juris-M/zotero/commit/bc034089a6b668111c96cba89648cb47c97b6b8e>`_
:author:
    Dan Stillman
:date:
    2017-01-13 16:36 (JST)

https://forums.zotero.org/discussion/63869/5-0-beta-standalone-blank-ui-upon-restart
https://forums.zotero.org/discussion/63865/5-0-beta-library-wont-load

Adding include.js to hiddenWindow.xul in 66549f9e6d seems to have
created a race condition in which the Zotero service would fail on the
third startup after the JS cache was cleared (e.g., on a new version,
-purgecaches, or other changes in the profile). So, don't do that.

Hopefully this isn't caused by other uses (e.g., in plugins) of
include.js and was only happening because the hidden window is launched
concurrently with standalone.xul on macOS.


------

Don't focus note editor when pressing Shift-Tab on note in middle pane

:commit:
    `2011a61 <https://github.com/Juris-M/zotero/commit/2011a6122325bf9ae29cf3b3f9380feddba62e97>`_
:author:
    Dan Stillman
:date:
    2017-01-12 16:38 (JST)

Reverts redundant code from 7e39e4608 (#1136) and fixes the much earlier
9d7cc849 (#151)


------

Expand draggable area of splitters on macOS while preserving 1px width

:commit:
    `740795f <https://github.com/Juris-M/zotero/commit/740795f24935eadf45dbe058cd204679b974e7df>`_
:author:
    Dan Stillman
:date:
    2017-01-12 16:16 (JST)

(Borrowing a technique from Thunderbird.)

This only affects the splitters in standard view. The splitter between the top
and bottom panes in stacked view still has a 1px draggable area.

We can probably do a similar thing to slim down splitters on Windows, as
planned in #367.


------

Fix opening preferences (broken in cbcfb6b92)

:commit:
    `66549f9 <https://github.com/Juris-M/zotero/commit/66549f9e6db495ecfc3794e5420274eec1339a87>`_
:author:
    Dan Stillman
:date:
    2017-01-11 20:23 (JST)


------

Move feeds below groups

:commit:
    `cf2318e <https://github.com/Juris-M/zotero/commit/cf2318ec5a185858f9479e04beda595170569776>`_
:author:
    Dan Stillman
:date:
    2017-01-11 13:53 (JST)


------

Fix missing Options menu on Windows/Linux

:commit:
    `cbcfb6b <https://github.com/Juris-M/zotero/commit/cbcfb6b92ea6a435c9b601aafd8c66a5cb19b152>`_
:author:
    Dan Stillman
:date:
    2017-01-11 11:26 (JST)


------

Default to creatorType: "author" if missing

:commit:
    `c631bc4 <https://github.com/Juris-M/zotero/commit/c631bc4257e18cf0922a9cebe9460bcf3cd99860>`_
:author:
    Dan Stillman
:date:
    2017-01-11 08:01 (JST)

Apparently in 4.0 we defaulted to 'author' if a creatorType wasn't
passed. To avoid lots of errors like the one fixed in
https://github.com/zotero/translators/commit/dd0094893af003b8f545bfae1ec440fc4199c261,
add a similar fallback for 5.0 and log a warning (though not with the
translator name, unfortunately).


------

Update submodules

:commit:
    `97f5c41 <https://github.com/Juris-M/zotero/commit/97f5c41aff546ce9df71bfd7af9f3e33cbad79f0>`_
:author:
    Dan Stillman
:date:
    2017-01-10 15:57 (JST)


------

Update locales from Transifex

:commit:
    `fb7592b <https://github.com/Juris-M/zotero/commit/fb7592bb53fd31fdbd406ce3b1ad54d7c0e15ba6>`_
:author:
    Dan Stillman
:date:
    2017-01-09 18:53 (JST)


------

Fix #64, Non-English month parsing doesn't work in Standalone

:commit:
    `ef1ff8b <https://github.com/Juris-M/zotero/commit/ef1ff8bc42f4ba1f5a8866547e289f1b7b146eb5>`_
:author:
    Dan Stillman
:date:
    2017-01-09 18:21 (JST)

Month values from the Firefox language packs are included in a
JSON file used by `Zotero.Date.getMonths()`. `getMonths(true)` includes
English months as well.

The JSON file should be bundled with the connectors as well, and
Zotero.Date.init() should be updated to populate the month data from
that.


------

Convert some private Zotero.Date methods to privileged

:commit:
    `7bdcc17 <https://github.com/Juris-M/zotero/commit/7bdcc17ed00633c55db98a9419dd735255be5309>`_
:author:
    Dan Stillman
:date:
    2017-01-09 18:20 (JST)


------

Update Edit menu strings in non-English locales

:commit:
    `9fbdc77 <https://github.com/Juris-M/zotero/commit/9fbdc77cac8cf82ed0de435b90ff9625a2d336b4>`_
:author:
    Dan Stillman
:date:
    2017-01-07 19:32 (JST)

Remove localizations in standalone.dtd and replace with editMenuOverlay.dtd
files from the Mozilla language packs

Also remove some other unused strings


------

Fix localization of Edit menu

:commit:
    `5dbe677 <https://github.com/Juris-M/zotero/commit/5dbe677f251bc6114ab926698e844aaeeaec4293>`_
:author:
    Dan Stillman
:date:
    2017-01-07 15:01 (JST)


------

Merge pull request #1148

:commit:
    `7444e63 <https://github.com/Juris-M/zotero/commit/7444e6304754790d9e2cd02e03b4b8fa174d7d3e>`_
:author:
    Dan Stillman
:date:
    2017-01-09 14:11 (JST)

Remove tmp-* directories when attachment download fails. Closes #1128

Closes #1148


------

Remove tmp-* directories when attachment download fails. Closes #1128

:commit:
    `74d358b <https://github.com/Juris-M/zotero/commit/74d358bd1932e5dafb51b4ac2d08b5c1eba4dc52>`_
:author:
    Adomas Venčkauskas
:date:
    2017-01-07 00:06 (JST)


------

Run generateBibliography of csledit as an iterator, add abbrev preload support

:commit:
    `1a64f0e <https://github.com/Juris-M/zotero/commit/1a64f0eb16cbf334ad64d98cfd5c1a0b9329ad42>`_
:author:
    fbennett
:date:
    2017-01-09 13:48 (JST)


------

Merge branch 'jurism-5.0-dev' into jurism-5.0

:commit:
    `d053824 <https://github.com/Juris-M/zotero/commit/d0538240af25d178ebb928a1a2e4ead4fd1173b3>`_
:author:
    fbennett
:date:
    2017-01-09 13:34 (JST)


------

Let AbbrevsFilter manage itself

:commit:
    `8d3ec05 <https://github.com/Juris-M/zotero/commit/8d3ec05d48cdf8c34a2d9b0dbb31d35a8dc3700c>`_
:author:
    fbennett
:date:
    2017-01-09 13:31 (JST)


------

Update processor to 1.1.144

:commit:
    `7427823 <https://github.com/Juris-M/zotero/commit/742782336b9bac1234ce47ba671b9ee4d46a8439>`_
:author:
    fbennett
:date:
    2017-01-09 13:28 (JST)


------

Only set browser.dom.window.dump.enabled in client

:commit:
    `43dad62 <https://github.com/Juris-M/zotero/commit/43dad62150251d567f9876bda5382080e36a9e21>`_
:author:
    Dan Stillman
:date:
    2017-01-08 07:41 (JST)


------

Fix non-standard syntax

:commit:
    `abd3054 <https://github.com/Juris-M/zotero/commit/abd305430873a48a4526582b190b001925f8f0fe>`_
:author:
    Tom Najdek
:date:
    2017-01-06 23:37 (JST)


------

Use sorted array of visible styles in csledit

:commit:
    `2ac05b7 <https://github.com/Juris-M/zotero/commit/2ac05b7f01becf0e66a97529292b76db86da6564>`_
:author:
    fbennett
:date:
    2017-01-07 12:12 (JST)


------

Update locales from upstream master

:commit:
    `db66c57 <https://github.com/Juris-M/zotero/commit/db66c575c7c642a0faca8cdf4fdce7718651464b>`_
:author:
    fbennett
:date:
    2017-01-07 11:43 (JST)


------

Merge changes from upstream master

:commit:
    `dbc4230 <https://github.com/Juris-M/zotero/commit/dbc4230284bc75cf0bef65bbaa22bd99c7d4599b>`_
:author:
    fbennett
:date:
    2017-01-07 11:39 (JST)


------

Update submodules

:commit:
    `1b3dfe1 <https://github.com/Juris-M/zotero/commit/1b3dfe1aeabd9bc60a736fa6dfe050adcaf2c8e5>`_
:author:
    Dan Stillman
:date:
    2017-01-06 17:43 (JST)


------

Update locales from Transifex

:commit:
    `eba7239 <https://github.com/Juris-M/zotero/commit/eba72399c1b016e38a4143b815bfc8685063f158>`_
:author:
    Dan Stillman
:date:
    2017-01-06 17:42 (JST)


------

Remove use of deprecated Date.toLocaleFormat

:commit:
    `2682d01 <https://github.com/Juris-M/zotero/commit/2682d010167ce9c37afd80da43b35da2d1269f99>`_
:author:
    Adomas Venčkauskas
:date:
    2017-01-06 16:58 (JST)


------

Merge pull request #1144

:commit:
    `231a276 <https://github.com/Juris-M/zotero/commit/231a276b0626b3e8c373c4b8d652c63f684205b4>`_
:author:
    Dan Stillman
:date:
    2017-01-05 13:40 (JST)

Preserve format tags and entities in bibliography editor

Closes #1144


------

Preserve formatting on Hide/Show editor

:commit:
    `4d8d4bc <https://github.com/Juris-M/zotero/commit/4d8d4bcdbcfb2c97658c5e2e74c710a909e80260>`_
:author:
    fbennett
:date:
    2017-01-05 09:57 (JST)


------

Accept variations in spacing, and single-quoted XML serialization

:commit:
    `2538e25 <https://github.com/Juris-M/zotero/commit/2538e258b65354024cfb79181ba7edfd15611432>`_
:author:
    fbennett
:date:
    2017-01-04 21:34 (JST)


------

Preserve format tags and entities in bibliography editor - Fixes errors in previous commits 55bfe54a and 9431e0de, to wit ... - Apply unescapeHTML after RTF tag and entity conversions - Remove high-bit character escape from entity converter,   and apply separately after remaining HTML entities are   decoded by unescapeHTML

:commit:
    `2a2e5e4 <https://github.com/Juris-M/zotero/commit/2a2e5e4e395895d132596cea21ed41266d04455f>`_
:author:
    fbennett
:date:
    2017-01-04 11:08 (JST)


------

Allow showing the Tools -> Error Console menu option via a pref

:commit:
    `53d2aa4 <https://github.com/Juris-M/zotero/commit/53d2aa43d6ac8d19452ce0d7ebfb34b00f5ee693>`_
:author:
    Dan Stillman
:date:
    2017-01-05 09:14 (JST)

If devtools.errorconsole.enabled is true, the option will be shown.


------

Set browser.dom.window.dump.enabled to true if debug output enabled

:commit:
    `56b6a0d <https://github.com/Juris-M/zotero/commit/56b6a0d02149c548284178cde5017bde93cd4401>`_
:author:
    Dan Stillman
:date:
    2017-01-05 07:28 (JST)

dump() works regardless within XPCOM (which is how Zotero.debug()
works), but not on window objects without this pref


------

Allow setting global prefs from Zotero.Prefs.set()

:commit:
    `612066d <https://github.com/Juris-M/zotero/commit/612066d7496850db7a416a6c024e0c6bc11247b5>`_
:author:
    Dan Stillman
:date:
    2017-01-05 07:28 (JST)

Pass true as third argument


------

Don't leave document corrupted if error in doc prefs window

:commit:
    `42a72fe <https://github.com/Juris-M/zotero/commit/42a72fe8aafc86668a6d3765f0557f96d5cd14ef>`_
:author:
    Dan Stillman
:date:
    2017-01-04 15:39 (JST)

And recover by showing the doc prefs window if it is corrupted (at least
with an empty fieldType, which is what was happening previously)


------

Merge from upstream 5.0

:commit:
    `94c3754 <https://github.com/Juris-M/zotero/commit/94c3754af08817cee8b0e140322483e541f5bc7a>`_
:author:
    fbennett
:date:
    2017-01-04 06:28 (JST)


------

Increase DB timeout to 30 seconds

:commit:
    `4ff5323 <https://github.com/Juris-M/zotero/commit/4ff5323acd156cfbbe9fe99bbdafa157b0c2dff3>`_
:author:
    Dan Stillman
:date:
    2017-01-04 05:50 (JST)

Though it would be real nice to avoid situations where this might be necessary


------

Make itemPane white on linux

:commit:
    `1756b8d <https://github.com/Juris-M/zotero/commit/1756b8d242eb49793154c4061f6881dda4dcbaa4>`_
:author:
    Adomas Venčkauskas
:date:
    2017-01-04 01:25 (JST)


------

Fix black tab borders on Standalone (regression 53d1bca36)

:commit:
    `ac959dd <https://github.com/Juris-M/zotero/commit/ac959dd6b566a80da39b5b6925fc172006dd9a30>`_
:author:
    Adomas Venčkauskas
:date:
    2017-01-04 02:13 (JST)

It appears we do not have ThreeDHighlight in Standalone.
Relevant bug https://bugzilla.mozilla.org/show_bug.cgi?id=1261068


------

Fixes a few UI styling issues for Ubuntu 16.10 (GTK 3.20)

:commit:
    `53d1bca <https://github.com/Juris-M/zotero/commit/53d1bca36fa8b1aaf34dd285de3fb487a629a442>`_
:author:
    Adomas Venčkauskas
:date:
    2017-01-04 00:51 (JST)

- Tabs missing styling
- Preferences: Notes font menulist dropmarker missing (left border still
  missing, could not find any CSS to help that out)
- Preferences: Numberbox background gray

For the tabs styling issue see
https://bugzilla.mozilla.org/show_bug.cgi?id=1306425


------

Remove lines in treeview separators

:commit:
    `98ab5ac <https://github.com/Juris-M/zotero/commit/98ab5ac8bfc1cae1d635a41cf50f51211c73a503>`_
:author:
    Dan Stillman
:date:
    2017-01-03 20:14 (JST)

Not ideal -- we can't reduce the height of separators, so there's too much
padding between sections -- but still better (and way better on Linux, where a
thick black line was being drawn instead of the light dashes on macOS).


------

Fix hang on sync restart

:commit:
    `6096d1e <https://github.com/Juris-M/zotero/commit/6096d1ea62c6462ad02d4614792f84f5c525d2ba>`_
:author:
    Dan Stillman
:date:
    2017-01-03 18:40 (JST)


------

Use Zotero.DBConnection instance everywhere instead of Zotero.DB

:commit:
    `5d67656 <https://github.com/Juris-M/zotero/commit/5d67656ea8cad4b1c7d08866ed659162590b9fb1>`_
:author:
    Dan Stillman
:date:
    2017-01-03 18:21 (JST)

Fixes #1141


------

Mark style load failures

:commit:
    `83692b4 <https://github.com/Juris-M/zotero/commit/83692b4369350058f57127d5ab820ea8aab88767>`_
:author:
    fbennett
:date:
    2017-01-03 10:19 (JST)


------

Fix pressing "-" and "+" buttons in Styles pane from keyboard

:commit:
    `5523dd5 <https://github.com/Juris-M/zotero/commit/5523dd5c37f26ff66926cef883bf158119dde9fd>`_
:author:
    Dan Stillman
:date:
    2016-12-30 15:22 (JST)


------

Allow direct install from styles page in viewer

:commit:
    `0757109 <https://github.com/Juris-M/zotero/commit/0757109c16307076ab53372f506007c3f16b7a08>`_
:author:
    Dan Stillman
:date:
    2016-12-30 15:00 (JST)

When "Get Additional Styles…" is clicked, open a stripped-down version
of the Zotero styles page in a window. When a style is clicked on,
install it and close the window.

I'm going to say that this closes #767, but as Aurimas notes there, if
you know the style you're looking for, being able to just type the name
in a dialog would be faster, so further improvements could be made. But
as it stands, this is much better than clicking through to a browser
(and hoping that it's one with the new connector with style installation
support).


------

Allow Cmd-R/Ctrl-R to reload page in basic viewer

:commit:
    `c21d6c9 <https://github.com/Juris-M/zotero/commit/c21d6c9700d4e95aad516171324b7ffd1ddb0e78>`_
:author:
    Dan Stillman
:date:
    2016-12-30 14:58 (JST)


------

Move ZoteroStandalone.openInViewer() to Zotero.openInViewer()

:commit:
    `fb7f969 <https://github.com/Juris-M/zotero/commit/fb7f9698d36043610fde058e5ebbd214ca5421ca>`_
:author:
    Dan Stillman
:date:
    2016-12-30 14:56 (JST)


------

Update some deprecated function calls

:commit:
    `a076edc <https://github.com/Juris-M/zotero/commit/a076edc8361ff955311edcb075a15c69b05bca3e>`_
:author:
    Dan Stillman
:date:
    2016-12-30 05:39 (JST)


------

Push-based sync triggering

:commit:
    `2beb2c5 <https://github.com/Juris-M/zotero/commit/2beb2c514c0ba344a59856bf785728b631730a60>`_
:author:
    Dan Stillman
:date:
    2016-12-30 11:24 (JST)

Immediate sync triggering on remote library change using WebSocket API.
Currently kicks off a normal sync process for the modified library --
actual object data isn't pushed.

(This might not stay enabled for 5.0 Final.)


------

Fix New Item MRU list, which apparently has only ever updated on startup

:commit:
    `7fd3a8c <https://github.com/Juris-M/zotero/commit/7fd3a8c5d11db69f74434eade403e8aaaa1c6d78>`_
:author:
    Dan Stillman
:date:
    2016-12-29 21:01 (JST)


------

Reduce initial visible creators to 5-7 (from 10-15)

:commit:
    `8a9986d <https://github.com/Juris-M/zotero/commit/8a9986da475f4f50c21cd5cc2e56530fd51a6c95>`_
:author:
    Dan Stillman
:date:
    2016-12-29 17:57 (JST)


------

Add option to Zotero.Utilities.ellipsize() to truncate at word boundary

:commit:
    `9ffab20 <https://github.com/Juris-M/zotero/commit/9ffab20a0951dad9c585fed39109c673a4ae47cb>`_
:author:
    Dan Stillman
:date:
    2016-12-28 13:54 (JST)


------

Fix right alignment of search bar

:commit:
    `516fedc <https://github.com/Juris-M/zotero/commit/516fedc2fe731c302b2d72c3df6d1f28f2b098b3>`_
:author:
    Dan Stillman
:date:
    2016-12-28 03:52 (JST)


------

Item pane tweaks

:commit:
    `c0f40fa <https://github.com/Juris-M/zotero/commit/c0f40fac81ef895cf909d6fa93e839bd68f3ee14>`_
:author:
    Dan Stillman
:date:
    2016-12-28 03:49 (JST)

- Remove colons after labels
- Non-bold labels
- More padding at top of pane
- Increase space between label and field


------

Hide Actions menu in Standalone

:commit:
    `82292ee <https://github.com/Juris-M/zotero/commit/82292eef77701c5f6eb19ec4b65aee0e7ebdbf30>`_
:author:
    Dan Stillman
:date:
    2016-12-28 02:38 (JST)

Leave it in place in Firefox for now for development


------

Fix dragging external files onto library root

:commit:
    `e282a56 <https://github.com/Juris-M/zotero/commit/e282a5643f86047e57272d09a3382c8af5ae458f>`_
:author:
    Dan Stillman
:date:
    2016-12-27 17:11 (JST)


------

Make Zotero.Translator shareable with connector

:commit:
    `b01487d <https://github.com/Juris-M/zotero/commit/b01487dccc080b7de026417c4ca5ba11e62ea0ea>`_
:author:
    Adomas Venčkauskas
:date:
    2016-12-29 00:25 (JST)


------

Update French locale from Transifex

:commit:
    `eeee937 <https://github.com/Juris-M/zotero/commit/eeee937310a83919b11e734e5b39b00e63483f95>`_
:author:
    Dan Stillman
:date:
    2016-12-27 09:18 (JST)


------

Fix selecting item and scrolling into view when editing a citation

:commit:
    `4a765aa <https://github.com/Juris-M/zotero/commit/4a765aacfa20cb5d07e2d9b9db81c0385140ed0d>`_
:author:
    Dan Stillman
:date:
    2016-12-27 08:50 (JST)


------

Add collectionTreeView::selectItem()

:commit:
    `5100cd3 <https://github.com/Juris-M/zotero/commit/5100cd31edd6041bbb2ef95ecf4cb783c8d08a9e>`_
:author:
    Dan Stillman
:date:
    2016-12-27 08:44 (JST)

This moves most selection logic from ZoteroPane.selectItem() into
collectionTreeView::selectItem() so that it can be used in the
edit-citation dialog.

Unlike itemTreeView::selectItem(), which only selects within a given
items tree, this function automatically switches to a library root if
necessary. ZoteroPane.selectItem() remains and does a little bit extra
(unminimizing Zotero, focusing the items pane) in addition to calling
collectionTreeView::selectItem().


------

Fix file handling when Zotero is launched from close on Windows

:commit:
    `99152d7 <https://github.com/Juris-M/zotero/commit/99152d78e5cb1d6d4be2ea2bf0b6acc77ce88545>`_
:author:
    Dan Stillman
:date:
    2016-12-27 07:09 (JST)

When opening CSL, BibTeX, etc.


------

Object.values() polyfill for <Fx47 after 269e2f8b

:commit:
    `437c55b <https://github.com/Juris-M/zotero/commit/437c55b286a2aa841fa4804c806d71fe7e61c325>`_
:author:
    Dan Stillman
:date:
    2016-12-27 05:17 (JST)

Zotero for Windows is still built with Fx45, so we need a polyfill for
Object.values().


------

Keep TinyMCE dialogs within frame

:commit:
    `044ecf2 <https://github.com/Juris-M/zotero/commit/044ecf21577e65563e3abfd9602d20d2f462d535>`_
:author:
    Dan Stillman
:date:
    2016-12-27 03:05 (JST)

This isn't ideal, but it mostly works, and keeps the dialogs vertically
(if not horizontally) moveable. It would be nice if the dialogs
automatically flowed to the available width.

This could be turned off in standalone note windows above a certain
width.


------

Fix newlines in note HTML files

:commit:
    `6ec2f9a <https://github.com/Juris-M/zotero/commit/6ec2f9aaf9637bb6d427fcf7ad7551dff3e8066b>`_
:author:
    Dan Stillman
:date:
    2016-12-27 01:27 (JST)


------

Prevent data loss if objects change locally during sync upload

:commit:
    `6d1946e <https://github.com/Juris-M/zotero/commit/6d1946ee0a338110ac885414394cec15ab02abe7>`_
:author:
    Dan Stillman
:date:
    2016-12-25 07:55 (JST)

If an object was uploaded but was changed locally during the upload (e.g., the
user typing in a note), the local changes would be lost when the remotely saved
version was applied. Instead, watch for modifications to objects during the
upload and don't apply the remote versions of those objects or mark them as
synced.


------

Widen style dropdown in note editor to accommodate other languages

:commit:
    `e75827b <https://github.com/Juris-M/zotero/commit/e75827bf28519f8fbfbb442874590d99a9004806>`_
:author:
    Dan Stillman
:date:
    2016-12-26 17:15 (JST)


------

Localize TinyMCE

:commit:
    `6c260bc <https://github.com/Juris-M/zotero/commit/6c260bc9c9fab14e504284097902ca80981841c9>`_
:author:
    Dan Stillman
:date:
    2016-12-26 17:12 (JST)

Automatically use a language pack for the current locale if one is
available


------

Add a notifier event for sync start

:commit:
    `8af73f9 <https://github.com/Juris-M/zotero/commit/8af73f9983a13aa8e64620b037a0ff159934df55>`_
:author:
    Dan Stillman
:date:
    2016-12-25 08:01 (JST)


------

Fix error adding top-level attachments in collections

:commit:
    `0a2330b <https://github.com/Juris-M/zotero/commit/0a2330b79f4794fa24e84bb7ff801459b0c91b6f>`_
:author:
    Dan Stillman
:date:
    2016-12-26 01:48 (JST)


------

Fix alignment of "Format" in export dialog

:commit:
    `653f26d <https://github.com/Juris-M/zotero/commit/653f26d4fb46a47d932acef6c7435ddc10683048>`_
:author:
    Dan Stillman
:date:
    2016-12-24 01:07 (JST)


------

Increase default note font size to 12

:commit:
    `d7809d6 <https://github.com/Juris-M/zotero/commit/d7809d6c1f2726f92b0f52810045ef9fe12e46ea>`_
:author:
    Dan Stillman
:date:
    2016-12-26 13:11 (JST)


------

Upgrade to TinyMCE 4.5.1

:commit:
    `dc04a12 <https://github.com/Juris-M/zotero/commit/dc04a1231cad3b8e092d963c53fc926b3fdf315d>`_
:author:
    Dan Stillman
:date:
    2016-12-26 13:03 (JST)

- New flat theme (with padding tightened a bit from the default to fit
  in right-hand pane)
- Adds search/replace within notes
- Adds URL autolinking
- Image pasting/dragging is now properly disallowed (though TinyMCE 4
  has hooks that may allow us to actually support this by automatically
  creating attachments)
- New blockquote style with color bar
- Replaces custom context menu on link click with built-in version

 To-do:

- Fix display of pop-ups, which are now modal dialogs within the note
  frame instead of pop-up windows, to stay fully within the frame
- Localize (more important now that there are tooltips)
- Support image dragging
- Update elements list for HTML5, for better drag-and-drop?
- Move directionality control to context menu instead of taking up
  toolbar space?
- Evaluate other plugins for potential inclusion
- Show additional controls in separate note window?
- Fix opacity of text in tooltips

Closes #451, closes #421


------

Fix "Reset File Sync History"

:commit:
    `ab959cd <https://github.com/Juris-M/zotero/commit/ab959cd85865c3fc31baff0996bb54318d10af15>`_
:author:
    Dan Stillman
:date:
    2016-12-23 00:00 (JST)


------

Don't start auto-sync until UI is ready

:commit:
    `cf686c5 <https://github.com/Juris-M/zotero/commit/cf686c520afee814604fa6102d7ecdec3b4a120c>`_
:author:
    Dan Stillman
:date:
    2016-12-22 20:58 (JST)


------

Apply UI font size change immediately

:commit:
    `bd95012 <https://github.com/Juris-M/zotero/commit/bd9501218edda493dfbbd353eb4ce4367275f2d3>`_
:author:
    Dan Stillman
:date:
    2016-12-22 20:31 (JST)

And change "Changes take effect in new windows" to "Changes take effect
after restart"

(The note font size still requires a restart, as do the shortcut keys in
the Advaned pane.)


------

Add a friendlier GET request message for /connector/ping

:commit:
    `bd943ff <https://github.com/Juris-M/zotero/commit/bd943ffe85a08f448e39a02b4983add570b81ebb>`_
:author:
    Adomas Venčkauskas
:date:
    2016-12-22 20:14 (JST)


------

Show stack for more startup errors

:commit:
    `455f23d <https://github.com/Juris-M/zotero/commit/455f23df4b769827101f4022892251a767d5e310>`_
:author:
    Dan Stillman
:date:
    2016-12-21 22:30 (JST)


------

Set API URL via pref for download-on-demand test

:commit:
    `a9a54ed <https://github.com/Juris-M/zotero/commit/a9a54ed21cdb22d72ffb5b4470bbc6af01fb3497>`_
:author:
    Dan Stillman
:date:
    2016-12-21 22:23 (JST)


------

Merge pull request #1111

:commit:
    `36b6722 <https://github.com/Juris-M/zotero/commit/36b6722c5ca4274e21c7679aad83be3d660a471b>`_
:author:
    Dan Stillman
:date:
    2016-12-21 22:07 (JST)

Remove occurrences of legacy/non-standard/non-strict js syntax

Closes #1111


------

Remove use of syntax where curly brackets are omitted in function defs

:commit:
    `d4dc86c <https://github.com/Juris-M/zotero/commit/d4dc86c975ac63cd725258c25f2033ec1414b75d>`_
:author:
    Tom Najdek
:date:
    2016-10-16 04:20 (JST)


------

Remove non-standard syntax for conditional exception handling

:commit:
    `54a2126 <https://github.com/Juris-M/zotero/commit/54a2126b7d64d348ea92aff13bbedb8ea2122b32>`_
:author:
    Tom Najdek
:date:
    2016-10-15 01:24 (JST)


------

Remove use of non-standard list comprehension syntax

:commit:
    `39bc539 <https://github.com/Juris-M/zotero/commit/39bc5398c900c3529784be067c85d280d219447e>`_
:author:
    Tom Najdek
:date:
    2016-10-16 23:24 (JST)


------

Fix non-strict syntax for octal number literals

:commit:
    `03b1b75 <https://github.com/Juris-M/zotero/commit/03b1b75bfbb36937dcd3618e75cb5f2715df6fed>`_
:author:
    Tom Najdek
:date:
    2016-10-16 10:03 (JST)


------

Replace legacy syntax for each...in with for...of

:commit:
    `269e2f8 <https://github.com/Juris-M/zotero/commit/269e2f8bff3eaf6d2257b06bdc80f7b2949766f6>`_
:author:
    Tom Najdek
:date:
    2016-10-18 21:20 (JST)


------

Closes #974, Unreachable code after return statement

:commit:
    `b445283 <https://github.com/Juris-M/zotero/commit/b445283f4ec469d8b39de58542a5f2787008dfa4>`_
:author:
    Dan Stillman
:date:
    2016-12-21 21:48 (JST)


------

Limit Travis to Fx version used for Standalone

:commit:
    `9b1b360 <https://github.com/Juris-M/zotero/commit/9b1b360a7228fcf85d18f50ec80c774b14103aed>`_
:author:
    Dan Stillman
:date:
    2016-12-21 21:36 (JST)


------

Focus note editor when pressing Tab is pressed on note in middle pane

:commit:
    `7e39e46 <https://github.com/Juris-M/zotero/commit/7e39e460858561a62c4637e772c298dd3e24b675>`_
:author:
    Dan Stillman
:date:
    2016-12-21 20:13 (JST)

Closes #1136


------

Make API server configurable with extensions.zotero.api.url

:commit:
    `084f5a7 <https://github.com/Juris-M/zotero/commit/084f5a72df24912820724e8fe46b39b837deb554>`_
:author:
    Dan Stillman
:date:
    2016-12-21 19:52 (JST)

Needless to say, use of this pref is unsupported.

Closes #901


------

Fix Travis failure after skipped test

:commit:
    `205bab7 <https://github.com/Juris-M/zotero/commit/205bab7b89886eeaa77431d67f8aa1f06ec1a8ca>`_
:author:
    Dan Stillman
:date:
    2016-12-21 19:28 (JST)

Apparently after() is run even if a test is skipped


------

Remove tab mode

:commit:
    `3b6b6aa <https://github.com/Juris-M/zotero/commit/3b6b6aa36bda22e10c925d46a7af872bea126a70>`_
:author:
    Dan Stillman
:date:
    2016-12-21 19:01 (JST)

Closes #1135


------

Disable connector switching

:commit:
    `405f41f <https://github.com/Juris-M/zotero/commit/405f41f4c246b1897e2be01567a2f579e780315a>`_
:author:
    Dan Stillman
:date:
    2016-12-21 18:42 (JST)

And so it begins...

Closes #1134


------

Fix connector translator caching from repo and standalone

:commit:
    `8e083c6 <https://github.com/Juris-M/zotero/commit/8e083c688a32d64fbba8a48e58fbc2fcccfe1be1>`_
:author:
    Adomas Venčkauskas
:date:
    2016-12-19 18:38 (JST)


------

Better error logging for https://forums.zotero.org/discussion/63029/

:commit:
    `2f65c7d <https://github.com/Juris-M/zotero/commit/2f65c7d29c08cf41c261e1219d57f57001a5f07d>`_
:author:
    Dan Stillman
:date:
    2016-12-20 17:33 (JST)


------

Remove sync server URL

:commit:
    `0f89d4d <https://github.com/Juris-M/zotero/commit/0f89d4d7f505f488f81500576e8b4923492c6751>`_
:author:
    Dan Stillman
:date:
    2016-12-20 04:39 (JST)


------

Fix for child attachments being saved if prefs off (from 8c2c097c6)

:commit:
    `c103595 <https://github.com/Juris-M/zotero/commit/c1035958d44cb32e1ce505b4868d451645e87de3>`_
:author:
    Dan Stillman
:date:
    2016-12-19 18:19 (JST)


------

Disable all recognizePDF tests in Travis

:commit:
    `4b602ed <https://github.com/Juris-M/zotero/commit/4b602ed26c127c7fc182d26a3bad81470f6b2c3c>`_
:author:
    Dan Stillman
:date:
    2016-12-18 23:18 (JST)


------

Fix attachment handling during translation

:commit:
    `8c2c097 <https://github.com/Juris-M/zotero/commit/8c2c097c6b2ecc03be1784fda8f7433159d56628>`_
:author:
    Dan Stillman
:date:
    2016-12-18 23:05 (JST)

Synchronously determine whether attachment saving should be attempted and only
start attachment progress if it can


------

Update locales from Transifex

:commit:
    `d19d90a <https://github.com/Juris-M/zotero/commit/d19d90a33c24ba7daa82eed83e0afafe980e1456>`_
:author:
    Dan Stillman
:date:
    2016-12-17 23:00 (JST)


------

Tweak recognizePDF fix, add test coverage, and enable manual tests

:commit:
    `6994c63 <https://github.com/Juris-M/zotero/commit/6994c63a0eb1d00f66d3d67606af53dcae1106ef>`_
:author:
    Dan Stillman
:date:
    2016-12-17 22:01 (JST)

Still disabled in Travis until we mock the remote services


------

Prompt to try manual data dir migration again if Firefox is open

:commit:
    `e34bf4d <https://github.com/Juris-M/zotero/commit/e34bf4d5cbb794f12fbeb05f4316576283583c7a>`_
:author:
    Dan Stillman
:date:
    2016-12-17 21:42 (JST)


------

Fix PDF metadata retrieval after 78b1d2ee35

:commit:
    `6b0e3ac <https://github.com/Juris-M/zotero/commit/6b0e3ac2d27ce8c19f988bd75b62df68c5becb54>`_
:author:
    Dan Stillman
:date:
    2016-12-17 20:17 (JST)


------

Add option to check for updates on Standalone startup error

:commit:
    `bba874a <https://github.com/Juris-M/zotero/commit/bba874aa180c7279b5eba66004ece6da7aef2278>`_
:author:
    Dan Stillman
:date:
    2016-12-16 19:59 (JST)

I think we might have come to regret not having this.


------

Add -s flag to runtests.sh to start at given file

:commit:
    `238ab80 <https://github.com/Juris-M/zotero/commit/238ab8069938b45e2baf826c75f1b116ab52a712>`_
:author:
    Dan Stillman
:date:
    2016-12-16 18:21 (JST)

Useful for restarting after spurious errors when using -f

E.g., ./runtests.sh -s syncEngine


------

Update submodules

:commit:
    `b7daef6 <https://github.com/Juris-M/zotero/commit/b7daef6bf4331eacdf4033f4493fb194cbb06276>`_
:author:
    Dan Stillman
:date:
    2016-12-16 17:27 (JST)


------

Add menu option for opening Error Console in Standalone, commented out

:commit:
    `5950bfd <https://github.com/Juris-M/zotero/commit/5950bfd96343d3b850d1a661711b85c8b31bef01>`_
:author:
    Dan Stillman
:date:
    2016-12-16 17:23 (JST)

Not sure we want to expose this, particularly since there are tons of
spurious warnings in current builds due to a chrome registration issue,
but it can be handy for debugging some issues.


------

Fix CSL/file import when Standalone is closed

:commit:
    `2f50b9b <https://github.com/Juris-M/zotero/commit/2f50b9b848f380be326ad98ae5f15b0ea6167ea4>`_
:author:
    Dan Stillman
:date:
    2016-12-16 17:18 (JST)

This is a bit iffy, since at least on macOS the passed file seems to
come in as either -file or -url at different times, but this seems to
work on macOS and Windows. Needs further testing with a packaged version
on Windows.


------

Fix switching out of full mode when started in connector mode

:commit:
    `04941f2 <https://github.com/Juris-M/zotero/commit/04941f23dbcd29899a06e789ea2c511c5b2b4e9b>`_
:author:
    Dan Stillman
:date:
    2016-12-16 17:13 (JST)

Previously, if Standalone was open and Firefox was opened in connector
mode, ZoteroOverlay.onLoad() was never run, which meant that, among
other things, the before-reload handler that closed the Zotero pane when
switching out of full mode was never added.


------

Fix upgrade prompt after incompatible DB in Standalone

:commit:
    `3d117c4 <https://github.com/Juris-M/zotero/commit/3d117c41352010eebe989205f4ccdcf6d3371500>`_
:author:
    Dan Stillman
:date:
    2016-12-15 19:25 (JST)

Since 693c0286e, probably


------

Remove debug line and tweak whitespace/style

:commit:
    `50df62a <https://github.com/Juris-M/zotero/commit/50df62a0e701bedb75386ab137015f407acbfed7>`_
:author:
    Dan Stillman
:date:
    2016-12-15 14:27 (JST)


------

Pass failure response to Connector.callMethod callbacks

:commit:
    `cff7448 <https://github.com/Juris-M/zotero/commit/cff74484be160406de70023112dd67647a555e2f>`_
:author:
    Adomas Venčkauskas
:date:
    2016-12-14 23:02 (JST)


------

Remove coroutine from translate.js not supported in connector

:commit:
    `deb8503 <https://github.com/Juris-M/zotero/commit/deb85038634ac6f99bc7811164c8b090880e71a6>`_
:author:
    Adomas Venčkauskas
:date:
    2016-12-14 22:28 (JST)

From 7fc352b9


------

Fix removed translator handling in connectors

:commit:
    `a853bb0 <https://github.com/Juris-M/zotero/commit/a853bb0661520ec0061a652706c31b6e1d25470b>`_
:author:
    Adomas Venčkauskas
:date:
    2016-12-14 21:15 (JST)


------

Generate new saved search names within libraries, not globally

:commit:
    `c5527a8 <https://github.com/Juris-M/zotero/commit/c5527a82fbd7c5ed8ca47ec388939fdadc8525f9>`_
:author:
    Dan Stillman
:date:
    2016-12-14 17:37 (JST)


------

Remove test for moving existing target dir during data dir migration

:commit:
    `7447525 <https://github.com/Juris-M/zotero/commit/7447525d7596dc1a1ad08f9ebadcd74d0b4142ba>`_
:author:
    Dan Stillman
:date:
    2016-12-14 17:36 (JST)

Functionality removed in 0be67dbda58


------

Fix related items box after 8a4c8d2be05

:commit:
    `2c9c057 <https://github.com/Juris-M/zotero/commit/2c9c057360198ddda701e5189e509c01a78be7e5>`_
:author:
    Dan Stillman
:date:
    2016-12-14 17:36 (JST)


------

Update locales from Transifex

:commit:
    `426c767 <https://github.com/Juris-M/zotero/commit/426c767a437732d2556f9b799c417b75cea89c33>`_
:author:
    Dan Stillman
:date:
    2016-12-14 16:22 (JST)


------

Don't allow data dir migration via prefs if directory exists

:commit:
    `0be67db <https://github.com/Juris-M/zotero/commit/0be67dbda58a5771f31274b202d13872ce7164b3>`_
:author:
    Dan Stillman
:date:
    2016-12-14 16:12 (JST)

And treat an existing non-empty directory as a failure during the
migration, since it should now never happen

Also suggest manually moving on Windows if more than 100 attachments


------

Throw if invalid object id passed to Zotero.DataObjects::getAsync()

:commit:
    `58f554a <https://github.com/Juris-M/zotero/commit/58f554a930b547de63c14dc87ca1bc1b4e87d767>`_
:author:
    Dan Stillman
:date:
    2016-12-14 16:02 (JST)


------

Classic citation dialog fixes

:commit:
    `8a4c8d2 <https://github.com/Juris-M/zotero/commit/8a4c8d2be050575002a5bc74d37b43a921aa44fa>`_
:author:
    Dan Stillman
:date:
    2016-12-14 15:57 (JST)

- Fix loading for libraries that haven't yet been loaded (including if
  the Zotero pane hasn't yet been opened)
- Show a loading message over the items tree
- Fix item selection when editing citation (except if library data
  hasn't yet been loaded, but that doesn't happen in Standalone)


------

Run processCitationCluster() in an iterator

:commit:
    `483555c <https://github.com/Juris-M/zotero/commit/483555cfc19e7b200e932d1430287282740b675e>`_
:author:
    fbennett
:date:
    2016-12-14 11:15 (JST)


------

A little typographical cleanup

:commit:
    `93cfc22 <https://github.com/Juris-M/zotero/commit/93cfc229f9788c93aa2ea99dbc5f4fefd4fdf5bd>`_
:author:
    Dan Stillman
:date:
    2016-12-14 10:34 (JST)


------

Remove extra space in string

:commit:
    `32ae3ee <https://github.com/Juris-M/zotero/commit/32ae3ee74d28a395394b9259fa2f088214e5cf63>`_
:author:
    Dan Stillman
:date:
    2016-12-14 10:29 (JST)


------

Align advanced feed settings dropmarker on OSX

:commit:
    `ead9eaf <https://github.com/Juris-M/zotero/commit/ead9eaf1a0766ec86509221af96c2c418e91eff8>`_
:author:
    Adomas Venčkauskas
:date:
    2016-12-14 01:11 (JST)


------

Don't bother deleting from sync cache when deleting feed items

:commit:
    `5862aa5 <https://github.com/Juris-M/zotero/commit/5862aa5ea58a6651a8186422ec31e7c4f321a037>`_
:author:
    Dan Stillman
:date:
    2016-12-13 23:46 (JST)


------

Update Fx minVersion to 45

:commit:
    `e1f2dbb <https://github.com/Juris-M/zotero/commit/e1f2dbb9db47d9a6f75819e1a26e32320f1959d2>`_
:author:
    Dan Stillman
:date:
    2016-12-13 23:12 (JST)


------

Update locales from Transifex

:commit:
    `b940890 <https://github.com/Juris-M/zotero/commit/b94089053544f3756bd24cb725db3818bb91211b>`_
:author:
    Dan Stillman
:date:
    2016-12-13 23:12 (JST)


------

Saner feed database management (#1131)

:commit:
    `d6d4e4b <https://github.com/Juris-M/zotero/commit/d6d4e4b33e8a88cda4e5ef83b6bfff5b67b26871>`_
:author:
    Adomas Ven
:date:
    2016-12-13 23:07 (JST)

* Mark feedItems read in a single batch SQL update
* Automatically remove old feed items
* User-facing preference globally and per-feed for feed item expiration

------

Fix "Add Item by Identifier" (broken by 78b1d2ee3)

:commit:
    `7fc352b <https://github.com/Juris-M/zotero/commit/7fc352b9b73a3e7acecb0d98424d9d9ef0112a78>`_
:author:
    Dan Stillman
:date:
    2016-12-13 19:23 (JST)

And make lookup tests run when not on Travis, though we should still mock the
HTTP requests.


------

Maybe fix race condition when updating translators manually at startup

:commit:
    `69430d7 <https://github.com/Juris-M/zotero/commit/69430d74b2f74c87d04df4b55b78138a02326401>`_
:author:
    Dan Stillman
:date:
    2016-12-13 15:25 (JST)

If you got the timing just right, you could wipe out all your
translators (though standard ones would be reinstalled on restart).
Hopefully that's fixed?


------

Improves proxy support (#1129)

:commit:
    `747c11c <https://github.com/Juris-M/zotero/commit/747c11c917fa96ecf5c30d63e8276600bdc4cce5>`_
:author:
    Adomas Ven
:date:
    2016-12-12 21:29 (JST)

Improves proxy support

- Automatically detect and dehyphenise https proxies which use EZProxy
  HttpsHyphens
- Web translators now pass around Zotero.Proxy instances which can
  proxify/deproxify urls passed to `translate.setLocation()` before calling
  `translate.getTranslators()`/ translate.detect()`. The proxy passing is
  done within connector background/injected processes and between
  standalone and connectors.
- Proxy protocol unified with connectors. Connectors can now pass
  proxies to `/connector/save_items`. The proxies will be used to resolve
  true item and attachment urls when saving.

Closes zotero/zotero#578, zotero/zotero#721

Relevant zotero/zotero#34, zotero/zotero#556

------

Fix failures on Travis due to broken isDir

:commit:
    `c2ebcc9 <https://github.com/Juris-M/zotero/commit/c2ebcc9dbc52d123331f3eb6935345b8335b82b2>`_
:author:
    Dan Stillman
:date:
    2016-12-12 20:57 (JST)


------

Updates locales from Transifex

:commit:
    `3f32523 <https://github.com/Juris-M/zotero/commit/3f325237092d2babccaae7042e52ecf75151d73c>`_
:author:
    Dan Stillman
:date:
    2016-12-12 18:14 (JST)


------

Fix replacement of existing item storage directories

:commit:
    `80f888f <https://github.com/Juris-M/zotero/commit/80f888f37426059875b25e45641939d8e45d84c7>`_
:author:
    Dan Stillman
:date:
    2016-12-12 17:26 (JST)

- Make Zotero.Attachments.createDirectoryForItem() delete existing
  directory instead of moving it to orphaned-files; also now returns a
  string path instead of an nsIFile
- Use above function during file sync instead of
  _deleteExistingAttachmentFiles(), which was partly broken
- Fix throwing on errors when saving some attachment types


------

Show "Loading…" in Quick Copy drop-down before list is loaded

:commit:
    `60ed6d4 <https://github.com/Juris-M/zotero/commit/60ed6d447e63976de94cb4400ebf46a268089b57>`_
:author:
    Dan Stillman
:date:
    2016-12-12 16:05 (JST)

Styles and translators have to be loaded before the list is displayed,
so there can be a delay if the prefs are opened right at startup.


------

Fix potential translator initialization problem after 04516af552

:commit:
    `425838e <https://github.com/Juris-M/zotero/commit/425838e2ec30c142b946039f12d583e877b2c79c>`_
:author:
    Dan Stillman
:date:
    2016-12-12 16:04 (JST)


------

Encode item objects for upload

:commit:
    `6ec550c <https://github.com/Juris-M/zotero/commit/6ec550c18893e967fc4a71e9990bc169d960e7cb>`_
:author:
    fbennett
:date:
    2016-12-12 08:09 (JST)


------

Test for stray multi segment

:commit:
    `e9c3f91 <https://github.com/Juris-M/zotero/commit/e9c3f918529406a192bec2ec5ea787345ff66179>`_
:author:
    fbennett
:date:
    2016-12-12 08:09 (JST)


------

Do not throw error on object without multi segment

:commit:
    `a9fa3a6 <https://github.com/Juris-M/zotero/commit/a9fa3a6aa8c6df954281ec5743ccaf85fee5e7f5>`_
:author:
    fbennett
:date:
    2016-12-12 08:07 (JST)


------

Test fixture for itemToCSLJSON with portableJSON toggle

:commit:
    `e53c040 <https://github.com/Juris-M/zotero/commit/e53c040bc826c13b5231c699a5d0b739e16c650c>`_
:author:
    fbennett
:date:
    2016-12-12 06:33 (JST)


------

Expected result from itemToCSLJSON with portableJSON toggle

:commit:
    `9e98d15 <https://github.com/Juris-M/zotero/commit/9e98d1506c6f4aedd62f1bafc3ff9a197be713fd>`_
:author:
    fbennett
:date:
    2016-12-12 06:32 (JST)


------

Stir in some multilingual test data

:commit:
    `d088e9d <https://github.com/Juris-M/zotero/commit/d088e9d89082f8ace27cadf9944a5e2214c91d37>`_
:author:
    fbennett
:date:
    2016-12-12 06:32 (JST)


------

Explicit assignments from encodeMlzContent/decodeMlzContent

:commit:
    `113a327 <https://github.com/Juris-M/zotero/commit/113a3279b8d805f3f4dc124f3ef738a52d5fd9d7>`_
:author:
    fbennett
:date:
    2016-12-12 06:31 (JST)


------

encodeMlzContent/decodeMlzContent without side-effects

:commit:
    `7171fe0 <https://github.com/Juris-M/zotero/commit/7171fe09776fd54489118b4b5fc428654368564d>`_
:author:
    fbennett
:date:
    2016-12-12 06:28 (JST)


------

Don't include child items in imported-item count

:commit:
    `2ead95b <https://github.com/Juris-M/zotero/commit/2ead95b39a119175b16248acd8fe2368f55e7c04>`_
:author:
    Dan Stillman
:date:
    2016-12-11 16:59 (JST)


------

Fix test

:commit:
    `85776a9 <https://github.com/Juris-M/zotero/commit/85776a99b210f349f11ff345877e6d2cf384ba89>`_
:author:
    Dan Stillman
:date:
    2016-12-11 16:55 (JST)


------

Update locales from Transifex

:commit:
    `d781f9c <https://github.com/Juris-M/zotero/commit/d781f9c3d4d5e55a2616f0e616d2b0ad7ca0eb84>`_
:author:
    Dan Stillman
:date:
    2016-12-11 16:29 (JST)


------

Select items after importing from clipboard

:commit:
    `4d77977 <https://github.com/Juris-M/zotero/commit/4d77977a293b758f7c6ecb2cd4e57854e94a3f90>`_
:author:
    Dan Stillman
:date:
    2016-12-09 20:12 (JST)

And wait for async switch to My Library if in a non-editable view


------

Scroll first selected row into view in itemTreeView::selectItems()

:commit:
    `bb246e5 <https://github.com/Juris-M/zotero/commit/bb246e5514596030f8c02540713bfb611e572a62>`_
:author:
    Dan Stillman
:date:
    2016-12-09 20:08 (JST)

Separate out the enhanced ensureRowIsVisible() logic from selectItem()
and call it from selectItems() as well on the first item in the set.


------

Fix opacity of lines in progress popup when using addLines()

:commit:
    `142694c <https://github.com/Juris-M/zotero/commit/142694ca0f43455411ea395a8cba45b797401640>`_
:author:
    Dan Stillman
:date:
    2016-12-09 20:05 (JST)

Lines default to 50%, but addLines() doesn't provide a mechanism for
updating the opacity, so all the callers that used addLines() showed as
gray. Instead, just default to 100% when using addLines().


------

Import translation improvements

:commit:
    `78b1d2e <https://github.com/Juris-M/zotero/commit/78b1d2ee35ed56420bfb4f34b73d9971365e5e71>`_
:author:
    Dan Stillman
:date:
    2016-12-09 18:36 (JST)

- Don't block the UI with a progress meter during imports. Instead, show
  a popup in the bottom right when the import is done that shows how
  many items were saved.
- Fix hang when importing some files
- Fix various problems with asynchronous operations/transactions
    - Use the save queue for imports instead of creating concurrent
      transactions that can time out
    - Wait for the save to finish before returning from the translate()
      promise. All save modes now use the save queue, so code that
      handled the non-save-queue process can probably be removed.
    - Serialize child attachments instead of running them concurrently.
      This might make multi-attachment saves a little slower, since they
      can't download at the same time, but it avoids problems with
      concurrent transactions. We might be able to improve this to allow
      concurrent downloads, or allow concurrent saves for a limited
      number of items (e.g., from web saving) if not for larger imports.
- Change collection handling during import, since UI is now active
  - Select the root collection at the beginning of the import
  - Assign items and collections to the root during the import instead
    of at the end
  - Don't select other collections
- Change a few ItemSaver functions to use promises and remove
  unnecessary callbacks. (This includes some connector code that needs
  to be tested.)
- Change some `parentID` variables in ItemSaver to `parentItemID` for
  clarity, since collections are now handled in more places

To-do:

- Save items in smaller batches instead of doing all in the same
  transaction
- Show progress meter in a bottom-right popup during the import


------

Localized plural form support for Zotero.getString()

:commit:
    `c61a9dc <https://github.com/Juris-M/zotero/commit/c61a9dc5f3acbd52390823350351c2a2e2e126a5>`_
:author:
    Dan Stillman
:date:
    2016-12-11 07:07 (JST)

Zotero.getString() now takes a third parameter, `num` (which should also
appear in `params`) to use when determining which plural form of the
string to use. Localized strings should include all forms in the order
specified in [1], separated by semicolons.

[1] https://developer.mozilla.org/en-US/docs/Mozilla/Localization/Localization_and_Plurals


------

Fix result strings

:commit:
    `70249a8 <https://github.com/Juris-M/zotero/commit/70249a8a03bc6691ba965ee5bd0b884dadab8186>`_
:author:
    fbennett
:date:
    2016-12-09 22:35 (JST)


------

Fix syntax error in JM test

:commit:
    `53034a5 <https://github.com/Juris-M/zotero/commit/53034a59047a532055febdabcc79a80766bfac03>`_
:author:
    fbennett
:date:
    2016-12-09 22:35 (JST)


------

Remove duplicate code

:commit:
    `f26049d <https://github.com/Juris-M/zotero/commit/f26049dfa2f01482a8a4b197ac803664fae64f59>`_
:author:
    fbennett
:date:
    2016-12-09 22:34 (JST)


------

Add .collections support to Zotero.Attachments.linkFromURL()

:commit:
    `9836f33 <https://github.com/Juris-M/zotero/commit/9836f33d41ed1c50ea0bef7496c91efc42705892>`_
:author:
    Dan Stillman
:date:
    2016-12-09 17:10 (JST)


------

Move ItemGetter test to correct section

:commit:
    `9fbd84b <https://github.com/Juris-M/zotero/commit/9fbd84b27eac7e34bf587c2649ed166d85a7ec01>`_
:author:
    Dan Stillman
:date:
    2016-12-09 15:18 (JST)


------

Sort translators in import filepicker drop-down

:commit:
    `0e72ee3 <https://github.com/Juris-M/zotero/commit/0e72ee3305478617b8c70262ef121eb6b37796cb>`_
:author:
    Dan Stillman
:date:
    2016-12-09 09:24 (JST)


------

Stop using Zotero.lazy() for Zotero.Translators.init()

:commit:
    `04516af <https://github.com/Juris-M/zotero/commit/04516af552f47633482c060097077f7b179a2d4e>`_
:author:
    Dan Stillman
:date:
    2016-12-09 09:17 (JST)

It makes things too complicated with some of the logic necessary for bundled
file updating.


------

Encode MLZ data before generating patch

:commit:
    `d880ae2 <https://github.com/Juris-M/zotero/commit/d880ae2f1e79c43e0fd53e1186dc152210650902>`_
:author:
    fbennett
:date:
    2016-12-09 08:51 (JST)


------

Skip multi segment in test

:commit:
    `923673d <https://github.com/Juris-M/zotero/commit/923673d8f9fadc066279323bf0804cf01f2c57ac>`_
:author:
    fbennett
:date:
    2016-12-09 08:50 (JST)


------

Modify a multilingual field in tests

:commit:
    `d8ebae3 <https://github.com/Juris-M/zotero/commit/d8ebae3253d5098be490eaed1fe9b7779229304c>`_
:author:
    fbennett
:date:
    2016-12-09 08:49 (JST)


------

Fix multi-tag insert mode

:commit:
    `9872046 <https://github.com/Juris-M/zotero/commit/98720462feff0dc3df5b457d908e232de67241ac>`_
:author:
    Dan Stillman
:date:
    2016-12-08 20:57 (JST)


------

Octal literals invalid in strict mode, replacing with hexadecimal

:commit:
    `eaa7588 <https://github.com/Juris-M/zotero/commit/eaa758870ea8b0966f7d7b6ea4e9d640cc5cd591>`_
:author:
    Adomas Venčkauskas
:date:
    2016-12-08 20:27 (JST)

Relevant in connectors


------

Don't update feeds after syncs during tests

:commit:
    `fbd21ba <https://github.com/Juris-M/zotero/commit/fbd21bae1600ac6b338a80c08de76b9c0530d823>`_
:author:
    Dan Stillman
:date:
    2016-12-08 19:52 (JST)

This reverts commit 60befe52e4fec76ff7cbe6c169510661d443a971 and adds a
better fix that leaves the notifier event in place. Feeds just don't
need to update after syncs during tests.


------

Remove database closed errors in sync tests

:commit:
    `60befe5 <https://github.com/Juris-M/zotero/commit/60befe52e4fec76ff7cbe6c169510661d443a971>`_
:author:
    Adomas Venčkauskas
:date:
    2016-12-08 19:16 (JST)


------

Fix renaming linked attachment files

:commit:
    `2b9ef26 <https://github.com/Juris-M/zotero/commit/2b9ef26c61aab43bd08ecec04cc1029f050f5232>`_
:author:
    Dan Stillman
:date:
    2016-12-08 17:57 (JST)


------

Align runtests with Z5.0

:commit:
    `ced0472 <https://github.com/Juris-M/zotero/commit/ced047247e44288eb92e4e129cd00285c9d97616>`_
:author:
    fbennett
:date:
    2016-12-07 14:48 (JST)


------

Bypass cache when requesting .prop file from WebDAV

:commit:
    `021f8e1 <https://github.com/Juris-M/zotero/commit/021f8e14765f9bc2177aa8d39435406914a29e3f>`_
:author:
    Dan Stillman
:date:
    2016-12-06 22:39 (JST)

This might not be necessary, but it's an attempt to troubleshoot
https://forums.zotero.org/discussion/63439/attachments-not-syncing,
which might be a caching issue.


------

Fix error exporting standalone notes

:commit:
    `73e1fd0 <https://github.com/Juris-M/zotero/commit/73e1fd07b0b4a1735a22d52073cff1148562d025>`_
:author:
    Dan Stillman
:date:
    2016-12-06 22:17 (JST)


------

Exclude feeds from Quick Format searches

:commit:
    `99cd11e <https://github.com/Juris-M/zotero/commit/99cd11e7937c24bba3adef01e08f9e00ab2ea78a>`_
:author:
    Dan Stillman
:date:
    2016-12-06 21:13 (JST)

Addresses #1126


------

Show more startup errors in Standalone, with stack

:commit:
    `1d45f3d <https://github.com/Juris-M/zotero/commit/1d45f3d00826b21651cf9a18d5137a687a28f752>`_
:author:
    Dan Stillman
:date:
    2016-12-06 20:12 (JST)


------

Fix reading settings from other-app profile

:commit:
    `5866a76 <https://github.com/Juris-M/zotero/commit/5866a763122c72ee1c5121d9422b58bbd8bc414b>`_
:author:
    Dan Stillman
:date:
    2016-12-06 19:20 (JST)


------

Don't show migration message in a popup in Standalone

:commit:
    `c08354e <https://github.com/Juris-M/zotero/commit/c08354eced4e0dce5d2f6a174dea50b68a73e01e>`_
:author:
    Dan Stillman
:date:
    2016-12-06 19:09 (JST)

Apparently this was happening sometimes, though I'm not sure how.


------

Remove "do not interrupt" from migration message

:commit:
    `abff9e3 <https://github.com/Juris-M/zotero/commit/abff9e39ad1195908822a164edb6bcbb07449f92>`_
:author:
    Dan Stillman
:date:
    2016-12-06 17:46 (JST)

It would be good for people not to kill the process indiscriminately, but the
migration will theoretically pick up where it left off, so it shouldn't be too
big a deal.


------

Account for encoding step in patch mode

:commit:
    `f2735a1 <https://github.com/Juris-M/zotero/commit/f2735a1d26f397dc3efc1a93f7141c4c84f72305>`_
:author:
    fbennett
:date:
    2016-12-06 12:21 (JST)


------

Fix context menu auto-selection bug

:commit:
    `88096ac <https://github.com/Juris-M/zotero/commit/88096ac76a618204b81d978e9becbc6100eda51d>`_
:author:
    Dan Stillman
:date:
    2016-12-06 11:34 (JST)

A context-menu entry was being selected automatically when the click
target was near the bottom of the screen.


------

Fix typo in JM test

:commit:
    `305b203 <https://github.com/Juris-M/zotero/commit/305b2037a962539c5d94e1b487eb86cb7389add8>`_
:author:
    fbennett
:date:
    2016-12-06 10:09 (JST)


------

Avoid dom nav fail w/no nextSibling (fixes itemPaneTest)

:commit:
    `d590227 <https://github.com/Juris-M/zotero/commit/d590227e50f569d45906fcd86aba2efeb624dfc8>`_
:author:
    fbennett
:date:
    2016-12-06 09:10 (JST)


------

Remove cruft missed in previous merge operation

:commit:
    `afcb7ae <https://github.com/Juris-M/zotero/commit/afcb7aec4a217b15fbcdf31dc8fbcc632f076b71>`_
:author:
    fbennett
:date:
    2016-12-05 23:34 (JST)


------

Do a better job of displaying startup errors

:commit:
    `2d6a1b3 <https://github.com/Juris-M/zotero/commit/2d6a1b354129fe72d04faaaa988f8263892419ce>`_
:author:
    Dan Stillman
:date:
    2016-12-05 19:17 (JST)

This helps ensure that the toolbar button opens an alert with the relevant
error instead of opening the Zotero pane with an infinite progress meter.


------

Remove redundant _addToolbarIcon() calls at startup

:commit:
    `c54af7a <https://github.com/Juris-M/zotero/commit/c54af7a5ae6fbe201cc2d59db24050abf754e8b6>`_
:author:
    Dan Stillman
:date:
    2016-12-05 19:17 (JST)


------

Fix item-not-loaded error resetting data in unloaded library

:commit:
    `d19732b <https://github.com/Juris-M/zotero/commit/d19732ba5f0b8ba216656cff69f6a1ad16f01c61>`_
:author:
    Dan Stillman
:date:
    2016-12-05 19:05 (JST)


------

Fix User-Agent header handling for endpoints updated in b5bc18c7ed

:commit:
    `302efb0 <https://github.com/Juris-M/zotero/commit/302efb08549c11c3e9b46c0b4095a7bd44f59441>`_
:author:
    Dan Stillman
:date:
    2016-12-05 17:05 (JST)


------

Add new init(options) signature for server endpoints

:commit:
    `b5bc18c <https://github.com/Juris-M/zotero/commit/b5bc18c7eda7d06a1d03d3ab3765988791f52a33>`_
:author:
    Dan Stillman
:date:
    2016-12-05 16:29 (JST)

An endpoint can now take a single object containing 'method', 'pathname',
'query', 'headers', and 'data' and return an integer, an array containing
[statusCode, contentType, body], or a promise for either. This allows the
handlers to use the HTTP method and headers and removes the need for callbacks
when some handlers already use coroutine().

If init() returns a promise, it now has to use the new single-parameter
signature (because the check is done with Function.length, and combining
promises and callbacks doesn't make sense anyway).


------

Update styles

:commit:
    `7c621aa <https://github.com/Juris-M/zotero/commit/7c621aa412e0580a07a273b2e100e38da78f660f>`_
:author:
    fbennett
:date:
    2016-12-05 10:43 (JST)


------

Update translators

:commit:
    `122d9ba <https://github.com/Juris-M/zotero/commit/122d9ba67fe317c9de6b365a8f5d8398139675dc>`_
:author:
    fbennett
:date:
    2016-12-05 10:43 (JST)


------

Juris-M locale changes

:commit:
    `792f140 <https://github.com/Juris-M/zotero/commit/792f140a4d55139e25fbc5ce5fa45a01c9769424>`_
:author:
    fbennett
:date:
    2016-12-05 10:42 (JST)


------

Juris-M monster checkin

:commit:
    `5cf4932 <https://github.com/Juris-M/zotero/commit/5cf4932c0fd4b262ad93f5ca1a03ff53a6696034>`_
:author:
    fbennett
:date:
    2016-12-05 10:41 (JST)

